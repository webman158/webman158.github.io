<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="web前端开发，移动端开发是一个很好的工种，希望你能和我携手共进前端职业发展">
<meta property="og:type" content="website">
<meta property="og:title" content="一个学徒的世界">
<meta property="og:url" content="http://biedongda.com/index.html">
<meta property="og:site_name" content="一个学徒的世界">
<meta property="og:description" content="web前端开发，移动端开发是一个很好的工种，希望你能和我携手共进前端职业发展">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="一个学徒的世界">
<meta name="twitter:description" content="web前端开发，移动端开发是一个很好的工种，希望你能和我携手共进前端职业发展">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://biedongda.com/"/>





  <title>一个学徒的世界</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">一个学徒的世界</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">不敢面对的永远受其折磨</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Startseite
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archiv
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://biedongda.com/2018/06/17/html-css-笔记整理/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="前端学徒">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一个学徒的世界">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/17/html-css-笔记整理/" itemprop="url">html/css-笔记整理</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-06-17T23:48:07+08:00">
                2018-06-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="html标签"><a href="#html标签" class="headerlink" title="html标签"></a>html标签</h2><h3 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h3><!--�93-->
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2018/06/17/html-css-笔记整理/#more" rel="contents">
              Weiterlesen &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://biedongda.com/2018/03/29/如何成为一名优秀的web前端工程师/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="前端学徒">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一个学徒的世界">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/29/如何成为一名优秀的web前端工程师/" itemprop="url">如何成为一名优秀的web前端工程师</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-29T21:07:24+08:00">
                2018-03-29
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="如何成为一名优秀的web前端工程师（前端攻城师）？"><a href="#如何成为一名优秀的web前端工程师（前端攻城师）？" class="headerlink" title="如何成为一名优秀的web前端工程师（前端攻城师）？"></a>如何成为一名优秀的web前端工程师（前端攻城师）？</h1><p>　</p>
<blockquote>
<p>我所遇到的前端程序员分两种：<br>第一种一直在问：如何学习前端？<br>第二种总说：前端很简单，就那么一点东西。<br>我从没有听到有人问：如何做一名优秀、甚至卓越的WEB前端工程师。</p>
</blockquote>
<h2 id="何为：前端工程师？"><a href="#何为：前端工程师？" class="headerlink" title="何为：前端工程师？"></a>何为：前端工程师？</h2><p>　　前端工程师，也叫Web前端开发工程师。他是随着web发展，细分出来的行业。</p>
<p>Web前端开发技术主要包括三个要素：HTML、CSS和JavaScript！<br>　　它要求前端开发工程师不仅要掌握基本的Web前端开发技术，<strong>网站性能优化</strong>、<strong>SEO和服务器端的基础知识</strong>，而且要学会运用各种工具进行辅助开发以及理论层面的知识，包括代码的可维护性、组件的易用性、分层语义模板和浏览器分级支持等。<br>　 　随着近两三年来RIA（Rich Internet Applications的缩写，中文含义为：丰富的因特网应用程序）的流行和普及带来的诸如：Flash/Flex，Silverlight、XML和 服务器端语言（PHP、ASP.NET，JSP、Python）等语言，前端开发工程师也需要掌握。<br>　　前端开发的入门门槛其实很低，与服务器端语言先慢后快的学习曲线相比，前端开发的学习曲线是先快后慢。<br>　　HTML 甚至不是一门语言，他仅仅是简单的标记语言！<br>　　CSS 只是无类型的样式修饰语言。当然可以勉强算作弱类型语言。<br>Javascript 的基础部分相对来说不难，入手还算快。<br>也正因为如此，前端开发领域有很多自学成“才”的同行，但大多数人都停留在会用的阶段，因为后面的学习曲线越来越陡峭，每前进一步都很难。<br>　 　Web前端技术有一些江湖气，知识点过于琐碎，技术价值观的博弈也难分伯仲，即全局的系统的知识结构并未成体系，这些因素也客观上影响了“正统“前端技术的沉淀！而且各种“奇技淫巧”被滥用，前端技术知识的传承也过于泛泛，新人难看清时局把握主次。因此，前端技术领域，为自己觅得一个靠谱的师兄，重要性要盖过项目、团队、公司、甚至薪水。<br>　　另一方面，正如前面所说，前端开发是个非常新的职业，对一些规范和最佳实践的研究都处于探索阶段。<br>　　总有新的灵感和技术不时闪现出来，例如CSS sprite、负边距布局、栅格布局等；<br>　　各种JavaScript框架层出不穷，为整个前端开发领域注入了巨大的活力；<br>　　浏览器大战也越来越白热化，跨浏览器兼容方案依然是五花八门。<br>　　为了满足“高可维护性”的需要，需要更深入、更系统地去掌握前端知识，这样才可能创建一个好的前端架构，保证代码的质量。<br>　　随着手持设备的迅猛发展，带动了HTML5行业标准的快速发展。web领域的技术，大概有10年都没有大的更新了！<br><strong>现在市场很需要优秀的、高级的前端工程师。</strong><br>　　一方面是因为这是一个比较新的细分行业，而且前端程序员大都自学一部分，知识结构不系统；另一方面，大学里面没有这种课程，最最重要的是：北大青鸟这类培训机构也没有专门的前端工程师的培训课程！！<br>　　吴亮在《JavaScript 王者归来》第一张的序里面说：大多数程序员认为 Javascript 过于简陋，只适合一些网页上面花哨的表现，所以不愿花费精力去学习，或者以为不学习就能掌握。<br>　　实际上，一门语言是否脚本语言，往往是她的设计目标决定，简单与复杂并不是区分脚本语言和非脚本语言的标准。<br>　　事实上，在脚本语言里面，Javascript 属于相当复杂的一门语言，他的复杂度即使放在非脚本语言中来衡量，也是一门相当复杂的语言！<br>Javascript 的复杂度不逊色于 Perl 和 Python！</p>
<h2 id="如何学习前端知识？"><a href="#如何学习前端知识？" class="headerlink" title="如何学习前端知识？"></a>如何学习前端知识？</h2><p><strong>我们生活在一个充满规则的宇宙里面。社会秩序按照规则运行，计算机语言几乎全部是规则的集合。计算机前辈们定义规则，规则约束我们，我们用规则控制数据。大部分时候，对数据的合理控制，来自于你对规则的掌握。</strong><br>学习 HTML，CSS 应该先跟着书仔细、扎实的学一遍。然后就需要做大量的练习，做各种常规的、奇怪的、大量的布局练习来巩固、理解自己的知识。<br>　　而学习 Javascript 首先要知道这门语言可以做什么，不能做什么，擅长做什么，不擅长做什么！<br>　　如果你只想当一个普通的前端程序员，你只需要记住大部分 Javascript 函数，做一些练习就可以了。<br>　　如果你想当深入了解Javascript，你需要了解 Javascript 的原理，机制。需要知道他们的本源，需要深刻了解 Javascript 基于对象的本质。<br>　　还需要深刻了解浏览器宿主下的Javascript的行为、特性。<br>　　因为历史原因，Javascript一直不被重视，有点像被收养的一般！ 所以他有很多缺点，各个宿主环境下的行为不统一、内存溢出问题、执行效率低下等问题。<br>　　作为一个优秀的前端工程师还需要深入了解、以及学会处理 Javascript 的这些缺陷。</p>
<h2 id="那么一名优秀的、甚至卓越的-前端开发工程师的具备什么条件？"><a href="#那么一名优秀的、甚至卓越的-前端开发工程师的具备什么条件？" class="headerlink" title="那么一名优秀的、甚至卓越的 前端开发工程师的具备什么条件？"></a>那么一名优秀的、甚至卓越的 前端开发工程师的具备什么条件？</h2><p>　　<strong>首先，优秀的Web前端开发工程师要在知识体系上既要有广度和深度！</strong> 做到这两点，其实很难。所以很多大公司即使出高薪也很难招聘到理想的前端开发工程师。技术非黑即白，只有对和错，而技巧则见仁见智。<br>　　在以前，会一点Photoshop和Dreamweaver的操作，就可以制作网页。<br>　　现在，只掌握这些已经远远不够了。无论是开发难度上，还是开发方式上，现在的网页制作都更接近传统的网站后台开发，所以现在不再叫网页制作，而是叫Web前端开发。<br>Web前端开发在产品开发环节中的作用变得越来越重要，而且需要专业的前端工程师才能做好。<br>Web前端开发是一项很特殊的工作，涵盖的知识面非常广，既有具体的技术，又有抽象的理念。简单地说，它的主要职能就是把网站的界面更好地呈现给用户。<br>　 　其次，优秀的Web前端开发工程师应该具备快速学习能力。Web发展的很快，甚至可以说这些技术几乎每天都在变化！如果没有快速学习能力，就跟不上 Web发展的步伐。前端工程师必须不断提升自己，不断学习新技术、新模式；仅仅依靠今天的知识无法适应未来。Web的明天与今天必将有天壤之别，而前端工程师的工作就是要搞清楚如何通过自己的Web应用程序来体现这种翻天覆地的变化。<br>　　说到这里，我想起了一个大师说过的一句话：对于新手来说，新技术就是新技术。<br>　　对于一个高手来说，新技术不过是旧技术的延伸。<br>　　再者，优秀的前端工程师需要具备良好的沟通能力，因为前端工程师至少都要满足四类客户的需求。<br>　　1、产品经理。这些是负责策划应用程序的一群人。他们会想出很多新鲜的、奇怪的、甚至是不可能实现的应用。一般来说，产品经理都追求丰富的功能。<br>　　2、UI设计师。这些人负责应用程序的视觉设计和交互模拟。他们关心的是用户对什么敏感、交互的一贯性以及整体的好用性。一般来说，UI设计师侯倾向于流畅靓丽、但并不容易实现的用户界面，而且他们经常不满前端工程师造成 1px 的误差。<br>　　3、项目经理。这些人负责实际地运行和维护应用程序。项目管理的主要关注点，无外乎正常运行时间、应用程序始终正常可用的时间、性能和截止日期。项目经理追求的目标往往是尽量保持事情的简单化，以及不在升级更新时引入新问题。<br>　　4、最终用户。指的是应用程序的主要消费者。尽管前端工程师不会经常与最终用户打交道，但他们的反馈意见至关重要。最终用户要求最多的就是对个人有用的功能，以及竞争性产品所具备的功能。<br>Yahoo 公司 ，YUI 的开发工程师 Nicholas C. Zakas 认为：<br>　 　前端工程师是计算机科学职业领域中最复杂的一个工种。绝大多数传统的编程思想已经不适用了，为了在多种平台中使用，多种技术都借鉴了大量软科学的知识和 理念。成为优秀前端工程师所要具备的专业技术，涉及到广阔而复杂的领域，这些领域又会因为你最终必须服务的各方的介入而变得更加复杂。专业技术可能会引领你进入成为前端工程师的大门，但只有运用该技术创造的应用程序以及你跟他人并肩协同的能力，才会真正让你变得优秀。<br>　　————————————<br>关于书籍：<br>　　HTML、CSS 类别书籍，都是大同小异，在当当网、卓越网搜索一下很多推荐。如果感觉学的差不多了，可以关注一下《CSS禅意花园》，这个很有影响力。<br>　　Javascript 的书籍推荐看老外写的，国内很多 Javascript 书籍的作者对 Javascript 语言了解的都不是很透彻。<br>　　这里推荐几本 Javascript 书籍：<br><strong>初级读物：</strong><br>《JavaScript高级程序设计》：一本非常完整的经典入门书籍，被誉为JavaScript圣经之一，详解的非常详细，最新版第三版已经发布了，建议购买。<br>《JavaScript王者归来》百度的一个Web开发项目经理写的，作为初学者准备的入门级教程也不错。<br><strong>中级读物：</strong><br>《JavaScript权威指南》：另外一本JavaScript圣经，讲解的也非常详细，属于中级读物，建议购买。<br>《JavaScript.The.Good.Parts》：Yahoo大牛，JavaScript精神领袖Douglas Crockford的大作，虽然才100多页，但是字字珠玑啊！强烈建议阅读。<br>《高性能JavaScript》：《JavaScript高级程序设计》作者Nicholas C. Zakas的又一大作。<br>《Eloquent JavaScript》：这本书才200多页，非常短小，通过几个非常经典的例子（艾米丽姨妈的猫、悲惨的隐士、模拟生态圈、推箱子游戏等等）来介绍JavaScript方方面面的知识和应用方法。<br><strong>高级读物：</strong><br>《JavaScript Patterns 》：书中介绍到了各种经典的模式，如构造函数、单例、工厂等等，值得学习。<br>《Pro.JavaScript.Design.Patterns》：Apress出版社讲解JavaScript设计模式的书，非常不错。<br>《Developing JavaScript Web Applications》：构建富应用的好书，针对MVC模式有较为深入的讲解，同时也对一些流程的库进行了讲解。<br>《Developing Large Web Applications》：不仅有JavaScript方面的介绍，还有CSS、HTML方面的介绍，但是介绍的内容却都非常不错，真正考虑到了一个大型的Web程序下，如何进行JavaScript架构设计，值得一读。<br>　　要做优秀的前端工程师，还需要继续努力：《高性能网站建设指南》、《Yahoo工程师的网站性能优化的建议》、“YSLOW”性能优化建议、《网站重构》、《Web开发敏捷之道》、“ jQuery 库”、“前端框架”、“HTML5”、“CSS3”。。。 这些都要深入研究！<br>万事开头难！如果你能到这个境界，剩下的路自己就可以走下去了。<br>人们常说：不想当裁缝的司机，不是个好厨师。<br>如果单纯只是学习前端编程语言、而不懂后端编程语言（PHP、ASP.NET，JSP、Python），也不能算作是优秀的前端工程师。<br>在成为一个优秀的前端工程师的道路上，充满了汗水和辛劳。<br>　　—— 王子墨  写于 Hong Kong, Kowloon<br>　　2012年10月28日 20:18</p>
<p><a href="https://kb.cnblogs.com/page/165309/" target="_blank" rel="external">转载链接:博客园</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://biedongda.com/2018/03/17/JS面试题02/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="前端学徒">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一个学徒的世界">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/17/JS面试题02/" itemprop="url">JS面试题02</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-17T20:15:16+08:00">
                2018-03-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h1><ol>
<li>如何理解json</li>
</ol>
<h2 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h2><ol>
<li>对<code>json</code>的理解<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// json 没什么特殊的，就是个js对象而已，json对象的属性必须要用双引号包裹</span></div><div class="line"></div><div class="line"><span class="comment">// 涉及到json 常用的两个方法：</span></div><div class="line"><span class="built_in">JSON</span>.stringify(&#123;<span class="string">"name"</span>:<span class="string">"li"</span>,<span class="string">"age"</span>:<span class="number">18</span>&#125;);  <span class="comment">// json对象 --&gt; json字符串</span></div><div class="line"><span class="built_in">JSON</span>.parse(<span class="string">'&#123;"name":"li","age":18&#125;'</span>);<span class="comment">// json字符串 --&gt; json对象</span></div></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="存储"><a href="#存储" class="headerlink" title="存储"></a>存储</h1><h2 id="题目-1"><a href="#题目-1" class="headerlink" title="题目"></a>题目</h2><ol>
<li>请描述下<code>cookie</code>,<code>sessionStorage</code>和<code>localStorage</code>的区别<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">cookie ：本身用于客户端和服务端通讯，但它有本地存储的功能，于是就被借用了，使用<span class="built_in">document</span>.cookie=。。。获取修改即可</div><div class="line">缺点：</div><div class="line">    <span class="number">1.</span> 存储了太小<span class="number">4</span>kb；</div><div class="line">    <span class="number">2.</span> 所有http请求都带着，影响获取资源效率；</div><div class="line">    <span class="number">3.</span> API简单，需要封装才能用<span class="built_in">document</span>.cookie...；</div><div class="line"></div><div class="line">sessionStorage</div><div class="line">    浏览器关了会清<span class="number">0</span></div><div class="line">    HTML5专门为存储而设计，最大容量<span class="number">5</span>M；API简单易用；</div><div class="line">    sessionStorage.setItem(key,value);</div><div class="line">    sessionStorage.getItem(key);</div><div class="line"></div><div class="line">localStorage</div><div class="line">    HTML5专门为存储而设计，最大容量<span class="number">5</span>M；API简单易用；</div><div class="line">    localStorage.setItem(key,value);</div><div class="line">    localStorage.getItem(key);</div><div class="line">ios safari隐藏模式下，localstorage.getItem会报错，建议统一使用<span class="keyword">try</span> <span class="keyword">catch</span>封装</div></pre></td></tr></table></figure>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://biedongda.com/2018/03/13/JS面试题01/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="前端学徒">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一个学徒的世界">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/13/JS面试题01/" itemprop="url">JS面试题01</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-13T09:55:55+08:00">
                2018-03-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h1 id="变量类型和计算"><a href="#变量类型和计算" class="headerlink" title="变量类型和计算"></a>变量类型和计算</h1><h2 id="题目："><a href="#题目：" class="headerlink" title="题目："></a>题目：</h2><ol>
<li>js中使用<code>typeof</code>能得到的类型有哪些</li>
<li>何时使用<code>===</code>何时使用<code>==</code></li>
<li>js中有哪些内置函数</li>
<li>js变量按照存储方式分为哪些类型，并描述其特点</li>
<li>数组的常用api有哪些</li>
</ol>
<h2 id="知识点："><a href="#知识点：" class="headerlink" title="知识点："></a>知识点：</h2><ol>
<li><p><code>typeof</code>的返回值</p>
<!--�13-->
</li>
<li><p><code>===</code> 和 <code>==</code>的区别</p>
<!--�14-->
</li>
<li><p>内置函数</p>
<!--�15-->
</li>
<li><p>数据类型：值类型与引用类型</p>
<!--�16-->
</li>
<li><p>数组常用api</p>
<!--�17-->
</li>
</ol>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2018/03/13/JS面试题01/#more" rel="contents">
              Weiterlesen &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://biedongda.com/2018/03/09/http服务与ajax编程/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="前端学徒">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一个学徒的世界">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/09/http服务与ajax编程/" itemprop="url">http服务与ajax编程</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-09T11:03:54+08:00">
                2018-03-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="服务器"><a href="#服务器" class="headerlink" title="服务器"></a>服务器</h1><blockquote>
<p>前言：通俗的讲，能够提供某种服务的机器（计算机）称为服务器</p>
</blockquote>
<h2 id="服务器软件"><a href="#服务器软件" class="headerlink" title="服务器软件"></a>服务器软件</h2><blockquote>
<p>使计算机具备提供某种服务能力的应用软件，称为服务器软件，<br>通过安装相应的服务软件，然后进行配置后就可以使计算具备了提供某种服务的能力。</p>
</blockquote>
<p>常见的服务器软件有：</p>
<ol>
<li>文件服务器：Server-U、FileZilla、VsFTP等（FTP是File Transfer Protocol文件传输协议）；</li>
<li>数据库服务器：oracle、mysql、SQL server、DB2、ACCESS等；</li>
<li>邮件服务器：Postfix、Sendmail等；</li>
<li><strong>HTTP服务器</strong>：Apache、Nginx、IIS、Tomcat、NodeJS等；</li>
</ol>
<h2 id="服务器类型"><a href="#服务器类型" class="headerlink" title="服务器类型"></a>服务器类型</h2><ol>
<li>按<strong>服务类型</strong>可分为：文件服务器、数据库服务器、邮件服务器、Web服务器等；</li>
<li>按<strong>操作系统</strong>可分为：Linux服务器、Windows服务器等；</li>
<li>按<strong>应用软件</strong>可分为 Apache服务器、Nginx 服务器、IIS服务器、Tomcat服务器、weblogic服务器、WebSphere服务器、boss服务器、 Node服务器等；</li>
</ol>
<h2 id="HTTP服务器"><a href="#HTTP服务器" class="headerlink" title="HTTP服务器"></a>HTTP服务器</h2><p>即网站服务器，主要提供文档(文本、图片、视频、音频)浏览服务，一般安装Apache、Nginx服务器软件。</p>
<p>HTTP服务器可以结合某一编程语言处理业务逻辑，由此进行的开发，通常称之为<strong>服务端开发</strong>。 </p>
<p>常见的运行在服务端的编程语言包括 php、java、.net、Python、Ruby、Perl等。  </p>
<h2 id="服务器总结"><a href="#服务器总结" class="headerlink" title="服务器总结"></a>服务器总结</h2><ol>
<li>服务器说白了就是计算机，通过安装了某些软件，就可以提供某些特定的服务器。</li>
<li>根据服务器软件的功能，名称，安装的系统这些不同的标准，可以对服务器划分成不同的类型。</li>
<li>HTTP服务器主要提供网站浏览服务，通常需要结合某种编程语言进行开发，我们通常称之为服务器开发。</li>
<li>专业的服务器与计算机的区别<ol>
<li>稳定性：服务器要求7*24不间断运行。</li>
<li>性能：服务器能够同时响应更多客户端的请求。</li>
<li>价格：服务器价格通常比普通计算机贵很多。</li>
</ol>
</li>
</ol>
<p><strong>台式服务器</strong></p>
<p><img src="/2018/03/09/http服务与ajax编程/images/01.jpg" alt=""></p>
<p><strong>机架服务器</strong></p>
<p><img src="/2018/03/09/http服务与ajax编程/images/02.jpg" alt=""></p>
<p><strong>机房</strong></p>
<p><img src="/2018/03/09/http服务与ajax编程/images/03.jpg" alt=""></p>
<p><strong>服务器的结构</strong><br><img src="/2018/03/09/http服务与ajax编程/images/server1.png" alt=""></p>
<h1 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h1><blockquote>
<p>具有向服务器<strong>索取服务</strong>能力的终端，叫做客户端。</p>
</blockquote>
<ul>
<li>客户端：电脑、平板、手机安装了客户端软件，就可以称为客户端</li>
<li>客户端：安装客户端软件，<strong>索取服务</strong>的一方</li>
<li>服务器：安装服务器软件，<strong>提供服务</strong>的一方</li>
</ul>
<h2 id="客户端软件"><a href="#客户端软件" class="headerlink" title="客户端软件"></a>客户端软件</h2><p>浏览器===&gt;索取<strong>网站服务浏览</strong>的软件</p>
<p>迅雷===&gt;索取文件下载服务的软件</p>
<p>铁路12306====&gt;索取火车票订购服务</p>
<p>今日头条====&gt;索取新闻头条服务</p>
<p>对于前端工程师而言，主要接触到的客户端软件就是<strong>浏览器</strong>，当然也可能会涉及大一些app开发。</p>
<p>以浏览器为宿主环境，结合 HTML、CSS、Javascript等技术，而进行的一系列开发，通常称之为<strong>前端开发</strong>。</p>
<h2 id="服务器与客户端的关系"><a href="#服务器与客户端的关系" class="headerlink" title="服务器与客户端的关系"></a>服务器与客户端的关系</h2><p><img src="/2018/03/09/http服务与ajax编程/images/04.png" alt=""></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//1. QQ聊天中服务器与客户端的交互过程</span></div><div class="line"><span class="comment">//2. QQ能够与微信进行聊天吗？为什么？</span></div></pre></td></tr></table></figure>
<p>后端开发和前端开发</p>
<p>前端开发主要说的是利用html、css、js等技术完成页面的搭建，数据的传递</p>
<p>前台开发和后台开发主要看到是网页性质，我们现在目前写的页面基本都是前台页面，如果是后台管理系统类似的页面开发叫做后台开发，但是后台管理系统也有界面，也需要通过html、css、js等技术来实现</p>
<p>后端开发主要说的是在服务器上进行开发，也就是说后端写的代码是在服务器上运行的，而我们目前学到html、css、js等都是运行在客户端的</p>
<p>常见的服务端语言有 PHP  ASP （.net） JSP（java） Ruby  nodeJs</p>
<h1 id="软件架构"><a href="#软件架构" class="headerlink" title="软件架构"></a>软件架构</h1><blockquote>
<p>软件架构可以分为BS架构与CS架构</p>
</blockquote>
<h2 id="CS架构"><a href="#CS架构" class="headerlink" title="CS架构"></a>CS架构</h2><p>Client/Server架构，即客户端/服务器架构。是大家所熟悉的软件体系结构。需要安装对应的客户端软件，才能获取响应的服务。</p>
<p>常见的CS架构：</p>
<p>​    QQ、LOL、微信等</p>
<p>特点：</p>
<ul>
<li>需要安装才是使用</li>
<li>性能高效，使用更加稳定和流畅</li>
<li>开发和维护难度更大。</li>
<li>需要更新</li>
<li>需要兼容操作系统。</li>
</ul>
<h2 id="BS架构"><a href="#BS架构" class="headerlink" title="BS架构"></a>BS架构</h2><p>Broswer/Server架构，即浏览器/服务器架构。随着Internet的兴起，对CS结构的一种变化的结构。用户只需要安装浏览器即可。</p>
<ul>
<li>不需要安装，只需要浏览器即可。</li>
<li>相比BS架构，性能相对较差，没有那么流畅和稳定。</li>
<li>开发维护方便。</li>
<li>不需要更新</li>
<li>不用兼容操作系统。但是需要兼容浏览器。</li>
</ul>
<h1 id="网络基础"><a href="#网络基础" class="headerlink" title="网络基础"></a>网络基础</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//思考：我写的代码，放到服务器后，同学们是如何访问到我的页面的？</span></div></pre></td></tr></table></figure>
<h2 id="ip地址"><a href="#ip地址" class="headerlink" title="ip地址"></a>ip地址</h2><p>所谓IP地址就是给每个连接在互联网上的主机分配的一个32位地址。(就像每部手机能正常通话需要一个号码一样)</p>
<p>通过ip就可以找到具体的某一台计算机。</p>
<p>例 <code>192.168.1.110</code></p>
<p>查看本机IP地址 <code>ping</code>、<code>ipconfig</code>、<code>ifconfig</code>（linux）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ping <span class="number">192.168</span><span class="number">.1</span><span class="number">.110</span>  <span class="comment">//查看和某个同学的电脑是否连通</span></div></pre></td></tr></table></figure>
<p>两种特殊的IP地址：</p>
<p><code>127.0.0.1</code> 作为本地测试的IP地址。本机测试时，客户端与服务器都安装在本地计算机上，数据无需任何网络传输。<br><code>192.168</code> 开头为局域网的地址。</p>
<h2 id="域名"><a href="#域名" class="headerlink" title="域名"></a>域名</h2><p>由于IP地址基于数字，不方便记忆，于是便用域名来代替IP地址，域名是一个IP地址的“面具”</p>
<p>查看域名对应的IP地址 <code>ping</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ping jd.com  <span class="comment">//可以获取到京东的ip</span></div></pre></td></tr></table></figure>
<p>特殊的域名:<br><code>localhost</code>，意思为本地主机。这是一个保留域名，主要用于本地测试，对应IP地址为127.0.0.1。</p>
<h2 id="DNS服务器"><a href="#DNS服务器" class="headerlink" title="DNS服务器"></a>DNS服务器</h2><p>DNS（Domain Name System）因特网上作为域名和IP地址相互映射的一个分布式数据库， 能够使用户更方便的访问互联网，而不用去记住能够被机器直接读取的IP数串。</p>
<p>简单的说就是记录IP地址和域名之间对应关系的服务。</p>
<p>查找优先级 本机hosts文件、DNS服务器</p>
<p>ipconfig /flushdns 刷新DNS</p>
<p><img src="/2018/03/09/http服务与ajax编程/images/05.png" alt=""></p>
<h2 id="端口"><a href="#端口" class="headerlink" title="端口"></a>端口</h2><p>端口号是计算机与外界通讯交流的出口，每个端口对应不同的服务。<br>现实生活中，银行不同的窗口办理不同的业务。<br>查看端口占用情况 <code>netstat -an</code><br>常见端口号 80、8080、3306、21、22</p>
<h2 id="本地hosts"><a href="#本地hosts" class="headerlink" title="本地hosts"></a>本地hosts</h2><blockquote>
<p>Hosts是一个没有扩展名的系统文件，可以用记事本等工具打开，其作用就是将一些常用的网址域名与其对应的IP地址建立一个关联“数据库”，当用户在浏览器中输入一个需要登录的网址时，系统会<strong>首先自动从Hosts文件中寻找对应的IP地址</strong>，一旦找到，系统会立即打开对应网页，如果没有找到，则系统会再将网址提交DNS域名解析服务器进行IP地址的解析。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//hosts文件的地址：C:\Windows\System32\drivers\etc</span></div><div class="line"><span class="comment">//在浏览器中输入www.taobao.com的执行过程。</span></div></pre></td></tr></table></figure>
<p><img src="/2018/03/09/http服务与ajax编程/images/06.png" alt=""></p>
<h1 id="搭建HTTP服务器"><a href="#搭建HTTP服务器" class="headerlink" title="搭建HTTP服务器"></a>搭建HTTP服务器</h1><h2 id="phpStudy介绍"><a href="#phpStudy介绍" class="headerlink" title="phpStudy介绍"></a>phpStudy介绍</h2><blockquote>
<p>phpStudy是一个PHP调试环境的程序集成包。<br>该程序包集成最新的Apache+PHP+MySQL+phpMyAdmin,安装非常的简单<br>退出该软件，并不能完全退出程序，如果在去启动其他类似wrap的集成软件，会启动不成功。</p>
</blockquote>
<p><img src="/2018/03/09/http服务与ajax编程/./images/phpstudy.png" alt=""></p>
<h2 id="phpStudy的安装"><a href="#phpStudy的安装" class="headerlink" title="phpStudy的安装"></a>phpStudy的安装</h2><p>安装phpStudy，解压双击安装(<strong>非中文路径</strong>)，其它默认安装。</p>
<p><strong>推荐就安装在默认的目录下，一定不能有中文，否则肯定启动不起来。</strong></p>
<p><img src="/2018/03/09/http服务与ajax编程/images/install.png" alt=""></p>
<h2 id="phpStudy的错误解决"><a href="#phpStudy的错误解决" class="headerlink" title="phpStudy的错误解决"></a>phpStudy的错误解决</h2><p>如果phpStudy启动发生错误，参数下列几点。</p>
<h3 id="关闭iis服务器"><a href="#关闭iis服务器" class="headerlink" title="关闭iis服务器"></a>关闭iis服务器</h3><p>如果发现服务器启动不成功，很大原因是端口被占用了，因为windows默认会有一个iis服务器，只需要把iis服务器给禁用了即可。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//控制面板--&gt;程序--&gt;程序与功能--&gt;启用或关闭windows功能</span></div></pre></td></tr></table></figure>
<p><img src="/2018/03/09/http服务与ajax编程/images/iis.png" alt=""></p>
<h3 id="提示缺少vc9-库文件"><a href="#提示缺少vc9-库文件" class="headerlink" title="提示缺少vc9 库文件"></a>提示缺少vc9 库文件</h3><p>在提供的ajax资料库中找到<strong>phpStudy运行库</strong>， 根据自己电脑操作系统的位数安装对应的vc9运行库即可。</p>
<p><img src="/2018/03/09/http服务与ajax编程/images/vc9.png" alt=""></p>
<h3 id="关闭防火墙"><a href="#关闭防火墙" class="headerlink" title="关闭防火墙"></a>关闭防火墙</h3><p>如果希望自己的服务器能够被别人访问。需要关闭防火墙。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//控制面板---&gt;系统和安全---&gt;Windows 防火墙---&gt;启动或者关闭windows防火墙</span></div></pre></td></tr></table></figure>
<p><img src="/2018/03/09/http服务与ajax编程/images/fhq.png" alt=""></p>
<p>为了减少出错安装路径不得有汉字，如有防火墙开启，会提示是否信任httpd、mysqld运行，请选择全部允许。 </p>
<h2 id="phpStudy的配置"><a href="#phpStudy的配置" class="headerlink" title="phpStudy的配置"></a>phpStudy的配置</h2><h3 id="修改网站目录与默认首页"><a href="#修改网站目录与默认首页" class="headerlink" title="修改网站目录与默认首页"></a>修改网站目录与默认首页</h3><p><img src="/2018/03/09/http服务与ajax编程/images/index.png" alt=""></p>
<ul>
<li>默认首页一般不用修改，业界规范就是index.html作为默认的首页。</li>
<li>修改网站目录时，网站目录一定不能中文，不然apache启动会失败。</li>
</ul>
<h3 id="虚拟主机配置"><a href="#虚拟主机配置" class="headerlink" title="虚拟主机配置"></a>虚拟主机配置</h3><p>在一台web服务器上，我们可以通过配置虚拟主机，然后分别设定根目录，实现对多个网站的管理。</p>
<p>具体步骤如下：</p>
<p><strong>1.找到httpd.conf文件</strong><br>在‘其他选项菜单’ –&gt;  ‘打开配置文件’  –&gt; 选择’httpd-conf’<br>找到470行，去掉<code>#</code>号注释</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># Virtual hosts</div><div class="line">Include conf/extra/httpd-vhosts.conf</div></pre></td></tr></table></figure>
<p><strong>2.找到<code>httpd-vhosts.conf</code>文件</strong></p>
<p>在phpStudy安装目录下找到:\phpStudy\Apache\conf\extra下找到httpd-vhosts.conf文件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"># 默认的虚拟主机</div><div class="line">&lt;VirtualHost _default_:<span class="number">80</span>&gt;</div><div class="line">  DocumentRoot <span class="string">"E:\cursor\13-SH11"</span></div><div class="line">  &lt;Directory <span class="string">"E:\cursor\13-SH11"</span>&gt;</div><div class="line">    Options +Indexes +FollowSymLinks +ExecCGI</div><div class="line">    AllowOverride All</div><div class="line">    Order allow,deny</div><div class="line">    Allow <span class="keyword">from</span> all</div><div class="line">    Require all granted</div><div class="line">  &lt;<span class="regexp">/Directory&gt;</span></div><div class="line"><span class="regexp">&lt;/</span>VirtualHost&gt;</div><div class="line"></div><div class="line"># Add any other Virtual Hosts below</div><div class="line">&lt;VirtualHost *:<span class="number">80</span>&gt;</div><div class="line">    ServerAdmin webmaster@dummy-host.example.com</div><div class="line">    #根目录</div><div class="line">    DocumentRoot <span class="string">"D:\www\jdm"</span></div><div class="line">    #域名</div><div class="line">    ServerName jdm.com</div><div class="line">    #完整域名</div><div class="line">    ServerAlias www.jdm.com</div><div class="line">    ErrorLog <span class="string">"logs/dummy-host.example.com-error.log"</span></div><div class="line">    CustomLog <span class="string">"logs/dummy-host.example.com-access.log"</span> common</div><div class="line">&lt;<span class="regexp">/VirtualHost&gt;</span></div><div class="line"><span class="regexp"></span></div><div class="line"><span class="regexp">&lt;VirtualHost *:80&gt;</span></div><div class="line"><span class="regexp">    ServerAdmin webmaster@dummy-host.example.com</span></div><div class="line"><span class="regexp">    DocumentRoot "D:\www\wjs"</span></div><div class="line"><span class="regexp">    ServerName wjs.com</span></div><div class="line"><span class="regexp">    ServerAlias www.wjs.com</span></div><div class="line"><span class="regexp">    ErrorLog "logs/</span>dummy-host.example.com-error.log<span class="string">"</span></div><div class="line"><span class="string">    CustomLog "</span>logs/dummy-host.example.com-access.log<span class="string">" common</span></div><div class="line"><span class="string">&lt;/VirtualHost&gt;</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">&lt;VirtualHost *:80&gt;</span></div><div class="line"><span class="string">    ServerAdmin webmaster@dummy-host.example.com</span></div><div class="line"><span class="string">    DocumentRoot "</span>D:\www\suning<span class="string">"</span></div><div class="line"><span class="string">    ServerName suning.com</span></div><div class="line"><span class="string">    ServerAlias www.suning.com</span></div><div class="line"><span class="string">    ErrorLog "</span>logs/dummy-host.example.com-error.log<span class="string">"</span></div><div class="line"><span class="string">    CustomLog "</span>logs/dummy-host.example.com-access.log<span class="string">" common</span></div><div class="line"><span class="string">&lt;/VirtualHost&gt;</span></div></pre></td></tr></table></figure>
<h1 id="PHP基础"><a href="#PHP基础" class="headerlink" title="PHP基础"></a>PHP基础</h1><p>PHP简介</p>
<ul>
<li>开源（open source）软件，跨平台，常用操作系统稳定执行。Windows / Linux。做WEB开发的经典组合 WAMP,LAMP基本都是开源软件。</li>
<li>入门简单,用户只需要关注应用，开发成本低。</li>
<li>支持的大多数主流数据库。MySQL，oracle,Redis等</li>
</ul>
<blockquote>
<p>文件以.php后缀结尾，所有程序包含在<code>&lt;?php 这里是代码 ?&gt;</code><br><strong>避免使用中文目录和中文文件名</strong>(否则会读取文件失败)<br><strong>php页面无法直接打开, 需要运行在服务器环境当中</strong></p>
</blockquote>
<p><strong><em>注意：学习php的目的是辅助学习ajax，因为我们需要了解一点后台的知识，千万不要本末倒置的跑去学习php语法。</em></strong> </p>
<h2 id="php初体验"><a href="#php初体验" class="headerlink" title="php初体验"></a>php初体验</h2><blockquote>
<p>webstorm对于php的支持并不友好，没有高亮显示，但是也支持代码提示，功能比较微弱，如果需要专业的提示和高亮，建议使用phpstorm或者是vscode。</p>
</blockquote>
<p><a href="http://www.jetbrains.com/phpstorm/" target="_blank" rel="external">phpstrorm下载地址</a><br><a href="https://code.visualstudio.com/" target="_blank" rel="external">vsCode下载地址</a></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line">  	<span class="comment">//echo 相当于document.write</span></div><div class="line">    <span class="keyword">echo</span> <span class="string">"hello world"</span>;</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<p>输入中文乱码问题：如果使用echo输出中文，会乱码。</p>
<p><strong><em>在php的语法中，每行末尾必须加分号，不然就报错了（最后一行可以不加分号）</em></strong></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line">    <span class="comment">//content-Type:text/html;返回内容是一个HTML文档，这样设置后，就能识别HTML标签了。</span></div><div class="line">    <span class="comment">//charset=utf-8 设置编码集</span></div><div class="line">    header(<span class="string">"content-Type:text/html;charset=utf-8"</span>);</div><div class="line">    <span class="keyword">echo</span> <span class="string">"hello world"</span>;</div><div class="line">    <span class="keyword">echo</span> <span class="string">"&lt;br/&gt;"</span>;</div><div class="line">    <span class="keyword">echo</span> <span class="string">"大家好，我是胡聪聪"</span>;</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//思考：浏览器访问html文件与访问php文件时，过程是怎么样的？</span></div></pre></td></tr></table></figure>
<h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><blockquote>
<p>php是一门弱类型语法，变量的类型可以随意改变。<br>变量其实就是存储数据的容器</p>
</blockquote>
<p><strong>变量的命名规则</strong></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//1. 不需要关键字进行声明，变量在第一次赋值的时候被创建。</span></div><div class="line"><span class="comment">//2. 必须以$符号开始</span></div><div class="line"><span class="comment">//3. $后面的命名规则与js的变量命名规则一致。</span></div><div class="line">$name = <span class="string">"胡聪聪"</span>;</div><div class="line"><span class="keyword">echo</span> $name;</div></pre></td></tr></table></figure>
<h3 id="变量操作"><a href="#变量操作" class="headerlink" title="变量操作"></a>变量操作</h3><p><strong>删除变量</strong></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 销毁指定的变量</span></div><div class="line"><span class="keyword">unset</span>($var);</div></pre></td></tr></table></figure>
<p><strong>判断变量是否设置值</strong></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 检测变量是否设置，并且不是 NULL。</span></div><div class="line"><span class="comment">// ​	变量未设置或者设置为null,返回false（认为变量没有设置）。其余情况全部为true。一般用来判断变量是否设置，因为变量未设置，无法直接使用。(变量先赋值，在使用！） </span></div><div class="line"><span class="keyword">isset</span>($var)  <span class="comment">// 返回布尔类型</span></div></pre></td></tr></table></figure>
<p><strong>判断变量是否为空</strong></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ​	判断变量是否为空。PHP中认为变量的值为：""、0、"0"、NULL、FALSE、[]时，变量虽然赋值了，但是无实际的意义。为空。</span></div><div class="line"><span class="keyword">empty</span>($var) <span class="comment">// 返回布尔类型</span></div></pre></td></tr></table></figure>
<h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><h3 id="简单数据类型"><a href="#简单数据类型" class="headerlink" title="简单数据类型"></a>简单数据类型</h3><p><strong>字符串</strong> </p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$str = <span class="string">"胡聪聪"</span>;</div><div class="line"><span class="keyword">echo</span> $str;</div></pre></td></tr></table></figure>
<p><strong>整数</strong> </p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$num = <span class="number">100</span>;</div><div class="line"><span class="keyword">echo</span> $num;</div></pre></td></tr></table></figure>
<p><strong>浮点型</strong> </p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$float = <span class="number">11.11</span>;</div><div class="line"><span class="keyword">echo</span> $float;</div></pre></td></tr></table></figure>
<p><strong>布尔类型</strong> </p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$flag = <span class="keyword">true</span>;</div><div class="line"><span class="comment">//当布尔类型值为true时，输出1</span></div><div class="line"><span class="keyword">echo</span> $flag;</div><div class="line">$flag = <span class="keyword">false</span>;</div><div class="line"><span class="comment">//当布尔类型为false时，输出空字符串</span></div><div class="line"><span class="keyword">echo</span> $flag;</div></pre></td></tr></table></figure>
<p><strong>php的拼串</strong> </p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//1. 在php中，+号只有算数的功能，并不能拼串</span></div><div class="line"><span class="comment">//2. 在php中，拼串使用.</span></div><div class="line">$name = <span class="string">"胡聪聪"</span>;</div><div class="line"><span class="keyword">echo</span> <span class="string">"大家好，我是"</span> . $name . <span class="string">"，今年18岁"</span>;</div></pre></td></tr></table></figure>
<p><strong>php中的单引号与双引号</strong></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//1. 字符串的定义可以使用单引号，也可以使用双引号</span></div><div class="line">$name = <span class="string">"胡聪聪"</span>;</div><div class="line">$desc = <span class="string">'很帅'</span>;</div><div class="line"><span class="comment">//2. 在单引号中，完全当做字符看待</span></div><div class="line"><span class="comment">//3. 在双引号中，能够识别变量。如果有变量格式的字符串，可以直接解析</span></div><div class="line"></div><div class="line">$name = <span class="string">"胡聪聪"</span>;</div><div class="line"><span class="keyword">echo</span> $name;<span class="comment">//胡聪聪</span></div><div class="line">$desc = <span class="string">'很帅'</span>;</div><div class="line"><span class="keyword">echo</span> $desc;<span class="comment">//很帅</span></div><div class="line"></div><div class="line">$str = <span class="string">'$name 很帅'</span>;</div><div class="line"><span class="keyword">echo</span> $str;<span class="comment">//$name 很帅</span></div><div class="line"></div><div class="line">$str = <span class="string">"$name 很帅"</span>;</div><div class="line"><span class="keyword">echo</span> $str;<span class="comment">//胡聪聪 很帅</span></div></pre></td></tr></table></figure>
<h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><blockquote>
<p>在php中，数组分为两种，索引数组和关联数组</p>
</blockquote>
<p><strong>索引数组（类似与JS中的数组）</strong></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$arr = <span class="keyword">array</span>(<span class="string">"张飞"</span>,<span class="string">"赵云"</span>,<span class="string">"马超"</span>);</div><div class="line"><span class="keyword">echo</span> $arr;<span class="comment">//echo只能打印基本数据类型</span></div><div class="line"><span class="keyword">echo</span> $arr[<span class="number">0</span>];<span class="comment">//张飞</span></div></pre></td></tr></table></figure>
<p><strong>关联数组（类似与JS中的对象）</strong> </p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//属性名必须用引号引起来</span></div><div class="line">$arr = <span class="keyword">array</span>(<span class="string">"name"</span>=&gt;<span class="string">"zhangsan"</span>, <span class="string">"age"</span>=&gt;<span class="number">18</span>);</div><div class="line"><span class="keyword">echo</span> $arr[<span class="string">"name"</span>];</div></pre></td></tr></table></figure>
<p><strong>输出语句</strong> </p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//1. echo 输出简单数据类型</span></div><div class="line"><span class="comment">//2. print_r 输出数据结构，一般用于输出复杂类型。</span></div><div class="line">print_r($arr);<span class="comment">//print_r是一个函数，不要忘记小括号</span></div><div class="line"><span class="comment">//3. var_dump 输出完整的数据结构，包括类型，一般用于精准调试</span></div><div class="line">var_dump($arr);</div></pre></td></tr></table></figure>
<h3 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h3><blockquote>
<p>在php以及其他高级语言中，都有类的概念，表示一类对象，跟js中构造函数类似。</p>
</blockquote>
<p><strong>对象我们学习过程中用不到，了解即可。无需深究</strong></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//定义一个类（类似js的构造函数）</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</div><div class="line">  <span class="comment">// public 公有属性</span></div><div class="line">  <span class="comment">// private 私有属性</span></div><div class="line">  <span class="comment">// 注意这里对象的属性必须是以$开头</span></div><div class="line">  <span class="keyword">public</span> $name = <span class="string">"小明"</span>;</div><div class="line">  <span class="keyword">public</span> $age = <span class="number">12</span>;</div><div class="line">  <span class="keyword">private</span> $sex = <span class="string">"男"</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">$zs = <span class="keyword">new</span> Person;</div><div class="line">print_r($zs);<span class="comment">//打印对象的结构信息</span></div><div class="line"></div><div class="line"><span class="comment">//对象中取值用 -&gt;</span></div><div class="line"><span class="comment">// 注意这里取值的时候属性不要带$</span></div><div class="line"><span class="keyword">echo</span> $zs-&gt;name;</div><div class="line"><span class="keyword">echo</span> $zs-&gt;age;</div><div class="line"><span class="keyword">echo</span> $zs-&gt;sex;<span class="comment">//私有属性，无法获取</span></div></pre></td></tr></table></figure>
<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line">    header(<span class="string">"content-Type:text/html;charset=utf-8"</span>);</div><div class="line">    <span class="comment">//php中函数的语法与js中函数的语法基本一样，不同点在于</span></div><div class="line">    <span class="comment">//1. 函数名大小写不敏感</span></div><div class="line">    <span class="comment">//2. 函数的参数可以设置默认值</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">sayHello</span> <span class="params">($name=<span class="string">"周杰伦"</span>)</span> </span>&#123;</div><div class="line">        <span class="keyword">echo</span> <span class="string">"大家好，我是$name"</span>;</div><div class="line">        <span class="keyword">echo</span> <span class="string">"&lt;br&gt;"</span>;</div><div class="line">    &#125;</div><div class="line">    sayHello();<span class="comment">//不传参数，会使用默认值</span></div><div class="line">    sayHello(<span class="string">"胡聪聪"</span>);<span class="comment">//传参数，默认值不生效，和less差不多。</span></div><div class="line">	sayhello();<span class="comment">//函数名大小写不敏感</span></div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<h2 id="语句"><a href="#语句" class="headerlink" title="语句"></a>语句</h2><h3 id="判断语句"><a href="#判断语句" class="headerlink" title="判断语句"></a>判断语句</h3><p>基本上来说，所有语言的if..else语法都是一样</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$age = <span class="number">17</span>;</div><div class="line"><span class="keyword">if</span> ($age &gt;= <span class="number">18</span>) &#123;</div><div class="line">  <span class="keyword">echo</span> <span class="string">"终于可以看电影了,嘿嘿嘿"</span>;</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">  <span class="keyword">echo</span> <span class="string">"哎，还是回家学习把"</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="循环语句"><a href="#循环语句" class="headerlink" title="循环语句"></a>循环语句</h3><p><strong>遍历索引数组</strong> </p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">$arr = <span class="keyword">array</span>(<span class="string">"张三"</span>, <span class="string">"李四"</span>, <span class="string">"王五"</span>, <span class="string">"赵六"</span>, <span class="string">"田七"</span>, <span class="string">"王八"</span>);</div><div class="line"><span class="comment">//获取数组的长度： count($arr)</span></div><div class="line"><span class="keyword">for</span>($i = <span class="number">0</span>; $i &lt; count($arr); $i++) &#123;</div><div class="line">  <span class="keyword">echo</span> $arr[$i];</div><div class="line">  <span class="keyword">echo</span> <span class="string">"&lt;br&gt;"</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 或者是foreach方法</span></div><div class="line"><span class="keyword">foreach</span>($arr <span class="keyword">as</span> $key =&gt; $value)&#123;</div><div class="line">  <span class="keyword">echo</span> $key.<span class="string">'---'</span>.$value.<span class="string">'&lt;br/&gt;'</span>;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p><strong>遍历关联数组</strong> </p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//遍历关联数组</span></div><div class="line">$arr = <span class="keyword">array</span>(</div><div class="line">  <span class="string">"name"</span>=&gt;<span class="string">"zs"</span>,</div><div class="line">  <span class="string">"age"</span>=&gt;<span class="number">18</span>,</div><div class="line">  <span class="string">"sex"</span>=&gt;<span class="number">20</span></div><div class="line">);</div><div class="line"><span class="keyword">foreach</span>($arr <span class="keyword">as</span> $key =&gt; $value) &#123;</div><div class="line">  <span class="keyword">echo</span> $key . <span class="string">"="</span> . $value . <span class="string">"&lt;br&gt;"</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h2><p> <strong>常量的定义</strong></p>
<p>​    脚本执行周期内，值不会发生改变的量。常量不可以修改及删除。定义为常量可以节省存储空间。英文为：<code>constant</code></p>
<p><strong>语法</strong></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">define(常量名，常量值);</div></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">define(<span class="string">'VERSION'</span>,<span class="string">'1.2.0'</span>); <span class="comment">//常量默认全部字母大写</span></div><div class="line">define(<span class="string">'PI'</span>,<span class="number">3.1415926</span>);</div><div class="line"><span class="keyword">echo</span> <span class="string">'PI:'</span>,PI;             <span class="comment">//使用时直接使用常量名</span></div></pre></td></tr></table></figure>
<ul>
<li><p>常量默认区分大小写。</p>
</li>
<li><p>按照开发惯例，常量名推荐全部字母大写。</p>
</li>
<li><p>常量不可以重复定义及修改数据。</p>
</li>
<li><p>常量值为标量数据类型（整型、浮点型、布尔类型、字符串）。</p>
</li>
</ul>
<h2 id="PHP内置函数"><a href="#PHP内置函数" class="headerlink" title="PHP内置函数"></a>PHP内置函数</h2><h3 id="数学函数"><a href="#数学函数" class="headerlink" title="数学函数"></a>数学函数</h3><ul>
<li>max(),min()   分别返回一组数的最大值及最小值；</li>
<li>abs() 返回绝对值。</li>
<li>floor() 向下取整。</li>
<li>ceil()  向上取整。</li>
<li>round() 四舍五入。</li>
<li>rand(min,max)  返回随机整数，可以取到两端的值。（参数可选。规定随机数产生的范围。）如果没有提供可选参数 min 和 max，rand() 返回 0 到 RAND_MAX 之间的伪随机整数。例如，想要 5 到 15（包括 5 和 15）之间的随机数，用 rand(5, 15)。</li>
</ul>
<h3 id="日期函数"><a href="#日期函数" class="headerlink" title="日期函数"></a>日期函数</h3><ul>
<li>time()  返回当前的 时间戳(1970到现在的时间的秒数)</li>
<li>date(format,time) 格式化一个本地时间或日期<br>格式：Y(年) m(月)  d(日)   H(时)  i(分)  s秒<br>date() 函数会返回服务器的当前日期/时间！<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 如果从代码返回的不是正确的时间，有可能是因为您的服务器位于其他国家或者被设置为不同时区。</span></div><div class="line"><span class="comment">// 因此，如果您需要基于具体位置的准确时间，您可以设置要用的时区。</span></div><div class="line"><span class="comment">// 下面的例子把时区设置为 "Asia/Shanghai"，然后以指定格式输出当前时间：</span></div><div class="line">  date_default_timezone_set(<span class="string">"Asia/Shanghai"</span>);</div><div class="line"></div><div class="line">	$time=time();<span class="comment">//获取时间戳</span></div><div class="line">	<span class="keyword">echo</span> date(<span class="string">'Y-m-d H:i:s'</span>,$time); <span class="comment">//格式化时间戳</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="字符串函数"><a href="#字符串函数" class="headerlink" title="字符串函数"></a>字符串函数</h3><ul>
<li>str_replace(查找的值，替换的值，执行替换操作的字符)       字符串替换</li>
<li>trim(字符串);     去除字符串首尾处的空白字符</li>
<li>explode(分割符，执行分割的字符串);        使用一个字符串分割另一个字符串</li>
<li>implode(连接符，执行连接的数组);           将一个一维数组的值拼接为字符串</li>
<li>substr( 字符串，起始索引，截取长度  );    返回字符串的子串<ul>
<li>截取中文字符会出现中文乱码的情况( substr()对全英文字符串的截取是比较适合的 )</li>
<li>一个中文字符占两个字节，所以一个中文字符的长度是2，对于一个UTF-8的中文字符，会把它当做长度为3来处理。但字符串只要出现中文字符，就有可能导致PHP substr中文乱码，因为中文UTF-8编码，每个汉字占3字节，而GB2312占2字节，英文占1字节，截取位数不准确，substr()硬生生地将一个中文字符“锯”成两半，造成断开的字符会把其后的..拉过来一起做一个字，所以出现了PHP substr中文乱码。</li>
<li>可以用mb_substr来代替substr，mb_substr并不是PHP的核心函数，使用前需要打开php.ini中的extension=php_mbstring.dll这一项</li>
</ul>
</li>
<li>strchr(字符串，标识字符);          从左向右查找指定的字符，并返回该字符后全部字符</li>
<li>strrchr(字符串，标识字符);         从右向左查找指定的字符，并返回该字符后全部字符串（同strchr一样，都是返回标识字符后面的全部字符串，只是两者查找的方向不同）</li>
</ul>
<h3 id="PHP中数组常用函数"><a href="#PHP中数组常用函数" class="headerlink" title="PHP中数组常用函数"></a>PHP中数组常用函数</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//获取数组的长度</span></div><div class="line">echo count($arr);</div><div class="line"></div><div class="line"><span class="comment">//判断数组是否包含某个key</span></div><div class="line">echo array_key_exists(<span class="string">"name"</span>, $arr);</div><div class="line"></div><div class="line"><span class="comment">//判断数组是否包含某个值</span></div><div class="line">echo in_array(<span class="string">"zs"</span>, $arr);</div><div class="line"></div><div class="line"><span class="comment">// 根据索引删除数据</span></div><div class="line">array_splice(数组，起始索引，删几个);<span class="comment">// 类似js的splice方法一样，会改变原数组</span></div></pre></td></tr></table></figure>
<h2 id="表单处理"><a href="#表单处理" class="headerlink" title="表单处理"></a>表单处理</h2><blockquote>
<p>表单（form）：表单用于收集用户输入信息，并将数据提交给服务器。是一种常见的与服务端数据交互的一种方式</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//1. action：指定表单的提交地址</span></div><div class="line"><span class="comment">//2. method:指定表单的提交方式，get/post，默认get</span></div><div class="line"><span class="comment">//3. input的数据想要提交到后台，必须指定name属性，后台通过name属性获取值</span></div><div class="line"><span class="comment">//4. 想要提交表单，不能使用input:button 必须使用input:submit</span></div><div class="line"><span class="comment">//5. 当上传文件是需要设置 enctype="multipart/form-data"，且只能post方式，后台通过$_FILES接收文件上传</span></div></pre></td></tr></table></figure>
<p><strong>php获取表单数据</strong> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">//$_GET是系统提供的一个变量，是一个数组，里面存放了表单通过get方式提交的数据。</div><div class="line">//$_POST是系统提供的一个变量，是一个数组，里面存放了表单通过post方式提交的数据。</div></pre></td></tr></table></figure>
<p><strong>get与post的区别</strong> </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//1. get方式</span></div><div class="line">	<span class="comment">//1.1 数据会拼接在url地址的后面?username=hcc&amp;password=123456</span></div><div class="line">	<span class="comment">//1.2 地址栏有长度限制，因此get方式提交数据大小不会超过4k</span></div><div class="line"><span class="comment">//2. post方式</span></div><div class="line">	<span class="comment">//2.1 数据不会在url中显示，相比get方式，post更安全</span></div><div class="line">	<span class="comment">//2.2 提交的数据没有大小限制</span></div><div class="line"></div><div class="line"><span class="comment">//根据HTTP规范，GET用于信息获取，POST表示可能修改变服务器上的资源的请求</span></div><div class="line"></div><div class="line"><span class="comment">//Get更多的是从服务器上获取数据，post更多的是向服务器传送数据。</span></div><div class="line"></div><div class="line"><span class="comment">//建议：</span></div><div class="line"><span class="number">1</span>、get方式的安全性较Post方式要差些，包含机密信息的话，建议用Post数据提交方式；</div><div class="line"><span class="number">2</span>、在做数据查询时，建议用Get方式；而在做数据添加、修改或删除时，建议用Post方式；</div></pre></td></tr></table></figure>
<h3 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h3><p><strong>html要求</strong> </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="number">1.</span> 文件上传的提交方式必须是post方式</div><div class="line"><span class="number">2.</span> 需要给form指定enctype=<span class="string">"multipart/form-data"</span></div><div class="line"><span class="number">3.</span> 表单元素指定name属性，后台才能获取到</div></pre></td></tr></table></figure>
<p><strong>php相关</strong></p>
<ul>
<li><p>文件上传时，<code>$_GET</code>与<code>$_POST</code>都无法获取到文件信息，通过<code>$_FILES</code>才能获取到，这是一个数组。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">array</span> (size=<span class="number">1</span>)</div><div class="line">  <span class="string">'myfile'</span> =&gt; </div><div class="line">    <span class="keyword">array</span> (size=<span class="number">5</span>)</div><div class="line">      <span class="string">'name'</span> =&gt; string <span class="string">'IMG_20130614_17445.jpg'</span> (length=<span class="number">22</span>)      <span class="comment">//文件名</span></div><div class="line">      <span class="string">'type'</span> =&gt; string <span class="string">'image/jpeg'</span> (length=<span class="number">10</span>)                  <span class="comment">//文件类型</span></div><div class="line">      <span class="string">'tmp_name'</span> =&gt; string <span class="string">'C:\wamp\tmp\php40F4.tmp'</span> (length=<span class="number">23</span>) <span class="comment">//文件保存临时位置</span></div><div class="line">      <span class="string">'error'</span> =&gt; int <span class="number">0</span>      <span class="comment">//错误码 （0表示没有错误）</span></div><div class="line">      <span class="string">'size'</span> =&gt; int <span class="number">103350</span>  <span class="comment">//文件大小(字节)</span></div></pre></td></tr></table></figure>
</li>
<li><p>上传文件时，文件会临时保存在服务器上，如果文件最终没有保存，那么临时文件会被删除，保证服务器安全。</p>
</li>
<li><code>sleep(10)</code>可以让代码延迟10秒钟才执行。</li>
<li><code>move_uploaded_file($path, $newPath);</code>可以保存临时图片(注意$newPath的文件夹路径，必须是存在的，不然的话会保存文件失败)</li>
<li><code>phpstudy</code>的默认上传文件大小为2M，需要修改文件上传大小限制的。找到phpstudy面板–&gt;其他选项菜单–&gt;php扩展及设置–&gt;参数值设置–&gt;upload-max-filesize–&gt;将值改大。<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//服务器保存图片的思路：</span></div><div class="line"><span class="comment">//1-判断 文件不为空 并且 上传文件没有出现错误 的情况下进行保存</span></div><div class="line"><span class="comment">//2-获取临时文件文件路径，获取文件后缀名</span></div><div class="line"><span class="comment">//3-随机生成一个文件名</span></div><div class="line"><span class="comment">//3-进行保存</span></div><div class="line"></div><div class="line"><span class="comment">//error==0  表示文件上传成功</span></div><div class="line"><span class="keyword">if</span>( !<span class="keyword">empty</span>($_FILES[<span class="string">'myfile'</span>]) &amp;&amp; $_FILES[<span class="string">'myfile'</span>][<span class="string">'error'</span>]==<span class="number">0</span> )&#123;</div><div class="line">    <span class="comment">//获取临时文件路径</span></div><div class="line">    $ftmp=$_FILES[<span class="string">'myfile'</span>][<span class="string">'tmp_name'</span>];</div><div class="line">    <span class="comment">//文件名字随机生成，但是后缀名不能改变</span></div><div class="line">    <span class="comment">//1-获取文件原来的后缀名拓展名</span></div><div class="line">    $fname=$_FILES[<span class="string">'myfile'</span>][<span class="string">'name'</span>]; <span class="comment">//aa.png</span></div><div class="line">    <span class="comment">//2-截取后缀名</span></div><div class="line">    $ext=strrchr($fname, <span class="string">'.'</span>);</div><div class="line">    <span class="comment">//3-生成新的文件名</span></div><div class="line">    $newName=time().rand(<span class="number">1000</span>,<span class="number">9999</span>).$ext; </div><div class="line">    <span class="comment">//4-保存文件 </span></div><div class="line">      <span class="comment">//第一个参数：临时文件的路径</span></div><div class="line">      <span class="comment">//第二个参数：保存的文件路径</span></div><div class="line">    move_uploaded_file($ftmp,<span class="string">'./upload/'</span>.$newName);        </div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="表单标签的使用"><a href="#表单标签的使用" class="headerlink" title="表单标签的使用"></a>表单标签的使用</h3><p>常见的输入类型：文本域（<code>type=text</code>）、单选按钮(<code>type=radio</code>)、多选按钮（复选项 <code>type=checkbox</code>）、下拉菜单(<code>select&gt;option</code>)、多行文本(<code>textarea</code>);</p>
<ul>
<li><p>单选按钮的数据接收</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"./01-radio.php"</span> <span class="attr">method</span>=<span class="string">"get"</span>&gt;</span></div><div class="line">    性别：</div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"sex"</span> <span class="attr">value</span>=<span class="string">"m"</span> <span class="attr">checked</span> &gt;</span>男</div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"sex"</span> <span class="attr">value</span>=<span class="string">"f"</span> &gt;</span>女</div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"sex"</span> <span class="attr">value</span>=<span class="string">"w"</span> &gt;</span>弯</div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"登录"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- </span></div><div class="line"><span class="comment">  单选按钮的数据接收注意点：</span></div><div class="line"><span class="comment">    1. action ：指定数据提交的地址</span></div><div class="line"><span class="comment">    2. method:提交方式</span></div><div class="line"><span class="comment">    3. input标记的type =radio，单选按钮。</span></div><div class="line"><span class="comment">    4. 各个选项均需要指定name及value值。</span></div><div class="line"><span class="comment">    5. name值相同，value值不同。</span></div><div class="line"><span class="comment">    6. 可以使用checked设置默认选项 </span></div><div class="line"><span class="comment">--&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>复选框的数据接收</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"./02-checkbox.php"</span> <span class="attr">method</span>=<span class="string">"get"</span>&gt;</span></div><div class="line">    兴趣：</div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"hobby[]"</span> <span class="attr">value</span>=<span class="string">"code"</span> <span class="attr">checked</span> &gt;</span> 敲代码</div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"hobby[]"</span> <span class="attr">value</span>=<span class="string">"eat"</span> &gt;</span> 吃饭</div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"hobby[]"</span>  <span class="attr">value</span>=<span class="string">"dou"</span> &gt;</span> 打豆豆 </div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"登录"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- </span></div><div class="line"><span class="comment">  复选框的数据接收的注意点：</span></div><div class="line"><span class="comment">    1. action ：指定数据提交的地址</span></div><div class="line"><span class="comment">    2. method: 提交方式</span></div><div class="line"><span class="comment">    3. name:  必不可少</span></div><div class="line"><span class="comment">    4. input的type  =checkbox,可以同时选择多个选项。</span></div><div class="line"><span class="comment">    4. name="hobby[]"  复选框的name名后面跟[] 可以提交多个数据 </span></div><div class="line"><span class="comment">    name命名形式必须为：name[]，最终数据才能以数组的格式，将各个选项的值同时提交，否则只能提交最后一个勾选的属性值。不同的选项值，以数组元素的形式提交。</span></div><div class="line"><span class="comment">--&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>下拉列表</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"./03-select.php"</span> <span class="attr">method</span>=<span class="string">"get"</span>&gt;</span></div><div class="line">    城市：</div><div class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">"city"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"1"</span>&gt;</span>上海市<span class="tag">&lt;/<span class="name">option</span>&gt;</span>    </div><div class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"2"</span> <span class="attr">selected</span> &gt;</span>北京市<span class="tag">&lt;/<span class="name">option</span>&gt;</span>    </div><div class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"3"</span>&gt;</span>天津市<span class="tag">&lt;/<span class="name">option</span>&gt;</span>    </div><div class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"4"</span>&gt;</span>西红柿<span class="tag">&lt;/<span class="name">option</span>&gt;</span>    </div><div class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span>  </div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"登录"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line"><span class="comment">&lt;!-- </span></div><div class="line"><span class="comment">  下拉列表接收数据注意点：</span></div><div class="line"><span class="comment">    1. 接收选项比较多的情况：籍贯、类型。</span></div><div class="line"><span class="comment">    2. select &gt; option实现的是单选项，下拉菜单。</span></div><div class="line"><span class="comment">    3. name属性必选。value值为必选。</span></div><div class="line"><span class="comment">    4. selected 默认选中项</span></div><div class="line"><span class="comment"> --&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line">&lt;!-- </div><div class="line">  数据回显时的默认选中 </div><div class="line">    当表单提交到当前页面时，希望可以看到之前用户选中的项</div><div class="line">--&gt;</div><div class="line"></div><div class="line"><span class="meta">&lt;?php</span> </div><div class="line">    <span class="comment">//如果传递了城市数据，则获取</span></div><div class="line">    <span class="keyword">if</span>(<span class="keyword">isset</span>($_GET[<span class="string">'city'</span>]))&#123;</div><div class="line">        <span class="comment">// 注意if里的语句都需要给分号结束，不然又得报错了</span></div><div class="line">        $city=$_GET[<span class="string">'city'</span>];</div><div class="line">        <span class="keyword">echo</span> $city; <span class="comment">//4</span></div><div class="line">    &#125;  </div><div class="line"><span class="meta">?&gt;</span></div><div class="line"></div><div class="line">&lt;!DOCTYPE html&gt;</div><div class="line">&lt;html lang=<span class="string">"en"</span>&gt;</div><div class="line">&lt;head&gt;</div><div class="line">    &lt;meta charset=<span class="string">"UTF-8"</span>&gt;</div><div class="line">    &lt;title&gt;Document&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">    &lt;!-- </div><div class="line">      <span class="comment">// 需求：</span></div><div class="line">      <span class="comment">// action属性如果为空，默认把数据提交到当前页面            </span></div><div class="line">      <span class="comment">// 数据提交到当前页面后，返回的新页面要选中之前选择的那一项</span></div><div class="line">    --&gt;</div><div class="line">    &lt;form action=<span class="string">""</span> method=<span class="string">"get"</span>&gt;</div><div class="line">        城市：</div><div class="line">        &lt;!-- 根据上面获取的城市的值，设置默认选中项 --&gt;</div><div class="line">        &lt;select name=<span class="string">"city"</span>&gt;</div><div class="line">            &lt;!-- 注意php代码里的 <span class="keyword">echo</span> 别落了，否则页面上输出不了 selected  --&gt;</div><div class="line">            &lt;option value=<span class="string">"1"</span>  <span class="meta">&lt;?php</span> <span class="keyword">echo</span> <span class="keyword">isset</span>($city)&amp;&amp;$city==<span class="number">1</span>?<span class="string">"selected"</span>:<span class="string">""</span> <span class="meta">?&gt;</span> &gt;上海市</div><div class="line">      		&lt;/option&gt;    </div><div class="line">            &lt;option value=<span class="string">"2"</span>  <span class="meta">&lt;?php</span> <span class="keyword">echo</span> <span class="keyword">isset</span>($city)&amp;&amp;$city==<span class="number">2</span>?<span class="string">"selected"</span>:<span class="string">""</span> <span class="meta">?&gt;</span> &gt;北京市</div><div class="line">       		&lt;/option&gt;    </div><div class="line">            &lt;option value=<span class="string">"3"</span>  <span class="meta">&lt;?php</span> <span class="keyword">echo</span> <span class="keyword">isset</span>($city)&amp;&amp;$city==<span class="number">3</span>?<span class="string">"selected"</span>:<span class="string">""</span> <span class="meta">?&gt;</span> &gt;天津市</div><div class="line">  			&lt;/option&gt;    </div><div class="line">            &lt;option value=<span class="string">"4"</span>  <span class="meta">&lt;?php</span> <span class="keyword">echo</span> <span class="keyword">isset</span>($city)&amp;&amp;$city==<span class="number">4</span>?<span class="string">"selected"</span>:<span class="string">""</span> <span class="meta">?&gt;</span> &gt;西红柿   		   &lt;/option&gt;    </div><div class="line">       &lt;/select&gt;</div><div class="line">       &lt;input type=<span class="string">"submit"</span> value=<span class="string">"登录"</span>&gt;</div><div class="line">    &lt;/form&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<h2 id="动态页面"><a href="#动态页面" class="headerlink" title="动态页面"></a>动态页面</h2><blockquote>
<p>静态页面：页面的内容和结构都是写死，不会变化的，是是实实在在存在于服务器上的一个html页面。</p>
<p>动态页面：页面的内容会根据数据库中的数据变化，存在与服务器端的是一个php或者jsp页面，用户访问时，会实时的进行改变。<br>总结：动态网站的 动指的是网站数据的动 而不是 视觉上的动;</p>
</blockquote>
<h3 id="使用php动态渲染页面"><a href="#使用php动态渲染页面" class="headerlink" title="使用php动态渲染页面"></a>使用php动态渲染页面</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line">  <span class="comment">//这个属性是可以通过数据库进行获取的</span></div><div class="line">  $person = <span class="keyword">array</span>(</div><div class="line">    <span class="string">"name"</span>=&gt;<span class="string">"胡聪聪"</span>,</div><div class="line">    <span class="string">"gender"</span>=&gt;<span class="string">"男1"</span>,</div><div class="line">    <span class="string">"hobby"</span>=&gt;<span class="string">"女1"</span></div><div class="line">  )</div><div class="line"><span class="meta">?&gt;</span></div><div class="line">&lt;p&gt;姓名：&lt;span&gt;<span class="meta">&lt;?php</span> <span class="keyword">echo</span> $person[<span class="string">'name'</span>];  <span class="meta">?&gt;</span>&lt;/span&gt;&lt;/p&gt;</div><div class="line">&lt;p&gt;性别：&lt;span&gt;<span class="meta">&lt;?php</span> <span class="keyword">echo</span> $person[<span class="string">'gender'</span>]; <span class="meta">?&gt;</span>&lt;/span&gt;&lt;/p&gt;</div><div class="line">&lt;p&gt;爱好：&lt;span&gt;<span class="meta">&lt;?php</span> <span class="keyword">echo</span> $person[<span class="string">'hobby'</span>] <span class="meta">?&gt;</span>&lt;/span&gt;&lt;/p&gt;</div></pre></td></tr></table></figure>
<p>以前很长一段时间的开发模式就是这样的，前端工程师先把html页面写好，后端程序员把html页面后缀改成php页面，然后将数据渲染出来。</p>
<h3 id="include"><a href="#include" class="headerlink" title="include"></a>include</h3><blockquote>
<p>include （或 require）语句会获取指定文件中存在的所有文本/代码/标记，并复制到使用 include 语句的文件中。包含文件很有用，如果您需要在网站的多张页面上引用相同的 PHP、HTML 或文本的话。<br>   include 可以将不同的页面中有相同的代码部分，可以将其分离为单个文件。需要调用时，引入对应的文件即可调用。提高代码的复用率。</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">include</span> | <span class="keyword">include_once</span>   <span class="string">"文件的路径"</span></div></pre></td></tr></table></figure>
<p><strong>include与include_once区别</strong><br>都是语言结构，不是函数。</p>
<ul>
<li>include  可以重复引入文件</li>
<li>include_once 只引入一次，防止多次引入文件</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$arr = <span class="keyword">array</span>(<span class="string">'张三'</span>,<span class="string">'李四'</span>,<span class="string">'王五'</span>,<span class="string">'赵六'</span>);</div><div class="line"><span class="keyword">include</span> <span class="string">'04-render-for.html'</span>;</div></pre></td></tr></table></figure>
<p>【案例：京东分类页】<br>【案例：京东首页】</p>
<h3 id="页面动态渲染"><a href="#页面动态渲染" class="headerlink" title="页面动态渲染"></a>页面动态渲染</h3><ul>
<li>PHP本身支持与HTML混编</li>
<li>混编的文件后缀必须为.php，Apache才会调用PHP解析</li>
<li>PHP与HTML混编时，服务器中的PHP引擎 只会执行php标签内部的PHP代码，非PHP的代码(PHP标签外部的内容)直接忽略，最后会将PHP的执行结果和非PHP代码 一起返回给浏览器,由浏览器进行解析</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span> </div><div class="line">    header(<span class="string">'content-type:text/html;charset=utf-8'</span>);</div><div class="line">    <span class="keyword">echo</span> <span class="number">2</span>+<span class="number">3</span>;</div><div class="line">    <span class="comment">//php的引擎 只会执行php代码块中代码，代码块外面的代码会被忽略</span></div><div class="line">    <span class="comment">//最后 服务器会将php执行的结果 和代码块外面的内容一起返回给 浏览器，</span></div><div class="line">    <span class="comment">//由浏览器进行解析</span></div><div class="line"><span class="meta">?&gt;</span></div><div class="line">&lt;a href=<span class="string">"http://www.baidu.com"</span>&gt;百度一下&lt;/a&gt;</div></pre></td></tr></table></figure>
<h3 id="PHP数据读写到文件-数据持久化"><a href="#PHP数据读写到文件-数据持久化" class="headerlink" title="PHP数据读写到文件(数据持久化)"></a>PHP数据读写到文件(数据持久化)</h3><p>程序运行过程中，数据是存储在内存中，程序结束数据会销毁，如果希望可以永久存储，可以将数据存储在硬盘上（存储在文件中）；  将数据有内存 存储到硬盘的过程，称为数据的持久化；(注意文件名字不能是中文的，否则写入不进去)</p>
<ul>
<li>file_get_contents(path)          把整个文件读入一个字符串中。</li>
<li>file_put_contents(path,$str)     把一个字符串写入文件中。<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 把一个字符串写入一个文件中</span></div><div class="line"><span class="comment">// 一执行这个函数，就会将字符串存到文件中，如果没有该文件，就会创建该文件</span></div><div class="line">file_put_contents(<span class="string">'./18.php'</span>, <span class="string">'这里是我动态写入的字符串，我需要存到页面中去！！！'</span>);</div><div class="line"></div><div class="line"><span class="comment">// 现在这个文件已经有了，会把之前文件里面存的文字清空掉在重新存入最新的字符串</span></div><div class="line">file_put_contents(<span class="string">'./18.php'</span>, <span class="string">'现在这个文件已经有了，，，这里是我动态写入的字符串，我需要存到页面中去！！！'</span>);</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>我们使用php动态渲染页面时，有很多比较麻烦的地方。</p>
<ul>
<li>在前端写好页面以后，需要后台进行修改，意味这后端程序员也需要懂前端的知识，其实渲染的工作应该交给前端来做。</li>
<li>前端没有写好页面的话，后端无法开始工作，需要等待前端的页面完成之后才能开始工作，拖延项目的进度。</li>
<li>这种渲染，属于同步渲染，页面加载速度比较慢，会影响后面的内容能够的渲染速度。</li>
<li>后期维护很麻烦,尤其涉及到前端修改结构和样式</li>
</ul>
<p>【演示：同步渲染】</p>
<h2 id="Mysql数据库技术"><a href="#Mysql数据库技术" class="headerlink" title="Mysql数据库技术"></a>Mysql数据库技术</h2><h3 id="初识数据库概念"><a href="#初识数据库概念" class="headerlink" title="初识数据库概念"></a>初识数据库概念</h3><p><strong>数据库基本概念</strong></p>
<blockquote>
<p>专门用来存储、管理数据的仓库（空间），按照数据结构来组织、存储和管理，可以实现高效存储及读取的数据解决方案。英文：Database,DB。 Database Administrator  DBA </p>
<p>数据是程序核心<br>实际项目中，一般将项目相关的数据全部存储在单个数据库中。<br>数据库有专门的、高效的数据管理系统（DBMS），可以应对数据量较大、关系较为复杂的情况。</p>
</blockquote>
<p><strong>关系型数据库</strong><br>当前使用范围最广的数据库。按照关系模型（数据之间存在联系）组织的数据库。数据存储在硬盘文件中。<br>订单：订单编号，商品名称，价格，数量，配送地址</p>
<table>
<thead>
<tr>
<th><strong>订单编号</strong></th>
<th><strong>商品名称</strong></th>
<th><strong>价格</strong></th>
<th><strong>数量</strong></th>
<th><strong>配送地址</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>100123</td>
<td>华为mate10</td>
<td>4999</td>
<td>2</td>
<td>北京市京顺路99号</td>
</tr>
<tr>
<td>100124</td>
<td>花裙子</td>
<td>499</td>
<td>1</td>
<td>北京市清华大学1号楼</td>
</tr>
</tbody>
</table>
<p>  关系模型是采用二维表格（行、列）及其之间的联系。<br>  相对于其他模型，更贴合现实世界，更便于理解。</p>
<ul>
<li>关系型数据库  数据存储在硬盘上</li>
<li>非关系型 数据库  数据存储在内存中</li>
</ul>
<h4 id="数据库的组织架构："><a href="#数据库的组织架构：" class="headerlink" title="数据库的组织架构："></a><strong>数据库的组织架构：</strong></h4><p> <img src="/2018/03/09/http服务与ajax编程/images/database.png" alt=""></p>
<ul>
<li><strong>数据表（table）</strong></li>
</ul>
<blockquote>
<p>表是以行和列的形式组织起来的数据的集合。项目一般需要不同的数据表，将数据分布存储在不同的数据表中。</p>
<p>数据库的数据存放在数据表中</p>
<p>如：订单表，用户表，商品表，配送地址表，</p>
</blockquote>
<ul>
<li><strong>记录-行（row，record）</strong></li>
</ul>
<blockquote>
<p>一行有意义的信息的集合</p>
</blockquote>
<ul>
<li><strong>字段-列(column，field)</strong></li>
</ul>
<blockquote>
<p>某一列的值的名称</p>
<p>通过行列交叉确定具体数据</p>
</blockquote>
<h4 id="关系型数据库产品—MySQL介绍"><a href="#关系型数据库产品—MySQL介绍" class="headerlink" title="关系型数据库产品—MySQL介绍"></a>关系型数据库产品—MySQL介绍</h4><p>​    瑞典AB公司开发，现为Oracle公司所有。2010年04月22 发布了MySQL 5.5。</p>
<blockquote>
<p>数据库官网地址：<a href="https://dev.mysql.com" target="_blank" rel="external">https://dev.mysql.com</a><br>英文手册地址：<a href="https://dev.mysql.com/doc/refman/5.5/en/" target="_blank" rel="external">https://dev.mysql.com/doc/refman/5.5/en/</a><br>中文参考论坛：<a href="http://www.mysqlpub.com/" target="_blank" rel="external">http://www.mysqlpub.com/</a></p>
</blockquote>
<h4 id="SQL-操作数据库语言（了解）"><a href="#SQL-操作数据库语言（了解）" class="headerlink" title="SQL-操作数据库语言（了解）"></a>SQL-操作数据库语言（了解）</h4><p>​    SQL：structured Query Language 结构化查询语言。<br>​    SQL语句，相当于客户端发送的命令（与数据库服务器进行交互）。</p>
<p><strong>概念</strong></p>
<blockquote>
<p> 关系型数据库所使用通用语言。为一个ISO标准。  w3c<br>.sql  数据库脚本语言的后缀。  </p>
</blockquote>
<p><strong>分类</strong></p>
<blockquote>
<p>主要是执行 数据操作的基本逻辑有：增删改查 操作</p>
</blockquote>
<h3 id="数据库操作方式"><a href="#数据库操作方式" class="headerlink" title="数据库操作方式"></a>数据库操作方式</h3><ul>
<li><p>数据库的相关设置： （打开数据库命令行，修改数据库密码等）</p>
<p><img src="/2018/03/09/http服务与ajax编程/images/mysqlcmd01.png" alt=""></p>
</li>
<li><p>命令行演示（了解）<br><img src="/2018/03/09/http服务与ajax编程/images/cmd.png" alt=""></p>
<ul>
<li>show databases;</li>
<li>use database;</li>
<li>show tables;</li>
<li>crud（结合图形界面演示）</li>
</ul>
</li>
<li><p>图形界面客户端 </p>
<p>乱码： 编码 —&gt;解码 的格式不一致造成    ‘呵呵’  gbk   —&gt;gbk</p>
<ul>
<li>创建连接    <img src="/2018/03/09/http服务与ajax编程/images/connect.png" alt=""></li>
<li>创建数据库</li>
<li>删除数据库</li>
<li>创建表</li>
<li>编辑表</li>
<li>删除表</li>
<li>数据增删改查操作</li>
</ul>
</li>
</ul>
<h3 id="数据库表的操作"><a href="#数据库表的操作" class="headerlink" title="数据库表的操作"></a>数据库表的操作</h3><h4 id="数据库的数据类型"><a href="#数据库的数据类型" class="headerlink" title="数据库的数据类型"></a>数据库的数据类型</h4><p><strong>字段类型初步介绍</strong></p>
<ul>
<li><p>整型</p>
<blockquote>
<p> 存储如年龄，产品数量，编号等。 <code>int</code>（0-21亿）  </p>
</blockquote>
</li>
<li><p>小数类型</p>
<blockquote>
<p> <code>float</code>  ,<code>decimal</code>      eg.重量，工资，奖金，价格等<br> 使用 <code>decimal</code> 类型，实现小数的精确存储,一般用来存储与钱有关的数字。3.333333331</p>
</blockquote>
</li>
<li><p>字符串型</p>
<blockquote>
<p> <code>varchar(M)</code>，<code>char(M)</code>  M为该字段可以存储的最多字符数，如 <code>varchar(10)</code>。M参数不可以省略。<br><code>varchar</code> 一般用来存储长度变化比较大的字符串，如文章标题，商品名称，    </p>
</blockquote>
</li>
</ul>
<p>​    猪  小猪猪   爱哭的小猪猪</p>
<blockquote>
<p> <code>char</code> 存储长度比较固定的字符串，如手机号，身份证号，序列号，邮编。    12312312323<br>此外可以使用 <code>text</code> 类型，存储较长的字符串，无需指定字符串的具体长度。</p>
</blockquote>
<ul>
<li>日期时间型<blockquote>
<p>datetime,date(年月日)，time（时分秒）。年月日时分秒，也可以使用PHP获取时间戳整型数字存储。</p>
</blockquote>
</li>
</ul>
<p><strong>字段约束</strong> 字段数据的属性（特征）</p>
<ul>
<li><p>not null 不为空</p>
<blockquote>
<p> 限制字段值不能为空</p>
</blockquote>
</li>
<li><p>default  默认值</p>
<blockquote>
<p>设置字段的默认值，在没有录入时自动使用默认值填充。</p>
</blockquote>
</li>
<li><p>primary key  主键 ：唯一标识，不能重复，不能为空</p>
<blockquote>
<p>设置字段为主键，主键字段的值不能重复，不能为空。而且一个数据表中只能设置一个字段为主键，作为每行记录的唯一身份信息（索引）。stu_id int primary key </p>
</blockquote>
</li>
<li><p>auto_increment  自动增长</p>
<blockquote>
<p>设置字段为自动增长，默认从1开始自动分配编号。自增长字段必须为一个key（索引，数据结构，便于快速查找数据，相当于书的目录），一般与primary key结合使用。<br>类型必须为整型。</p>
</blockquote>
</li>
<li><p>unique key  不能重复</p>
<blockquote>
<p>唯一键，设置字段的值为唯一的，可以设置多个字段为唯一键。唯一键字段的值可以为空。<br>学号设置为主键，要求唯一的，不能为空的，用来标识学生信息，<br>姓名，不能重名，设置唯一键，该字段的值唯一的 、不重复的、可以为空的</p>
</blockquote>
</li>
</ul>
<h4 id="创建数据表"><a href="#创建数据表" class="headerlink" title="创建数据表"></a>创建数据表</h4><blockquote>
<p>注意 创建表时，每个表必须有一个主键</p>
</blockquote>
<p><img src="/2018/03/09/http服务与ajax编程/images/createtable.png" alt=""></p>
<p>保存表结构：<br><img src="/2018/03/09/http服务与ajax编程/images/savetable.png" alt=""></p>
<p>向新建的表中添加数据：<br><img src="/2018/03/09/http服务与ajax编程/images/addtable.png" alt=""></p>
<h4 id="SQL"><a href="#SQL" class="headerlink" title="SQL"></a>SQL</h4><ul>
<li><p>SQL基本概述</p>
<blockquote>
<p>注释用 –  ，快捷键ctrl+/  取消注释 ctrl+shift+/<br>作用：通过sql语句来操作数据库<br>语句结束加分号(;)<br>增 删 改 查</p>
</blockquote>
</li>
<li><p>插入数据 <code>insert</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">-- insert into 表名 (字段列表1,字段列表2,字段列表3) values (值1,值2,值3)</span></div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> book (<span class="keyword">name</span>,author,<span class="keyword">category</span>,price) <span class="keyword">values</span> (<span class="string">'天龙八部'</span>,<span class="string">'金庸'</span>,<span class="string">'文学'</span>,<span class="number">20</span>);</div></pre></td></tr></table></figure>
</li>
<li><p>删除数据 <code>delete</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">-- delete from 表名 where 条件</span></div><div class="line"><span class="comment">-- where是筛选条件</span></div><div class="line"><span class="comment">-- 数据库中  = 表示判断是否相等 </span></div><div class="line"><span class="keyword">delete</span> <span class="keyword">from</span> book <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">10</span>;</div><div class="line"></div><div class="line"><span class="comment">-- delete from 表名; 删除表中所有的数据</span></div></pre></td></tr></table></figure>
</li>
<li><p>修改数据 <code>update</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">-- update 表名 set 字段名称1=值1,字段名称2=值2,... where 条件</span></div><div class="line"><span class="keyword">update</span> book <span class="keyword">set</span> <span class="keyword">name</span>=<span class="string">'笑傲江湖'</span>,price=<span class="string">'30'</span> <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">10</span>;</div></pre></td></tr></table></figure>
</li>
<li><p>查询数据 <code>select</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">-- select 字段1,字段2 from 表名 where 条件</span></div><div class="line"><span class="comment">-- select * from 表名 where 条件</span></div><div class="line"><span class="keyword">select</span> * <span class="keyword">from</span> book <span class="keyword">where</span> author=<span class="string">'金庸'</span> <span class="keyword">and</span> price&gt;<span class="number">20</span>;</div><div class="line"><span class="keyword">select</span> * <span class="keyword">from</span> book <span class="keyword">where</span> author=<span class="string">'金庸'</span> <span class="keyword">or</span> author=<span class="string">'古龙'</span>;</div><div class="line">  <span class="comment">-- and 表示 &amp;&amp; 并且的意思</span></div><div class="line">  <span class="comment">-- or 表示 || 或者的意思</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="SQL高级"><a href="#SQL高级" class="headerlink" title="SQL高级"></a>SQL高级</h4><ul>
<li><p><code>where</code> 子句<br>查询时，不添加where条件返回数据表所有行。需要添加限定条件，只返回需要的行。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span>  字段列表 <span class="keyword">from</span>  表名  <span class="keyword">where</span>子句;</div></pre></td></tr></table></figure>
</li>
<li><p>like 模糊匹配   % 通配符</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">-- 查找姓张的人</span></div><div class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">table</span> <span class="keyword">where</span> <span class="keyword">name</span> <span class="keyword">like</span> <span class="string">'张%'</span>;</div><div class="line"><span class="comment">-- 查找带三的人</span></div><div class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">table</span> <span class="keyword">where</span> <span class="keyword">name</span> <span class="keyword">like</span> <span class="string">'%三%'</span>;</div></pre></td></tr></table></figure>
</li>
<li><p>in 语法：一次查询多个符合条件的数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> 字段列表 <span class="keyword">from</span> tb <span class="keyword">where</span>  字段 <span class="keyword">in</span>  (value1,value2,value3);</div></pre></td></tr></table></figure>
</li>
<li><p>Count() 获取返回数据的总条数</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">-- 查询满足条件数据的总条数	</span></div><div class="line"><span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">from</span> 表名 <span class="keyword">where</span> 条件</div><div class="line"> <span class="comment">-- as 给查询字段 起一个别名（方便阅读和理解）</span></div><div class="line"> <span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">as</span> <span class="string">'总人数'</span> <span class="keyword">from</span> 表名 <span class="keyword">where</span> 条件</div></pre></td></tr></table></figure>
</li>
<li><p>limit 子句<br>返回查找结果中的前n行</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> 字段列表  <span class="keyword">from</span> 表名 <span class="keyword">limit</span> 截取的起始索引,截取的长度</div><div class="line">   <span class="comment">-- 不包含起始索引下标元素</span></div><div class="line">   <span class="comment">-- 注意起始索引和长度之间有逗号隔开</span></div></pre></td></tr></table></figure>
</li>
<li><p>多表联合查询</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">   <span class="comment">-- select 字段列表 from 表A join 表B on 联合条件  where 筛选条件 </span></div><div class="line"><span class="keyword">select</span> 字段列表 <span class="keyword">from</span> A <span class="keyword">join</span> B <span class="keyword">on</span> A.字段  =  B.字段 [<span class="keyword">where</span>子句];</div><div class="line">   <span class="keyword">select</span> teacher.name, class.roomid <span class="keyword">from</span> teacher <span class="keyword">join</span> <span class="keyword">class</span> <span class="keyword">on</span> teacher.classid = class.id <span class="keyword">where</span> <span class="keyword">name</span> = <span class="string">'刘老师'</span>;</div><div class="line"></div><div class="line">   <span class="comment">-- 排序</span></div><div class="line">   order by 字段; 按照指定字段排序，默认升序  </div><div class="line">   order by 字段 desc;  降序</div></pre></td></tr></table></figure>
</li>
<li><p>注意各个子句之间的顺序。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> 字段列表  <span class="keyword">from</span>  <span class="keyword">table</span>  [<span class="keyword">join</span>] [<span class="keyword">where</span>] [<span class="keyword">limit</span>]</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="COOKIE-和-SESSION"><a href="#COOKIE-和-SESSION" class="headerlink" title="COOKIE 和 SESSION"></a>COOKIE 和 SESSION</h2><h3 id="会话技术"><a href="#会话技术" class="headerlink" title="会话技术"></a>会话技术</h3><p><strong>会话</strong>：浏览器与服务器之间的数据交流。<br><strong>会话的目的</strong>：在同一台浏览器对服务器的多次请求中，通过数据持久化存储技术，以实现连续的业务逻辑</p>
<h4 id="HTTP协议特点："><a href="#HTTP协议特点：" class="headerlink" title="HTTP协议特点："></a>HTTP协议特点：</h4><p><strong>无状态、无记忆的 多次请求之间，无任何的联系</strong></p>
<blockquote>
<p> 即同一用户请求同一网站的不同页面，服务器无法识别是否是同一用户发起的请求。因此，用户无法进行连续的业务逻辑。</p>
</blockquote>
<p>如：登录，在A页面登录，请求B页面，提示登录。</p>
<p>学生进教学楼： 每次开证明，证明是传智学生  or  带着胸牌<br>​    门卫（没有记忆） 进校门，只有传智的学生可以进入：<br>​    <img src="/2018/03/09/http服务与ajax编程/images/stu.png" alt=""></p>
<h4 id="按照数据持久化的位置进行区分"><a href="#按照数据持久化的位置进行区分" class="headerlink" title="按照数据持久化的位置进行区分"></a>按照数据持久化的位置进行区分</h4><ul>
<li><strong>cookie</strong>: 在浏览器端持久化数据的容器</li>
<li><strong>session</strong> 在服务器端持久化数据的容器</li>
</ul>
<h3 id="cookie"><a href="#cookie" class="headerlink" title="cookie"></a>cookie</h3><ul>
<li>在浏览器端持久化数据的容器</li>
<li>可以使用js对cookie进行操作</li>
<li><p>cookie 允许服务器脚本（PHP脚本）在浏览器端存储数据</p>
</li>
<li><p><strong>cookie特点</strong>：在cookie中数据设置后，浏览器再次请求服务器指定页面时，会自动携带cookie中的数据到服务器，在服务器中可以获取cookie中的数据；</p>
</li>
</ul>
<h4 id="浏览器查看cookie数据"><a href="#浏览器查看cookie数据" class="headerlink" title="浏览器查看cookie数据"></a>浏览器查看cookie数据</h4><p><img src="/2018/03/09/http服务与ajax编程/images/cookie.png" alt=""></p>
<h4 id="js操作cookie（了解）"><a href="#js操作cookie（了解）" class="headerlink" title="js操作cookie（了解）"></a>js操作cookie（了解）</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 设置cookie</span></div><div class="line">    <span class="built_in">document</span>.cookie = <span class="string">'name=zs'</span>; </div><div class="line">    <span class="built_in">document</span>.cookie = <span class="string">'pwd=123'</span>;   </div><div class="line"></div><div class="line"><span class="comment">// 获取cookie中的值</span></div><div class="line">    <span class="keyword">var</span> cookies = <span class="built_in">document</span>.cookie;</div><div class="line">    <span class="comment">// cookie 可以包含多个不同的字段，并用分号隔开。</span></div><div class="line">    <span class="keyword">var</span> arr = cookies.split(<span class="string">'; '</span>); <span class="comment">//注意这里是 '; ' 有空格的 </span></div><div class="line">    <span class="keyword">if</span>(arr)&#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</div><div class="line">            <span class="keyword">var</span> data = arr[i].split(<span class="string">'='</span>);</div><div class="line">            <span class="keyword">if</span>(data[<span class="number">0</span>] == <span class="string">'name'</span>)&#123;</div><div class="line">                <span class="keyword">return</span> data[<span class="number">1</span>];</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"><span class="comment">// 到期：</span></div><div class="line"><span class="comment">// expires="Wdy, DD−Mon−YYYY HH:MM:SS GMT" 确定</span></div><div class="line"><span class="comment">// cookie 的删除日期。</span></div><div class="line"></div><div class="line"><span class="comment">// 路径：</span></div><div class="line"><span class="comment">// path=/</span></div><div class="line"><span class="comment">// 确定返回 cookie 时采用的路径。 在本示例中，当转到域中的根路径时，将发送 cookie。</span></div><div class="line"></div><div class="line"><span class="comment">// 域名</span></div><div class="line"><span class="comment">// domain=whatever.domain.com</span></div><div class="line"><span class="comment">// 指定使用 cookie 的域。 如果此域与当前正在浏览的域不匹配，则可视为“第三方 cookie”，将被浏览</span></div><div class="line"><span class="comment">// 器拒绝。 这可以防止一个域针对不同域设置一个 cookie。</span></div></pre></td></tr></table></figure>
<h4 id="jquery-cookie-js插件-操作cookie"><a href="#jquery-cookie-js插件-操作cookie" class="headerlink" title="jquery.cookie.js插件 操作cookie"></a>jquery.cookie.js插件 操作cookie</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//向页面中引入插件js文件，基于jquery的 </span></div><div class="line">$.cookie(<span class="string">'weight'</span>, <span class="number">100</span>, &#123;<span class="attr">expires</span>:<span class="number">7</span>&#125;);<span class="comment">//设置   expires 过期时间</span></div><div class="line">$.cookie(<span class="string">'name'</span>);<span class="comment">//获取</span></div><div class="line">$.cookie(<span class="string">'name'</span>,nll);<span class="comment">//删除	</span></div><div class="line">	$.cookie(键,值,&#123;<span class="attr">expires</span>:过期天数&#125;)</div><div class="line">$.cookie(键) <span class="comment">//获取</span></div></pre></td></tr></table></figure>
<h4 id="PHP操作cookie-服务器端操作cookie"><a href="#PHP操作cookie-服务器端操作cookie" class="headerlink" title="PHP操作cookie(服务器端操作cookie)"></a>PHP操作cookie(服务器端操作cookie)</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//设置cookie</span></div><div class="line">setcookie(<span class="string">'名称'</span>,<span class="string">'值'</span>); </div><div class="line">setcookie(<span class="string">'名称'</span>,<span class="string">'值'</span>，<span class="string">'有效期'</span>);</div><div class="line">setcookie(<span class="string">'名称'</span>,<span class="string">'值'</span>，PHP_INT_MAX); <span class="comment">//永久生效</span></div><div class="line"><span class="comment">//删除cookie  将过期时间设置为之前的时间即可,服务器端的设置cookie的时长单位是秒（s）</span></div><div class="line">setcookie(<span class="string">'名称'</span>,<span class="string">''</span>，time()<span class="number">-1000</span>); </div><div class="line"><span class="comment">//获取cookie  </span></div><div class="line"><span class="comment">//$_COOKIE是PHP的超全局变量，内部存放有浏览器传过来的cookie数据，$_COOKIE只能用于获取数据</span></div><div class="line">$_COOKIE[<span class="string">'名称'</span>];</div></pre></td></tr></table></figure>
<p><strong>注意点：</strong></p>
<ul>
<li>cookie中的数据 可以被同一个网站的页面所共享</li>
<li>不同浏览器的cookie 不能共享</li>
<li>cookie的数据存储在浏览器中，每次请求服务器，在请求报文中携带cookie的数据，发送给服务器</li>
<li>服务器无法直接操作cookie，通过在服务器端设置响应头的的方式，通知浏览器对cookie进行设置，（header函数的原理也是一样的）</li>
<li>cookie中的数据有效期，不设置即浏览器关闭，会话结束，数据销毁</li>
</ul>
<h4 id="有-2-种不同类型的-cookie：会话-cookie-和持久性-cookie"><a href="#有-2-种不同类型的-cookie：会话-cookie-和持久性-cookie" class="headerlink" title="有 2 种不同类型的 cookie：会话 cookie 和持久性 cookie"></a>有 2 种不同类型的 cookie：会话 cookie 和持久性 cookie</h4><p>如果 cookie 不包含到期日期，则可视为会话 cookie。 会话 cookie 存储在内存中，决不会写入磁盘。<br><strong>当浏览器关闭时，cookie 将从此永久丢失。</strong><br>如果 cookie 包含到期日期，则可视为持久性 cookie。 在指定的到期日期，cookie 将从磁盘中删除。</p>
<h3 id="session"><a href="#session" class="headerlink" title="session"></a>session</h3><p><img src="/2018/03/09/http服务与ajax编程/images/session.png" alt=""></p>
<ul>
<li>在服务器端存储数据的容器</li>
<li>session容器是一个数组的形式，通过超全局变量$_SESSION 进行取值和设置</li>
<li>session在使用前，必须先开启session机制</li>
<li>session中的数据可以被当前网站所共享</li>
<li>session 默认被存在在服务器的一个文件里（不是内存）</li>
</ul>
<h4 id="session的基本操作"><a href="#session的基本操作" class="headerlink" title="session的基本操作"></a>session的基本操作</h4><p><strong>开启sessiion机制</strong>(使用session前必须调用此方法)<br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">session_start(); <span class="comment">//开启session会话或者重用已经创建的会话。</span></div></pre></td></tr></table></figure></p>
<p><strong>session_start();的作用：</strong></p>
<ul>
<li>在服务器中随机生成一个sessionID</li>
<li>创建一个session会话文件，用于存储数据（文件名和session的相同，同一个会话只会创建一次）</li>
<li>在响应头中设置cookie,在cookie中存放本次会话的sessionID（注意：是只把本次会话的sessionID传到cookie，不会把其他的session数据传到cookie中）</li>
</ul>
<p><strong>设置和获取session中的数据</strong>(通过超全局变量$_SESSION进行操作)</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//设置</span></div><div class="line">$_SESSION[<span class="string">'键'</span>]=<span class="string">'值'</span>; </div><div class="line"><span class="comment">//删除</span></div><div class="line"><span class="keyword">unset</span>($_SESSION[<span class="string">'键'</span>]); </div><div class="line"><span class="comment">//清空session</span></div><div class="line">$_SESSION=[]; </div><div class="line"><span class="comment">//直接删除session会话文件，PHP脚本将无法读取session数据</span></div><div class="line">session_destroy()</div></pre></td></tr></table></figure>
<h3 id="COOKE-和SESSION的应用–登录模块功能"><a href="#COOKE-和SESSION的应用–登录模块功能" class="headerlink" title="COOKE 和SESSION的应用–登录模块功能"></a>COOKE 和SESSION的应用–登录模块功能</h3><p>登录模块的基本思路：</p>
<ol>
<li><p>如果用户登录成功，在服务器中记录用户的登录状态</p>
<ul>
<li><p>执行session_start(), 生产session文件，在session文件中，记录当前用户的信息</p>
</li>
<li><p>通过响应头部，给浏览器的cookie设置sessionID</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span>($name==<span class="string">'zs'</span>&amp;&amp;$pwd==<span class="string">'666'</span>)&#123;</div><div class="line">    <span class="comment">//登录成功</span></div><div class="line">    session_start();</div><div class="line">    $_SESSION[<span class="string">'username'</span>]=$name;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>​</p>
</li>
</ul>
</li>
<li><p>后续其他页面（购物车，个人中心），浏览器会自动发送cookie到服务器</p>
</li>
<li><p>在服务器中，首先判断当前页面是否携带有sessionID</p>
<ul>
<li><p>是:  继续</p>
</li>
<li><p>否: 用户未登录， 跳转到登录页，（登录的用户cookie中会保存sessionID)</p>
</li>
</ul>
</li>
<li><p>再根据sessionID,找到对应的session文件，查看其中是否存放有当前用户的信息</p>
<ul>
<li><p>是： 用户已登录 ，正常浏览</p>
</li>
<li><p>否：用户未登录，跳转到登录页</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//判断cookie是否存在    </span></div><div class="line"><span class="keyword">if</span>(!<span class="keyword">empty</span>($_COOKIE[<span class="string">'PHPSESSID'</span>]))&#123;</div><div class="line">        session_start();</div><div class="line">        <span class="keyword">if</span>(!<span class="keyword">empty</span>($_SESSION[<span class="string">'username'</span>]))&#123;</div><div class="line">            <span class="comment">//正常浏览</span></div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">            header(<span class="string">'location:./04-login.html'</span>);</div><div class="line">            <span class="keyword">die</span>();<span class="comment">//后面代码不执行</span></div><div class="line">        &#125;</div><div class="line">    &#125;<span class="keyword">else</span>&#123;</div><div class="line">        header(<span class="string">'location:./04-login.html'</span>);</div><div class="line">        <span class="keyword">die</span>();<span class="comment">//后面代码不执行</span></div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>流程图如下：</p>
</li>
</ul>
</li>
</ol>
<p><img src="/2018/03/09/http服务与ajax编程/images/sess-login.png" alt=""></p>
<h3 id="cookie和session总结"><a href="#cookie和session总结" class="headerlink" title="cookie和session总结"></a>cookie和session总结</h3><p><strong>cookie是存在于浏览器中 的，服务器怎么可以获取cookie?</strong><br>    浏览器向服务器发送请求时，会自动将浏览器中cookie的数据发送给服务器，供服务器使用<br>    服务器怎么可以设置cookie?<br>      服务器无法直接操作cookie ,setcookie方法只是设置响应头，在浏览器接受到响应报文后，会根据响应报文，自动的设置cookie,向cookie中添加和删除数据；<br>    cookie 存储容量非常小，只有4kb左右 </p>
<h1 id="http协议"><a href="#http协议" class="headerlink" title="http协议"></a>http协议</h1><blockquote>
<p>协议是指计算机通信网络中两台计算机之间进行通信所必须共同遵守的规定或规则<br>HTTP协议，即超文本传输协议(Hypertext transfer protocol)。是一种详细规定了浏览器和服务器之间互相通信的规则，HTTP协议分为<strong>请求</strong> 和<strong>响应</strong> 两个部分组成。</p>
</blockquote>
<h2 id="请求与请求报文"><a href="#请求与请求报文" class="headerlink" title="请求与请求报文"></a>请求与请求报文</h2><p><strong>get请求的请求报文详解</strong> </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//--------------------------请求行--------------------------------</span></div><div class="line"><span class="comment">// GET  请求方式</span></div><div class="line"><span class="comment">// /day02/01.php?username=hucc&amp;password=123456    请求路径+参数（注意点）</span></div><div class="line"><span class="comment">// HTTP/1.1 HTTP的版本号</span></div><div class="line">GET /day02/<span class="number">01.</span>php?username=hucc&amp;password=<span class="number">123456</span> HTTP/<span class="number">1.1</span></div><div class="line"></div><div class="line"><span class="comment">//--------------------------请求头--------------------------------</span></div><div class="line"><span class="comment">// Host:主机地址</span></div><div class="line">Host: www.study.com</div><div class="line"><span class="comment">// HTTP1.1版本默认开启，建立过连接后，TCP连接不会断开，下次连接可以继续使用（底层，不用管）</span></div><div class="line">Connection: keep-alive</div><div class="line"><span class="comment">//chrome浏览器自己增加的，不用管</span></div><div class="line">Upgrade-Insecure-Requests: <span class="number">1</span></div><div class="line"><span class="comment">//浏览器的代理字符串（版本信息）</span></div><div class="line">User-Agent: Mozilla/<span class="number">5.0</span> (Windows NT <span class="number">10.0</span>; WOW64) AppleWebKit/<span class="number">537.36</span> (KHTML, like Gecko) Chrome/<span class="number">58.0</span><span class="number">.3029</span><span class="number">.96</span> Safari/<span class="number">537.36</span></div><div class="line"><span class="comment">//浏览器端可以接受的类型。</span></div><div class="line">Accept: text/html,application/xhtml+xml,application/xml;q=<span class="number">0.9</span>,images/webp,<span class="string">`*/*`</span>;q=<span class="number">0.8</span></div><div class="line"><span class="comment">//从哪个页面发出的请求</span></div><div class="line">Referer: http:<span class="comment">//www.study.com/day02/01-login.html</span></div><div class="line"><span class="comment">//检查浏览器支持的压缩方式</span></div><div class="line">Accept-Encoding: gzip, deflate, sdch</div><div class="line"><span class="comment">//浏览器支持的语言，优先中文。</span></div><div class="line">Accept-Language: zh-CN,zh;q=<span class="number">0.8</span>,en;q=<span class="number">0.6</span></div><div class="line"></div><div class="line"><span class="comment">//----------------------------请求体-------------------------------------</span></div><div class="line"><span class="comment">//get请求没有请求体，但是参数会拼接到请求行中</span></div></pre></td></tr></table></figure>
<p><strong>POST请求的请求报文</strong> </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-----------------------请求行---------------------------------------------</span></div><div class="line">POST /day02/<span class="number">01.</span>php HTTP/<span class="number">1.1</span></div><div class="line"></div><div class="line"><span class="comment">//-----------------------请求头--------------------------------------------</span></div><div class="line">Host: www.study.com</div><div class="line">Connection: keep-alive</div><div class="line"><span class="comment">//传递的参数的长度。</span></div><div class="line">Content-Length: <span class="number">29</span></div><div class="line">Cache-Control: max-age=<span class="number">0</span></div><div class="line">Origin: http:<span class="comment">//www.study.com</span></div><div class="line">Upgrade-Insecure-Requests: <span class="number">1</span></div><div class="line">User-Agent: Mozilla/<span class="number">5.0</span> (Windows NT <span class="number">10.0</span>; WOW64) AppleWebKit/<span class="number">537.36</span> (KHTML, like Gecko) Chrome/<span class="number">58.0</span><span class="number">.3029</span><span class="number">.96</span> Safari/<span class="number">537.36</span></div><div class="line"><span class="comment">//内容类型：表单数据，如果是post请求，必须指定这个属性。</span></div><div class="line">Content-Type: application/x-www-form-urlencoded</div><div class="line">Accept: text/html,application/xhtml+xml,application/xml;q=<span class="number">0.9</span>,images/webp,<span class="string">`*/*`</span>;q=<span class="number">0.8</span></div><div class="line">Referer: http:<span class="comment">//www.study.com/day02/01-login.html</span></div><div class="line">Accept-Encoding: gzip, deflate</div><div class="line">Accept-Language: zh-CN,zh;q=<span class="number">0.8</span>,en;q=<span class="number">0.6</span></div><div class="line"></div><div class="line"><span class="comment">//------------------------请求体------------------------------------------</span></div><div class="line">username=hucc&amp;password=<span class="number">123456</span></div></pre></td></tr></table></figure>
<p><strong>GET请求与POST请求的对比</strong> </p>
<ul>
<li>GET请求没有请求体，因为GET请求的参数拼接到地址栏中了</li>
<li>POST请求有请求体，就是传递的参数</li>
<li>POST请求需要指定content-type属性。</li>
</ul>
<h2 id="响应与响应报文"><a href="#响应与响应报文" class="headerlink" title="响应与响应报文"></a>响应与响应报文</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//---------------------状态行（响应行）-------------------------------</span></div><div class="line"><span class="comment">//HTTP/1.1  HTTP版本</span></div><div class="line"><span class="comment">//200 响应的状态</span></div><div class="line">	<span class="comment">//200表示成功</span></div><div class="line">	<span class="comment">//304表示读缓存</span></div><div class="line">	<span class="comment">//404表示找不到资源</span></div><div class="line">	<span class="comment">//500表示服务端错误</span></div><div class="line">HTTP/<span class="number">1.1</span> <span class="number">200</span> OK</div><div class="line"></div><div class="line"><span class="comment">//----------------------响应头-----------------------------------------------</span></div><div class="line"><span class="built_in">Date</span>: Thu, <span class="number">22</span> Jun <span class="number">2017</span> <span class="number">16</span>:<span class="number">51</span>:<span class="number">22</span> GMT</div><div class="line">Server: Apache/<span class="number">2.4</span><span class="number">.23</span> (Win32) OpenSSL/<span class="number">1.0</span><span class="number">.2</span>j PHP/<span class="number">5.4</span><span class="number">.45</span></div><div class="line">X-Powered-By: PHP/<span class="number">5.4</span><span class="number">.45</span></div><div class="line">Content-Length: <span class="number">18</span></div><div class="line">Keep-Alive: timeout=<span class="number">5</span>, max=<span class="number">100</span></div><div class="line">Connection: Keep-Alive</div><div class="line"><span class="comment">//内容类型，告诉浏览器该如何解析响应结果</span></div><div class="line">Content-Type: text/html;charset=utf<span class="number">-8</span></div><div class="line"><span class="comment">//-----------------------响应体------------------------------------------------</span></div><div class="line">用户登录成功</div></pre></td></tr></table></figure>
<p>通常来说，我们不会用抓包工具来查看请求和响应，太麻烦了，可以直接使用谷歌浏览器来查看请求报文和响应报文。</p>
<p>谷歌浏览器会对报文进行一定的格式化，看起来虽然不是原生的报文，但是使用起来更加的方便简洁。</p>
<h1 id="AJAX"><a href="#AJAX" class="headerlink" title="AJAX"></a>AJAX</h1><blockquote>
<p>即 Asynchronous [e’sɪŋkrənəs] Javascript And XML， AJAX 不是一门的新的语言，而是对现有技术的综合利用。 本质是在HTTP协议的基础上以异步的方式与服务器进行通信。</p>
</blockquote>
<h2 id="同步与异步"><a href="#同步与异步" class="headerlink" title="同步与异步"></a>同步与异步</h2><p>同步和异步概念：</p>
<p>同步: 指的就是事情要一件一件做。等做完前一件才能做后一件任务</p>
<p>异步: 不受当前任务的影响，两件事情同时进行，做一件事情时，不影响另一件事情的进行。</p>
<p>编程中：异步程序代码执行时不会阻塞其它程序代码执行,从而提升整体执行效率。</p>
<p><img src="/2018/03/09/http服务与ajax编程/images/async_time.png" alt=""></p>
<p>网页异步应用：</p>
<ol>
<li>验证你的用户名是否已经存在（一边输入，一边获取你的信息，和后台比对）。</li>
<li>百度搜索提示，及相关内容展示（一边输入，一边找出了你可能要的内容）。</li>
<li>新浪微博评论（异步加载）。</li>
</ol>
<p>XMLHttpRequest可以以异步方式的处理程序。在open()中的第三个参数true/false决定同步(false)还是异步(true)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">总结：</div><div class="line"><span class="comment">//1.用表单形式提交的，是同步方式，需要指定提交地址，而且表单input元素需要加上name属性</span></div><div class="line"><span class="comment">//2.ajax形式不需要form表单，也不需要设置input输入框的name属性</span></div><div class="line"><span class="comment">//3.只有在表单提交数据，且method为get方式地址栏上才会看见填写的数据，ajax的请求不管是get还是post都不会在地址栏上显示</span></div></pre></td></tr></table></figure>
<h2 id="XMLHttpRequest"><a href="#XMLHttpRequest" class="headerlink" title="XMLHttpRequest"></a>XMLHttpRequest</h2><blockquote>
<p>浏览器内建对象，用于在后台与服务器通信(交换数据) ， 由此我们便可实现对网页的部分更新，而不是刷新整个页面。这个请求是异步，即在往服务器发送请求时，并不会阻碍程序的运行，浏览器会继续渲染后续的结构。</p>
</blockquote>
<h3 id="发送get请求"><a href="#发送get请求" class="headerlink" title="发送get请求"></a>发送get请求</h3><p>XMLHttpRequest以异步的方式发送HTTP请求，因此在发送请求时，一样需要遵循HTTP协议。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//使用XMLHttpRequest发送get请求的步骤</span></div><div class="line"><span class="comment">//1. 创建一个XMLHttpRequest对象</span></div><div class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest;<span class="comment">//构造函数没有参数的情况,括号可以省略</span></div><div class="line"><span class="comment">//2. 设置请求行</span></div><div class="line"><span class="comment">//第一个参数:请求方式  get/post</span></div><div class="line"><span class="comment">//第二个参数:请求的地址 get请求需要在url后面拼上参数列表</span></div><div class="line">xhr.open(<span class="string">"get"</span>, <span class="string">"08.php?name=hucc"</span>);</div><div class="line"><span class="comment">//3. 设置请求头</span></div><div class="line"><span class="comment">//浏览器会给我们默认添加基本的请求头,get请求时无需设置</span></div><div class="line"><span class="comment">//4. 设置请求体</span></div><div class="line"><span class="comment">//get请求的请求体为空,因为参数列表拼接到url后面了</span></div><div class="line">xhr.send(<span class="literal">null</span>);</div></pre></td></tr></table></figure>
<ul>
<li>get请求,设置请求行时,需要把参数列表拼接到url后面</li>
<li>get请求不用设置请求头</li>
<li>get请求的请求体为null</li>
</ul>
<h3 id="发送post请求"><a href="#发送post请求" class="headerlink" title="发送post请求"></a>发送post请求</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest;</div><div class="line"><span class="comment">//1. 设置请求行 post请求的参数列表在请求体中</span></div><div class="line">xhr.open(<span class="string">"post"</span>, <span class="string">"09.php"</span>);</div><div class="line"><span class="comment">//2. 设置请求头, post请求必须设置content-type,不然后端无法获取到数据</span></div><div class="line">xhr.setRequestHeader(<span class="string">"content-type"</span>, <span class="string">"application/x-www-form-urlencoded"</span>);</div><div class="line"><span class="comment">//3. 设置请求体</span></div><div class="line">xhr.send(<span class="string">"name=hucc&amp;age=18"</span>);</div></pre></td></tr></table></figure>
<ul>
<li><p>post请求,设置请求行时,参数列表不能拼接到url后面</p>
</li>
<li><p>post必须设置请求头中的<code>content-type为application/x-www-form-urlencoded</code></p>
</li>
<li>post请求需要将参数列表设置到请求体中.</li>
</ul>
<h3 id="获取响应"><a href="#获取响应" class="headerlink" title="获取响应"></a>获取响应</h3><p>HTTP响应分为3个部分，状态行、响应头、响应体。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//给xhr注册一个onreadystatechange事件，当xhr的状态发生改变时，会触发这个事件。</span></div><div class="line">xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span>(xhr.readyState == <span class="number">4</span>)&#123;</div><div class="line">    <span class="comment">//1. 获取状态行</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="string">"状态行:"</span>+xhr.status);</div><div class="line">    <span class="comment">//2. 获取响应头</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="string">"所有的相应头:"</span>+xhr.getAllResponseHeaders());</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">"指定相应头:"</span>+xhr.getResponseHeader(<span class="string">"content-type"</span>));</div><div class="line">    <span class="comment">//3. 获取响应体</span></div><div class="line">    <span class="built_in">console</span>.log(xhr.responseText);</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>readyState</strong> </p>
<blockquote>
<p>readyState:记录了XMLHttpRequest对象的当前状态</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//0：请求未初始化（还没有调用 open()）。</span></div><div class="line"><span class="comment">//1：请求已经建立，但是还没有发送（还没有调用 send()）。</span></div><div class="line"><span class="comment">//2：请求已发送，正在处理中</span></div><div class="line"><span class="comment">//3：请求在处理中；通常响应中已有部分数据可用了，但是服务器还没有完成响应的生成。</span></div><div class="line"><span class="comment">//4：响应已完成；您可以获取并使用服务器的响应了。(我们只需要关注状态4即可)</span></div></pre></td></tr></table></figure>
<h3 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h3><p>【判断用户名是否存在】<br>【用户登录案例】<br>【聊天机器人案例】</p>
<h2 id="数据交互"><a href="#数据交互" class="headerlink" title="数据交互"></a>数据交互</h2><blockquote>
<p>浏览器端只是负责用户的交互和数据的收集以及展示，真正的数据都是存储在服务器端的。我们现在通过ajax的确可以返回一些简单的数据（一个字符串），但是在实际开发过程中，肯定会涉及到大量的复杂类型的数据传输，比如数组、对象等，但是每个编程语言的语法都不一样。因此我们会采用通用的数据交换格式（XML、JSON）来进行数据的交互。</p>
</blockquote>
<h3 id="XML"><a href="#XML" class="headerlink" title="XML"></a>XML</h3><p><strong>什么是XML</strong></p>
<ul>
<li>XML 指可扩展标记语言（EXtensible Markup Language）</li>
<li>XML 是一种标记语言，很类似 HTML</li>
<li>XML 的设计宗旨是传输数据，而非显示数据</li>
<li>XML 标签没有被预定义。您需要自行定义标签。</li>
</ul>
<p><strong>语法规范</strong></p>
<ul>
<li>第一行必须是版本信息 <code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</code></li>
<li>必须有一个根元素（有且仅有一个）</li>
<li>标签不可有空格、不可以数字或.开头、大小写敏感</li>
<li>不可交叉嵌套，都是双标签，如果是单标签，必须闭合</li>
<li>属性双引号（浏览器自动修正成双引号了）</li>
<li>特殊符号要使用实体</li>
<li>注释和HTML一样</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span><span class="meta">?&gt;</span></span></div><div class="line"><span class="tag">&lt;<span class="name">students</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">student</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>张三<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">age</span>&gt;</span>18<span class="tag">&lt;/<span class="name">age</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">gender</span>&gt;</span>男<span class="tag">&lt;/<span class="name">gender</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">desc</span>&gt;</span>路人甲<span class="tag">&lt;/<span class="name">desc</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">student</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">student</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>李四<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">age</span>&gt;</span>20<span class="tag">&lt;/<span class="name">age</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">gender</span>&gt;</span>男<span class="tag">&lt;/<span class="name">gender</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">desc</span>&gt;</span>路人乙<span class="tag">&lt;/<span class="name">desc</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">student</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">students</span>&gt;</span></div></pre></td></tr></table></figure>
<p><strong>php获取xml文件的内容</strong></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//注意，如果需要返回xml数据，需要把content-type改成text/xml,不然浏览器以text/html进行解析。</span></div><div class="line">header(<span class="string">'content-type:text/xml;charset=utf-8'</span>);</div><div class="line"><span class="comment">//用于获取文件的内容</span></div><div class="line"><span class="comment">//参数：文件的路径</span></div><div class="line">$result = file_get_contents(<span class="string">"data.xml"</span>);</div><div class="line"><span class="keyword">echo</span> $result;</div></pre></td></tr></table></figure>
<p><strong>html解析xml</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//获取服务端返回的xml数据，需要使用xhr.responseXML，这是一个document对象，可以使用DOM中的方法查找元素。</span></div><div class="line"><span class="keyword">var</span> data = xhr.responseXML;</div><div class="line"><span class="comment">//获取所有的学生</span></div><div class="line"><span class="keyword">var</span> students = data.querySelectorAll(<span class="string">"student"</span>);</div></pre></td></tr></table></figure>
<p>缺点：虽然可以描述和传输复杂数据，但是其解析过于复杂并且体积较大，所以实现开发已经很少使用了。</p>
<h3 id="JSON数据"><a href="#JSON数据" class="headerlink" title="JSON数据"></a>JSON数据</h3><p>以前xml是将数据存成一个类似DOM结构的类型，这样的话是的数据的体积庞大并且获取数据的时候消耗的性能大，所以就愆生出来了一个JSON的轻量数据.</p>
<p>JSON(JavaScript Object Notation, JS 对象标记) 是一种轻量级的数据交换格式。它基于 ECMAScript 规范的一个子集，采用完全独立于编程语言的文本格式来存储和表示数据。</p>
<ul>
<li>数据在名称/值对中</li>
<li>数据由逗号分隔(最后一个健/值对不能带逗号)</li>
<li>花括号保存对象，方括号保存数组</li>
<li>键必须使用双引号</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 这是一个对象，注意键名也是可以使用引号包裹的</span></div><div class="line"><span class="keyword">var</span> obj = &#123;<span class="attr">a</span>: <span class="string">'Hello'</span>, <span class="attr">b</span>: <span class="string">'World'</span>&#125;; </div><div class="line"></div><div class="line"><span class="comment">//这是一个 JSON 字符串，属性用双引号包裹起来了，本质是一个字符串，整个字符串只能用单引号进行包裹</span></div><div class="line"><span class="keyword">var</span> json = <span class="string">'&#123;"a": "Hello", "b": "World"&#125;'</span>;</div><div class="line"></div><div class="line"><span class="comment">// 字符串数组形式</span></div><div class="line"><span class="keyword">var</span> strArr = <span class="string">'[1,2,3,4,5]'</span>;</div><div class="line">strArr = <span class="built_in">JSON</span>.parse(strArr);</div><div class="line"><span class="built_in">console</span>.log(strArr); <span class="comment">// [1,2,3,4,5]</span></div><div class="line"><span class="built_in">console</span>.log(strArr[<span class="number">2</span>]); <span class="comment">// 3</span></div><div class="line"></div><div class="line"><span class="comment">// 字符串布尔类型</span></div><div class="line"><span class="keyword">var</span> flag = <span class="string">"false"</span>;</div><div class="line">flag = <span class="built_in">JSON</span>.parse(flag);</div><div class="line"><span class="built_in">console</span>.log(flag);  <span class="comment">// false</span></div><div class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> flag);  <span class="comment">// boolean</span></div></pre></td></tr></table></figure>
<p><strong>JSON数据在不同语言进行传输时，类型为字符串，不同的语言各自也都对应有解析方法，需要解析完成后才能读取</strong></p>
<h4 id="php处理json"><a href="#php处理json" class="headerlink" title="php处理json"></a>php处理json</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">json_encode()   <span class="comment">// 将关联数组转换成JSON字符串</span></div><div class="line">json_decode()   <span class="comment">// 让JSON字符串转换成关联数组或者对象</span></div><div class="line"><span class="comment">//也是一组对应的方法</span></div></pre></td></tr></table></figure>
<ul>
<li>php关联数组==&gt; json</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// php的关联数组</span></div><div class="line">$obj = <span class="keyword">array</span>(</div><div class="line">  <span class="string">"a"</span>=&gt;<span class="string">"hello"</span>,</div><div class="line">  <span class="string">"b"</span>=&gt;<span class="string">"world"</span>,</div><div class="line">  <span class="string">"name"</span>=&gt;<span class="string">"胡聪聪"</span></div><div class="line">);</div><div class="line"><span class="comment">//json字符串</span></div><div class="line">$json = json_encode($obj);</div><div class="line"><span class="keyword">echo</span> $json;</div></pre></td></tr></table></figure>
<ul>
<li>json===&gt;php对象</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">$json = <span class="string">'&#123;"a": "Hello", "b": "World"&#125;'</span>;<span class="comment">//json字符串</span></div><div class="line"><span class="comment">//第一个参数：json字符串</span></div><div class="line"><span class="comment">//第二个参数：</span></div><div class="line">	<span class="comment">//false，将json转换成对象(默认)</span></div><div class="line">	<span class="comment">//true：将对象转换成数组(推荐)</span></div><div class="line">$obj = json_decode($json,<span class="keyword">true</span>);</div><div class="line"><span class="keyword">echo</span> $obj[<span class="string">'a'</span>];</div><div class="line"></div><div class="line"><span class="comment">//通过json文件获取到的内容就是一个json字符串。</span></div><div class="line">$data = file_get_contents(<span class="string">"data.json"</span>);</div><div class="line"><span class="comment">//将json转换成数组</span></div><div class="line">$result = json_decode($data, <span class="keyword">true</span>);</div><div class="line">print_r($result);</div></pre></td></tr></table></figure>
<h4 id="JS处理json"><a href="#JS处理json" class="headerlink" title="JS处理json"></a>JS处理json</h4><ul>
<li><p>JS对象 ==&gt; JSON字符串 JSON.stringify(obj)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//obj是一个js对象</span></div><div class="line"><span class="keyword">var</span> obj = &#123;<span class="attr">a</span>: <span class="string">'Hello'</span>, <span class="attr">b</span>: <span class="string">'World'</span>&#125;</div><div class="line"><span class="comment">//result就变成了一个json字符串了</span></div><div class="line"><span class="keyword">var</span> result = <span class="built_in">JSON</span>.stringify(obj);<span class="comment">// '&#123;"a": "Hello", "b": "World"&#125;'</span></div></pre></td></tr></table></figure>
</li>
<li><p>JSON字符串 ==&gt; JS对象  JSON.parse(obj)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//json是一个json字符串</span></div><div class="line"><span class="keyword">var</span> json = <span class="string">'&#123;"a": "Hello", "b": "World"&#125;'</span>;</div><div class="line"><span class="comment">//obj就变成了一个js对象</span></div><div class="line"><span class="keyword">var</span> obj = <span class="built_in">JSON</span>.parse(json);<span class="comment">// &#123;a: 'Hello', b: 'World'&#125;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p>使用json进行数据传输</p>
<p>思考：</p>
<ol>
<li>js有一个对象，如何发送到php后台</li>
<li>php中有一个对象，如何发送到前台。</li>
</ol>
<p>【案例：获取表格数据.html】</p>
<h3 id="eval方法"><a href="#eval方法" class="headerlink" title="eval方法"></a>eval方法</h3><p>JS处理json的方法在低版本IE中不识别，可以借助于JS的eval()方法</p>
<p>eval() 函数可计算某个字符串，并执行其中的的 JavaScript 代码。eval的参数是一个字符串，这个字符串是需要执行的表达式或者语句。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(<span class="built_in">eval</span>(<span class="string">"&#123;&#125;"</span>));<span class="comment">//undefined，因为&#123;&#125;被当成了代码块</span></div><div class="line"><span class="built_in">console</span>.log(<span class="built_in">eval</span>(<span class="string">"(&#123;&#125;)"</span>));<span class="comment">//obj，因为&#123;&#125;用()引起来了。</span></div><div class="line"></div><div class="line"><span class="comment">//使用这个方法，也可以将一个json字符串转换成js对象。</span></div><div class="line"><span class="keyword">var</span> json = <span class="string">'&#123;"name":"zs", "age":18, "sex":"男"&#125;'</span>;</div><div class="line"><span class="keyword">var</span> obj = <span class="built_in">eval</span>(<span class="string">"("</span> + json + <span class="string">")"</span>);</div><div class="line"><span class="built_in">console</span>.log(obj);</div></pre></td></tr></table></figure>
<p>注意：eval函数的功能非常的强大，但是实际使用的情况并不多。所以要是为了解决低版本IE中的js处理json，可以利用json2.js这个插件解决兼容问题。</p>
<ul>
<li>eval形式的代码难以阅读</li>
<li>eval形式的代码无法打断点，因为本质还是一个字符串</li>
<li>在浏览器端执行任意的 JavaScript会带来潜在的安全风险，恶意的JavaScript代码可能会破坏应用</li>
</ul>
<h2 id="ajax的兼容性处理"><a href="#ajax的兼容性处理" class="headerlink" title="ajax的兼容性处理"></a>ajax的兼容性处理</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span>(XMLHttpRequest)&#123;</div><div class="line">  <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</div><div class="line">&#125;<span class="keyword">else</span>&#123;</div><div class="line">  <span class="comment">//兼容IE5、6低版本</span></div><div class="line">  <span class="keyword">var</span> xhr = <span class="keyword">new</span> ActiveXObject(<span class="string">"Microsoft.XMLHTTP"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="封装ajax工具函数"><a href="#封装ajax工具函数" class="headerlink" title="封装ajax工具函数"></a>封装ajax工具函数</h2><blockquote>
<p>每次发送ajax请求，其实步骤都是一样的，重复了大量代码，我们完全可以封装成一个工具函数。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//1. 创建xhr对象</span></div><div class="line"><span class="comment">//2. 设置请求行</span></div><div class="line"><span class="comment">//3. 设置请求头</span></div><div class="line"><span class="comment">//3. 设置请求体</span></div><div class="line"><span class="comment">//4. 监听响应状态</span></div><div class="line"><span class="comment">//5. 获取响应内容</span></div></pre></td></tr></table></figure>
<h3 id="参数提取"><a href="#参数提取" class="headerlink" title="参数提取"></a>参数提取</h3><table>
<thead>
<tr>
<th>参数名</th>
<th>参数类型</th>
<th>描述</th>
<th>传值</th>
<th>默认值</th>
</tr>
</thead>
<tbody>
<tr>
<td>type</td>
<td>string</td>
<td>请求方式</td>
<td>get/post</td>
<td>get</td>
</tr>
<tr>
<td>url</td>
<td>string</td>
<td>请求地址</td>
<td>接口地址</td>
<td>当前页地址</td>
</tr>
<tr>
<td>async</td>
<td>boolean</td>
<td>是否异步</td>
<td>true/fase</td>
<td>true</td>
</tr>
<tr>
<td>data</td>
<td>string</td>
<td>请求数据</td>
<td><code>{key:value,key:value}</code></td>
<td></td>
</tr>
<tr>
<td>success</td>
<td>function</td>
<td>响应成功时调用</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>error</td>
<td>function</td>
<td>响应失败时调用</td>
<td>-</td>
<td>-</td>
</tr>
</tbody>
</table>
<h3 id="参数检测"><a href="#参数检测" class="headerlink" title="参数检测"></a>参数检测</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//如果options参数没有传递，直接返回。</span></div><div class="line"><span class="keyword">if</span> (!options || <span class="keyword">typeof</span> options !== <span class="string">"object"</span>) &#123;</div><div class="line">  <span class="keyword">return</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//处理默认参数</span></div><div class="line"><span class="comment">//如果参数不是post，那就默认为get</span></div><div class="line"><span class="keyword">var</span> type = options.type == <span class="string">"post"</span> ? <span class="string">"post"</span> : <span class="string">"get"</span>;</div><div class="line"><span class="comment">//如果没有传url，那就传当前地址</span></div><div class="line"><span class="keyword">var</span> url = options.url || location.href;</div><div class="line"><span class="comment">//如果参数不是false，那就默认是true，发异步请求</span></div><div class="line"><span class="keyword">var</span> <span class="keyword">async</span> = options.async == <span class="literal">false</span> ? <span class="literal">false</span> : <span class="literal">true</span>;</div></pre></td></tr></table></figure>
<h3 id="完整版"><a href="#完整版" class="headerlink" title="完整版"></a>完整版</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> $ = &#123;</div><div class="line">  ajax: <span class="function"><span class="keyword">function</span> (<span class="params">options</span>) </span>&#123;</div><div class="line">    <span class="comment">//如果options参数没有传递，直接返回。</span></div><div class="line">    <span class="keyword">if</span> (!options || <span class="keyword">typeof</span> options !== <span class="string">"object"</span>) &#123;</div><div class="line">      <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="comment">//处理默认参数</span></div><div class="line">    <span class="comment">//如果参数不是post，那就默认为get</span></div><div class="line">    <span class="keyword">var</span> type = options.type == <span class="string">"post"</span> ? <span class="string">"post"</span> : <span class="string">"get"</span>;</div><div class="line">    <span class="comment">//如果没有传url，那就传当前地址</span></div><div class="line">    <span class="keyword">var</span> url = options.url || location.pathname;</div><div class="line">    <span class="comment">//如果参数不是false，那就默认是true，发异步请求</span></div><div class="line">    <span class="keyword">var</span> <span class="keyword">async</span> = options.async == <span class="literal">false</span> ? <span class="literal">false</span> : <span class="literal">true</span>;</div><div class="line">    </div><div class="line">    <span class="comment">// 数据是对象形式转化成字符串形式</span></div><div class="line">    <span class="keyword">var</span> params = <span class="keyword">this</span>.getParams(options.data);</div><div class="line">    </div><div class="line">    <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</div><div class="line">    </div><div class="line">    <span class="comment">//设置请求行</span></div><div class="line">    <span class="keyword">if</span> (type == <span class="string">"get"</span>) &#123;</div><div class="line">      url = url + <span class="string">"?"</span> + params;</div><div class="line">    &#125;</div><div class="line">    xhr.open(type, url, <span class="keyword">async</span>);</div><div class="line">    </div><div class="line">    <span class="comment">//设置请求头</span></div><div class="line">    <span class="keyword">if</span> (type == <span class="string">"post"</span>) &#123;</div><div class="line">      xhr.setRequestHeader(<span class="string">"content-type"</span>, <span class="string">"application/x-www-form-urlencoded"</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//设置请求参数</span></div><div class="line">    xhr.send(params);</div><div class="line">    </div><div class="line">    <span class="comment">// 监听响应事件</span></div><div class="line">    xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="keyword">if</span> (xhr.readyState == <span class="number">4</span>) &#123;</div><div class="line">        <span class="keyword">if</span> (xhr.status == <span class="number">200</span>) &#123;</div><div class="line">          <span class="comment">/*根据响应头的content-type属性指定方法接收到的内容*/</span></div><div class="line">          <span class="keyword">var</span> contentType = xhr.getResponseHeader(<span class="string">'content-type'</span>);</div><div class="line">          <span class="keyword">var</span> data = <span class="literal">null</span>;</div><div class="line">          <span class="keyword">if</span> (contentType.indexOf(<span class="string">'json'</span>) &gt; <span class="number">-1</span>) &#123;</div><div class="line">            <span class="comment">//   返回json类型数据</span></div><div class="line">            data = <span class="built_in">JSON</span>.parse(xhr.responseText);</div><div class="line">          &#125; <span class="keyword">else</span> <span class="keyword">if</span> (contentType.indexOf(<span class="string">'xml'</span>) &gt; <span class="number">-1</span>) &#123;</div><div class="line">            <span class="comment">//   返回xml类型数据</span></div><div class="line">            data = xhr.responseXML;</div><div class="line">          &#125; <span class="keyword">else</span> &#123;</div><div class="line">            data = xhr.responseText;</div><div class="line">          &#125;</div><div class="line">          <span class="comment">/*执行成功函数*/</span></div><div class="line">          options.success &amp;&amp; options.success(data);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">          options.error &amp;&amp; options.error(xhr.responseText);</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;,</div><div class="line">  getParams: <span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>&#123;</div><div class="line">    <span class="comment">//将obj对象转换成参数</span></div><div class="line">    <span class="comment">//将对象转换成参数列表</span></div><div class="line">    <span class="comment">//运用数组存数据和join来格式化字符串</span></div><div class="line">    <span class="keyword">if</span> (!obj) &#123;</div><div class="line">      <span class="keyword">return</span> <span class="literal">null</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">var</span> arr = [];</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> k <span class="keyword">in</span> obj) &#123;</div><div class="line">      arr.push(k + <span class="string">"="</span> + obj[k]);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> arr.join(<span class="string">"&amp;"</span>);</div><div class="line">  &#125;,</div><div class="line">  <span class="comment">//运用字符串和slice截取</span></div><div class="line">  params : <span class="function"><span class="keyword">function</span>(<span class="params">dataObj</span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> dataStr = <span class="string">''</span>;</div><div class="line">    <span class="keyword">for</span>(key <span class="keyword">in</span> dataObj)&#123;</div><div class="line">      dataStr += key + <span class="string">'='</span> + dataObj[key] + <span class="string">'&amp;'</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// 重新赋值，因为slice方法是不会更改原数组的</span></div><div class="line">    dataStr = dataStr.slice(<span class="number">0</span>,<span class="number">-1</span>);</div><div class="line">    <span class="keyword">return</span> dataStr;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>【登录案例】</p>
<h2 id="jQuery中的ajax方法"><a href="#jQuery中的ajax方法" class="headerlink" title="jQuery中的ajax方法"></a>jQuery中的ajax方法</h2><blockquote>
<p>jQuery为我们提供了更强大的Ajax封装</p>
</blockquote>
<h3 id="ajax"><a href="#ajax" class="headerlink" title="$.ajax"></a>$.ajax</h3><p>参数列表</p>
<table>
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>取值</th>
<th>示例</th>
</tr>
</thead>
<tbody>
<tr>
<td>url</td>
<td>接口地址</td>
<td></td>
<td>url:”02.php”</td>
</tr>
<tr>
<td>type</td>
<td>请求方式</td>
<td>get/post</td>
<td>type:”get”</td>
</tr>
<tr>
<td>timeout</td>
<td>超时时间</td>
<td>单位秒</td>
<td>timeout:5000</td>
</tr>
<tr>
<td>dataType</td>
<td>需要服务器返回的格式</td>
<td>json/xml/text(默认)</td>
<td>dataType:”json”</td>
</tr>
<tr>
<td>data</td>
<td>发送的请求数据</td>
<td>对象</td>
<td>data:{name:”zs”, age:18}</td>
</tr>
<tr>
<td>beforeSend</td>
<td>调用前的回调函数</td>
<td>function(){}</td>
<td>beforeSend:function(){ alert(1) }</td>
</tr>
<tr>
<td>success</td>
<td>成功的回调函数</td>
<td>function (data) {}</td>
<td>success:function (data) {}</td>
</tr>
<tr>
<td>error</td>
<td>失败的回调函数</td>
<td>function (error) {}</td>
<td>error:function(data) {}</td>
</tr>
<tr>
<td>complete</td>
<td>完成后的回调函数</td>
<td>function () {}</td>
<td>complete:function () {}</td>
</tr>
</tbody>
</table>
<p>使用示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">$.ajax(&#123;</div><div class="line">  type:<span class="string">"get"</span>,<span class="comment">//请求类型</span></div><div class="line">  url:<span class="string">"02.php"</span>,<span class="comment">//请求地址</span></div><div class="line">  data:&#123;<span class="attr">name</span>:<span class="string">"zs"</span>, <span class="attr">age</span>:<span class="number">18</span>&#125;,<span class="comment">//请求数据</span></div><div class="line">  dataType:<span class="string">"json"</span>,<span class="comment">//希望接受的数据类型</span></div><div class="line">  timeout:<span class="number">5000</span>,<span class="comment">//设置超时时间</span></div><div class="line">  beforeSend:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//alert("发送前调用");</span></div><div class="line">    </div><div class="line">    <span class="comment">//如果在beforeSend中return false了，这次ajax请求就不发送了</span></div><div class="line">    <span class="comment">//这个函数经常用来做表单校验</span></div><div class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">  &#125;,</div><div class="line">  success:<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</div><div class="line">    <span class="comment">//alert("成功时调用");</span></div><div class="line">    <span class="built_in">console</span>.log(data);</div><div class="line">  &#125;,</div><div class="line">  error:<span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</div><div class="line">    <span class="comment">//alert("失败时调用");</span></div><div class="line">    <span class="built_in">console</span>.log(error);</div><div class="line">  &#125;,</div><div class="line">  complete:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//alert("请求完成时调用");</span></div><div class="line">    </div><div class="line">    <span class="comment">//无论请求成功还是失败，这个函数都要执行</span></div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>【案例：登录案例.html】</p>
<p>【案例：获取表格数据.html】</p>
<h3 id="其他api"><a href="#其他api" class="headerlink" title="其他api"></a>其他api</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//$.post(options);只发送post请求</span></div><div class="line"><span class="comment">//$.get(options);//只发送get请求</span></div><div class="line"><span class="comment">//$.getJson(url,callback);//获取服务器端的json文件</span></div><div class="line"><span class="comment">//$.getScript(url,callback);//载入服务器端的js文件，（动态加载js文件）</span></div><div class="line"><span class="comment">//$('div').load(url);//载入一个服务器端的html页面。</span></div></pre></td></tr></table></figure>
<h3 id="接口化开发"><a href="#接口化开发" class="headerlink" title="接口化开发"></a>接口化开发</h3><p>请求地址即所谓的接口，通常我们所说的接口化开发，其实是指一个接口对应一个功能， 并且严格约束了请求参数和响应结果的格式，这样前后端在开发过程中，可以减少不必要的讨论， 从而并行开发，可以极大的提升开发效率，另外一个好处，当网站进行改版后，服务端接口进行调整时，并不影响到前端的功能。</p>
<h4 id="获取短信验证码接口"><a href="#获取短信验证码接口" class="headerlink" title="获取短信验证码接口"></a>获取短信验证码接口</h4><p><strong>需求文档</strong> </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//总需求：点击发送按钮，向服务端发送请求</span></div><div class="line"><span class="comment">//需求1：格式校验</span></div><div class="line">  <span class="comment">//1. 手机号码不能为空   如果为空提示"手机号不能为空"</span></div><div class="line">  <span class="comment">//2. 手机号码格式必须正确,     提示"请输入正确的手机号码"</span></div><div class="line"><span class="comment">//需求2：点击发送时，按钮显示为"发送中",并且不能重复提交请求</span></div><div class="line"><span class="comment">//需求3：根据不同的响应结果，进行响应。</span></div><div class="line">  <span class="comment">//1. 如果接口调用成功</span></div><div class="line">      <span class="comment">//如果响应代码为100，倒计时</span></div><div class="line">      <span class="comment">//如果响应代码为101，提示手机号重复</span></div><div class="line">  <span class="comment">//2. 如果接口调用失败，告诉用户"服务器繁忙，请稍候再试"</span></div></pre></td></tr></table></figure>
<p><strong>接口文档</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//接口说明：获取短信验证码</span></div><div class="line"><span class="comment">//接口地址：getCode.php</span></div><div class="line"><span class="comment">//请求方式：get</span></div><div class="line"><span class="comment">//接口传参：mobile 手机号</span></div><div class="line"><span class="comment">//返回类型  json</span></div><div class="line"><span class="comment">//接口返回：&#123;"code":"101","msg":"手机号码存在", "mobile":"18511249258"&#125;</span></div><div class="line">        <span class="comment">//code 当前业务逻辑的处理成功失败的标识  100:成功   101:手机号码存在</span></div><div class="line">        <span class="comment">//msg  当前系统返回给前端提示</span></div><div class="line">        <span class="comment">//mobile  当前的手机号码</span></div></pre></td></tr></table></figure>
<h4 id="注册接口"><a href="#注册接口" class="headerlink" title="注册接口"></a>注册接口</h4><p><strong>表单序列化</strong></p>
<p>jquery提供了一个<code>serialize()</code>方法序列化表单，说白就是将表单中带有name属性的所有参数拼成一个格式为<code>name=value&amp;name1=value1</code>这样的字符串。方便我们获取表单的数据。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//serialize将表单参数序列化成一个字符串.表单元素必须指定name属性</span></div><div class="line"><span class="comment">//name=hucc&amp;pass=123456&amp;repass=123456&amp;mobile=18511249258&amp;code=1234</span></div><div class="line">$(<span class="string">'form'</span>).serialize();</div><div class="line"></div><div class="line"><span class="comment">//serializeArray将表单序列化成一个数组，必须指定name属性</span></div><div class="line"><span class="comment">//[&#123;name:"name", value:"hucc"&#125;,&#123;name:"pass", value:"123456"&#125;,&#123;name:"repass", value:"123456"&#125;,&#123;name:"mobile", value:"18511241111"&#125;, &#123;name:"code", value:"1234"&#125;]</span></div><div class="line">$(<span class="string">'form'</span>).serializeArray();</div></pre></td></tr></table></figure>
<p><strong>jquery的ajax方法，data参数能够直接识别表单序列化的数据<code>data:$(&#39;form&#39;).serializeArray()</code></strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">$.post(&#123;</div><div class="line">  url:<span class="string">"register.php"</span>,</div><div class="line">  data:$(<span class="string">'form'</span>).serializeArray(),</div><div class="line">  dataType:<span class="string">'json'</span>,</div><div class="line">  success:<span class="function"><span class="keyword">function</span> (<span class="params">info</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(info);</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p><strong>需求文档</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//注册功能</span></div><div class="line"><span class="comment">//总需求：点击注册按钮，向服务端发送请求</span></div><div class="line"><span class="comment">//需求1:表单校验</span></div><div class="line">  <span class="comment">//1.1 用户名不能为空，否则提示"请输入用户名"</span></div><div class="line">  <span class="comment">//1.2 密码不能为空，否则提示"请输入密码"</span></div><div class="line">  <span class="comment">//1.3 确认密码必须与密码一直，否则提示"确认密码与密码不一致"</span></div><div class="line">  <span class="comment">//1.4 手机号码不能为空，否则提示"请输入手机号码";</span></div><div class="line">  <span class="comment">//1.5 手机号码格式必须正确，否则提示"手机号格式错误"</span></div><div class="line">  <span class="comment">//1.6 短信验证码必须是4位的数字，否则提示"验证码格式错误"</span></div><div class="line"><span class="comment">//需求2：点击注册按钮时，按钮显示为"注册中...",并且不能重复提交请求</span></div><div class="line"><span class="comment">//需求3：根据不同响应结果，处理响应</span></div><div class="line">  <span class="comment">//3.1 接口调用成功</span></div><div class="line">    <span class="comment">//100 提示用户注册成功，3s后跳转到首页</span></div><div class="line">    <span class="comment">//101 提示用户"用户名hucc已经存在"</span></div><div class="line">    <span class="comment">//102 提示用户"验证码错误"</span></div><div class="line">  <span class="comment">//3.1 接口调用失败，提示"服务器繁忙，请稍后再试",恢复按钮的值</span></div></pre></td></tr></table></figure>
<p><strong>接口文档</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//接口说明：注册</span></div><div class="line"><span class="comment">//接口地址：register.php</span></div><div class="line"><span class="comment">//请求方式：post</span></div><div class="line"><span class="comment">//接口传参：name:用户名 pass:密码 code:验证码  mobile:手机号</span></div><div class="line"><span class="comment">//返回类型  json</span></div><div class="line"><span class="comment">//接口返回：&#123;"code":"100","msg":"注册成功","name":"huccc"&#125;</span></div><div class="line">        <span class="comment">//code 当前业务逻辑的处理成功失败的标识  100:成功  101:用户存在 102:验证码错误</span></div><div class="line">        <span class="comment">//msg  当前系统返回给前端提示</span></div><div class="line">        <span class="comment">//name: 注册的用户名</span></div></pre></td></tr></table></figure>
<h1 id="模板引擎"><a href="#模板引擎" class="headerlink" title="模板引擎"></a>模板引擎</h1><blockquote>
<p>是为了使用户界面与业务数据（内容）分离而产生的，它可以生成特定格式的文档，用于网站的模板引擎就会生成一个标准的HTML文档。</p>
</blockquote>
<h2 id="为什么要使用模板引擎"><a href="#为什么要使用模板引擎" class="headerlink" title="为什么要使用模板引擎"></a>为什么要使用模板引擎</h2><p>我们通过ajax获取到数据后，需要把数据渲染到页面，在学习模板引擎前，我们的做法是大量的拼接字符串，对于结构简单的页面，这么做还行，但是如果页面结构很复杂，使用拼串的话<strong>代码可阅读性非常的差，而且非常容易出错，后期代码维护也是相当的麻烦。</strong> </p>
<p>【演示：使用拼串进行渲染的缺点.html】</p>
<h2 id="常见的模板引擎"><a href="#常见的模板引擎" class="headerlink" title="常见的模板引擎"></a>常见的模板引擎</h2><p>BaiduTemplate：<a href="http://tangram.baidu.com/BaiduTemplate/" target="_blank" rel="external">http://tangram.baidu.com/BaiduTemplate/</a><br>velocity.js：<a href="https://github.com/shepherdwind/velocity.js/" target="_blank" rel="external">https://github.com/shepherdwind/velocity.js/</a><br>ArtTemplate：<a href="https://github.com/aui/artTemplate" target="_blank" rel="external">https://github.com/aui/artTemplate</a></p>
<p>artTemplate是使用最广泛，效率最高的模板引擎，需要大家掌握。</p>
<h2 id="artTemplate的使用"><a href="#artTemplate的使用" class="headerlink" title="artTemplate的使用"></a>artTemplate的使用</h2><h3 id="artTemplate入门"><a href="#artTemplate入门" class="headerlink" title="artTemplate入门"></a>artTemplate入门</h3><p><strong>1.引入模板引擎的js文件</strong> </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;script src=<span class="string">"template-web.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div></pre></td></tr></table></figure>
<p><strong>2.准备模板</strong> </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!--</span></div><div class="line"><span class="comment">  	指定了type为text/html后，这一段script标签并不会解析，也不会显示。或者type为text/template</span></div><div class="line"><span class="comment">	需要给script标签指定id</span></div><div class="line"><span class="comment">--&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/html"</span> <span class="attr">id</span>=<span class="string">"myTmp"</span>&gt;</span><span class="undefined"></span></div><div class="line"><span class="xml">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>姓名：隔壁老王<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></div><div class="line"><span class="xml">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>年龄：18<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></div><div class="line"><span class="xml">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>技能：查水表<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></div><div class="line"><span class="xml">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>描述：年轻力气壮<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></div><div class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p><strong>3.准备数据</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//3. 准备数据,数据是后台获取的，可以随时变化</span></div><div class="line"><span class="keyword">var</span> json = &#123;</div><div class="line">  userName:<span class="string">"隔壁老王"</span>,</div><div class="line">  age:<span class="number">18</span>,</div><div class="line">  skill:<span class="string">"查水表"</span>,</div><div class="line">  desc:<span class="string">"年轻气壮"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>4.将模板与数据进行绑定</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//第一个参数：模板的id,注意不要带'#',浏览器版本无法加载外部文件，filename 为存放模板的元素 id</span></div><div class="line"><span class="comment">//第二个参数：数据,该参数只能是对象,模板会遍历这个对象，把这个对象中所有的属性，变成模板的变量</span></div><div class="line"><span class="comment">//返回值：根据模板生成的字符串。</span></div><div class="line"><span class="keyword">var</span> html = template(<span class="string">"myTmp"</span>, json);<span class="comment">//把对象的所有的属性渲染到模板中,所以模板可以直接访问对象的属性</span></div><div class="line"><span class="built_in">console</span>.log(html);</div></pre></td></tr></table></figure>
<p><strong>5.修改模板</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/html"</span> <span class="attr">id</span>=<span class="string">"myTmp"</span>&gt;</span><span class="undefined"></span></div><div class="line"><span class="xml">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>姓名：&#123;&#123;userName&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></div><div class="line"><span class="xml">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>年龄：&#123;&#123;age&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></div><div class="line"><span class="xml">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>技能：&#123;&#123;skill&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></div><div class="line"><span class="xml">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>描述：&#123;&#123;desc&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></div><div class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p><strong>6.将数据显示到页面</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> div = <span class="built_in">document</span>.querySelector(<span class="string">"div"</span>);</div><div class="line">div.innerHTML = html;</div></pre></td></tr></table></figure>
<h3 id="artTemplate语法"><a href="#artTemplate语法" class="headerlink" title="artTemplate语法"></a>artTemplate语法</h3><p><strong>if语法</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&#123;&#123;if gender='男'&#125;&#125;</div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"man"</span>&gt;</span></div><div class="line">&#123;&#123;else&#125;&#125;</div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"woman"</span>&gt;</span></div><div class="line">&#123;&#123;/if&#125;&#125;</div></pre></td></tr></table></figure>
<p><strong>each语法</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!--</span></div><div class="line"><span class="comment">  1. &#123;&#123;each data&#125;&#125;  可以通过$value 和 $index获取值和下标</span></div><div class="line"><span class="comment">  2. &#123;&#123;each data v i&#125;&#125;  自己指定值为v，下标为i</span></div><div class="line"><span class="comment">--&gt;</span></div><div class="line">&#123;&#123;each data v i&#125;&#125;</div><div class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"&#123;&#123;v.url&#125;&#125;"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"&#123;&#123;v.src&#125;&#125;"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;v.content&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">   <span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line"> <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">&#123;&#123;/each&#125;&#125;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//如果数据是个数组，必须使用对象进行包裹，因为在&#123;&#123;&#125;&#125;中只写对象的属性。</span></div><div class="line"><span class="keyword">var</span> html = template(<span class="string">"navTmp"</span>, &#123;<span class="attr">data</span>:info&#125;);</div></pre></td></tr></table></figure>
<p>【案例：京东导航】</p>
<p>【案例：祝愿墙】</p>
<p>【案例：什么值得买】</p>
<h1 id="瀑布流案例"><a href="#瀑布流案例" class="headerlink" title="瀑布流案例"></a>瀑布流案例</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">首先，什么是瀑布流？</div><div class="line">瀑布流的几个特征：</div><div class="line">（1）宽度是定死的，高度是不定的</div><div class="line">（2）并且列数是可以进行自适应的，根据屏幕计算一屏能放置多少列</div><div class="line">怎么布局：</div><div class="line">我们发现，因为高度不定，所以导致传统的浮动布局是不行的，所以只能用绝对定位</div><div class="line">也就是说，最终，我们需要动态计算出来每一个图片所在的位置，也就是top和left值</div><div class="line">（1）先设置第一行的left和top，并且把第一列的图片高度push进入一个数组</div><div class="line">（2）然后就是找到数组中最短的那一列，然后设置left和top值，设置完成之后，将刚添加的这个li的高度累加上最短的那一列即可，以便下一次计算</div><div class="line">（3）实现响应式：动态计算一排能放多少列，在动态设置版心的宽度，版心水平居中</div><div class="line">（4）一切结束之后，找到数组的最长的那一项，将高度赋值给父容器（为了其他逻辑的需要，比如说加载新数据的时候）</div><div class="line">（5）在resize的时候重新计算一排能放多少了，当列数发生改变了，在重新进行改变，提高效率（利用定时器）</div></pre></td></tr></table></figure>
<h1 id="同源与跨域"><a href="#同源与跨域" class="headerlink" title="同源与跨域"></a>同源与跨域</h1><h3 id="同源策略："><a href="#同源策略：" class="headerlink" title="同源策略："></a>同源策略：</h3><p>同源策略：同源策略是浏览器设置的一种安全策略，何为同源：</p>
<p>同域名，同端口，同协议  三同，只要这三个里面的任何一个不一致，那么就会产生跨域，一旦跨域，服务器默认是不会返回数据给客户端的</p>
<p>不同源则跨域</p>
<p>例如<a href="http://www.example.com/" target="_blank" rel="external">http://www.example.com/</a></p>
<table>
<thead>
<tr>
<th><a href="http://api.example.com/detail.html" target="_blank" rel="external">http://api.example.com/detail.html</a></th>
<th>不同源</th>
<th>域名不同</th>
</tr>
</thead>
<tbody>
<tr>
<td>https//www.example.com/detail.html</td>
<td>不同源</td>
<td>协议不同</td>
</tr>
<tr>
<td><a href="http://www.example.com:8080/detail.html" target="_blank" rel="external">http://www.example.com:8080/detail.html</a></td>
<td>不同源</td>
<td>端口不同</td>
</tr>
<tr>
<td><a href="http://api.example.com:8080/detail.html" target="_blank" rel="external">http://api.example.com:8080/detail.html</a></td>
<td>不同源</td>
<td>域名、端口不同</td>
</tr>
<tr>
<td><a href="https://api.example.com/detail.html" target="_blank" rel="external">https://api.example.com/detail.html</a></td>
<td>不同源</td>
<td>协议、域名不同</td>
</tr>
<tr>
<td><a href="https://www.example.com:8080/detail.html" target="_blank" rel="external">https://www.example.com:8080/detail.html</a></td>
<td>不同源</td>
<td>端口、协议不同</td>
</tr>
<tr>
<td><a href="http://www.example.com/detail/index.html" target="_blank" rel="external">http://www.example.com/detail/index.html</a></td>
<td>同源</td>
<td>只是目录不同</td>
</tr>
</tbody>
</table>
<p>同源策略的目的：是为了保证用户信息的安全，防止恶意的网站窃取数据。</p>
<p>同源策略的限制范围： 随着互联网的发展，“同源策略”越来越严格，目前，如果非同源，以下三种行为都将收到限制。</p>
<ol>
<li>Cookie、LocalStorage 无法读取。</li>
<li>DOM 无法获得。</li>
<li>AJAX 请求不能发送。</li>
</ol>
<p>虽然这些限制是很有必要的，但是也给我们日常开发带来不好的影响。比如实际开发过程中，往往都会把服务器端架设到一台甚至是一个集群的服务器中，把客户端页面放到另外一个单独的服务器。那么这时候就会出现不同源的情况，如果我们知道两个网站都是安全的话，我们是希望两个不同源的网站之间可以相互请求数据的。这就需要使用到跨域 。</p>
<h3 id="跨域解决办法"><a href="#跨域解决办法" class="headerlink" title="跨域解决办法"></a>跨域解决办法</h3><h4 id="JSONP"><a href="#JSONP" class="headerlink" title="JSONP"></a>JSONP</h4><p>Jsonp(JSON with Padding) 行业里面百分之九十以上都是利用jsonp来跨域）可用于解决主流浏览器的跨域数据访问的问题。原理：服务端返回一个预先定义好的javascript函数的调用，并且将服务器的数据以该函数参数的形式传递过来，这个方法需要前后端配合。</p>
<p>jsonp技术和ajax这个对象没有半毛钱关系</p>
<p>一个鬼才发现，一些标签去获取资源的时候是没有跨域的限制的，就比如说Img图片，我们可以直接通过src=百度的图片将这张图片显示在我们自己的网站上，所以于是我们就琢磨这能不能用标签去发请求呢</p>
<p><strong>在行业里面，一般都是创建一个script标签，通过src去跨域请求，但是有一个问题是返回回来的数据我们不能运用起来（以前ajax是利用回调传参的方式传递回来了一个data数据，我们也采用这种方法），我们传递一个函数名过去，php可以通过$_GET拿到后台的值，并且直接返回一个函数调用即可，并将数据传递回来，在我们的JS里面声明一个函数（函数名=传递过去的值），接受这个数据。</strong></p>
<p>script 标签是不受同源策略的限制的，它可以载入任意地方的 JavaScript 文件，而并不要求同源。类似的还有img和link标签<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!--不受同源策略的标签--&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"http://www.api.com/1.jpg"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"http://www.api.com/1.css"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"http://www.api.com/1.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>jquery 使用jsonp：<br>通过jQuery ajax 方法，设置了一个dataType 的属性叫做jsonp<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//使用起来相当的简单，跟普通的get请求没有任何的区别，只需要把dataType固定成jsonp即可。</span></div><div class="line">$.ajax(&#123;</div><div class="line">  type:<span class="string">"get"</span>,</div><div class="line">  url:<span class="string">"http://www.api.com/testjs.php"</span>,</div><div class="line">  dataType:<span class="string">"jsonp"</span>,</div><div class="line">  data:&#123;</div><div class="line">    uname:<span class="string">"hucc"</span>,</div><div class="line">    upass:<span class="string">"123456"</span></div><div class="line">  &#125;,</div><div class="line">  success:<span class="function"><span class="keyword">function</span> (<span class="params">info</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(info);</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>【案例：查询天气.html】<br><a href="http://lbsyun.baidu.com/index.php?title=car/api/weather" target="_blank" rel="external">http://lbsyun.baidu.com/index.php?title=car/api/weather</a><br><a href="https://www.jisuapi.com/api/weather/" target="_blank" rel="external">天气查询api地址</a><br>秘钥：<code>zVo5SStav7IUiVON0kuCogecm87lonOj</code></p>
<p>【案例：省市区三级联动.html】<br><a href="https://www.jisuapi.com/api/area/" target="_blank" rel="external">api地址</a><br>appkey:  <code>3fa977031a30ffe1</code><br>图灵机器人：<a href="http://www.tuling123.com/" target="_blank" rel="external">http://www.tuling123.com/</a></p>
<p>注意：jsonp但是有一个弊端就是只能是get发送的请求，因为jsonp的底层原理是利用标签去发生请求。</p>
<h5 id="jsonp-实现原理"><a href="#jsonp-实现原理" class="headerlink" title="jsonp 实现原理"></a>jsonp 实现原理</h5><div><div class="fold_hider"><div class="close hider_title">点击显示隐藏具体内容</div></div><div class="fold">
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">/**</span></div><div class="line"><span class="comment">  * jsonp 的实现原理是啥</span></div><div class="line"><span class="comment">  *   1、就是文件资源的src属性是不被浏览器的同源策略所限制</span></div><div class="line"><span class="comment">  *   2、在客户端通过src发送请求给服务器，并且告诉服务器返回数据的时候，回调函数的名字是什么</span></div><div class="line"><span class="comment">  *   3、在服务器返回数据的时候，返回浏览器在请求的时候函数的名字(&#123;后台返回数据&#125;)</span></div><div class="line"><span class="comment">  *   4、通过script请求的资源文件请求回来的数据会被当做js代码来执行，就直接会调用一个全局函数</span></div><div class="line"><span class="comment">  *</span></div><div class="line"><span class="comment">  * </span></div><div class="line"><span class="comment">  *  jsonp 返回的数据类型</span></div><div class="line"><span class="comment">  *    函数名(&#123;&#125;)   小括号内的对象为后台返回来的数据，作为函数的参数来传递</span></div><div class="line"><span class="comment">  *</span></div><div class="line"><span class="comment">  * 封装一个 jsonp 函数，可以用来发送跨域请求</span></div><div class="line"><span class="comment">  *   参数有：</span></div><div class="line"><span class="comment">  *     url: 跨域链接</span></div><div class="line"><span class="comment">  *     parmes： 数据对象参数</span></div><div class="line"><span class="comment">  *     callback：回调函数 ，这个回调函数什么时候执行？当script的src请求完成的时候</span></div><div class="line"><span class="comment">  *           回调函数就执行了，因为请求资源被当做js代码来执行了</span></div><div class="line"><span class="comment">  */</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">jsonp</span>(<span class="params">url, parmes, callback</span>) </span>&#123;</div><div class="line">    <span class="comment">// 1、创建script标签来发送请求</span></div><div class="line">    <span class="keyword">var</span> script = <span class="built_in">document</span>.createElement(<span class="string">'script'</span>);</div><div class="line"></div><div class="line">    <span class="comment">// 2、将parmes 对象 转化成字符串形式</span></div><div class="line">    <span class="comment">// 首先url后面加？</span></div><div class="line">    url += <span class="string">"?"</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> k <span class="keyword">in</span> parmes) &#123;</div><div class="line">        url += k + <span class="string">'='</span> + parmes[k] + <span class="string">'&amp;'</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// 如果url上最后一个字符为‘&amp;’的时候，去掉‘&amp;’</span></div><div class="line">    (url.charAt(url.length - <span class="number">1</span>) === <span class="string">'&amp;'</span>) &amp;&amp; (url = url.slice(<span class="number">0</span>, <span class="number">-1</span>));</div><div class="line"></div><div class="line">    <span class="comment">// 4、这个callback 如何成为全局函数 &amp;&amp; 什么时候来执行</span></div><div class="line">    <span class="comment">// 这个callback存在的问题</span></div><div class="line">    <span class="comment">// 当一次调用若干次jsonp函数，这个callback方法会被覆盖成最后一次调用jsonp的回调函数</span></div><div class="line">    <span class="comment">// 所以需要弄一个随机的并且是唯一的函数名</span></div><div class="line"></div><div class="line">    <span class="comment">// 生成唯一且随机的函数名</span></div><div class="line">    <span class="comment">// 根据时间戳还不可行</span></div><div class="line">    <span class="keyword">var</span> cbName = <span class="string">'jsonp'</span> + (+<span class="keyword">new</span> <span class="built_in">Date</span>()) + <span class="built_in">parseInt</span>(<span class="built_in">Math</span>.random() * <span class="number">999999</span> + <span class="number">10000</span>);</div><div class="line">    <span class="comment">// console.log('msg ' + cbName);</span></div><div class="line">    <span class="comment">// 挂载到全局去</span></div><div class="line">    <span class="comment">// 注意这种写法的错误：这样是将 cbName 作为属性保存到window上去</span></div><div class="line">    <span class="comment">// 应该使用关联数组的形式来挂载到window上,将cbName这个变量保存的值挂载到window上</span></div><div class="line">    <span class="comment">// window.cbName = callback; </span></div><div class="line">    <span class="comment">// window[cbName] = callback;</span></div><div class="line"></div><div class="line">    <span class="comment">// 目前情况下：代码还存在的问题：</span></div><div class="line">    <span class="comment">//  1、在head标签内会生成script标签，当多次调用jsonp函数的时候会生成多个script标签，可以在回调函数调用完成的时候删除head里面的script标签</span></div><div class="line">    <span class="comment">//  2、往window上暴露的回调函数名字还存在window上，可以在回调函数执行完毕后删除掉函数名</span></div><div class="line">    <span class="comment">// window[cbName] = callback;</span></div><div class="line">    <span class="comment">// 上面将回调函数名字暴露到window上的函数就是我们传递的回调函数，这样只能执行回调函数里面的代码，</span></div><div class="line">    <span class="comment">// 可以在封装套一次函数</span></div><div class="line">    <span class="built_in">window</span>[cbName] = <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</div><div class="line">        <span class="comment">// 执行我们传递的回调函数</span></div><div class="line">        callback(data);</div><div class="line">        <span class="comment">// 1、删script标签</span></div><div class="line">        <span class="built_in">document</span>.head.removeChild(script);</div><div class="line">        <span class="comment">// 2、删全局的回调函数名字</span></div><div class="line">        <span class="keyword">delete</span> <span class="built_in">window</span>[cbName];</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// 5、在src请求的时候，还需要将函数名发送给服务器</span></div><div class="line">    <span class="comment">//    注意这里的callback必须是callback，不可更改的,否则服务器返回就不是jsonp数据格式了</span></div><div class="line">    url += <span class="string">'callback='</span>+cbName;</div><div class="line"></div><div class="line">    <span class="comment">// console.log(url);</span></div><div class="line"></div><div class="line">    <span class="comment">// 3、设置script标签的src属性</span></div><div class="line">    <span class="comment">// 注意：仅仅是设置还不能发送出请求，必须要添加到head</span></div><div class="line">    script.src = url;</div><div class="line">    <span class="built_in">document</span>.head.appendChild(script);</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// 借用豆瓣API的接口</span></div><div class="line">jsonp(<span class="string">'https://api.douban.com/v2/book/1220562'</span>, &#123;&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</div><div class="line">    <span class="comment">// 这个 data 是哪里来的</span></div><div class="line">    <span class="comment">// 我们请求的链接形式为： url+'callback=callback'</span></div><div class="line">    <span class="comment">// https://api.douban.com/v2/book/1220562?callback=callback</span></div><div class="line">    <span class="comment">// 可以看上面的链接的返回值，就知道了返回data数据来自哪里了</span></div><div class="line">    <span class="comment">// 这里的回调函数就是指定的回调函数</span></div><div class="line">    <span class="built_in">console</span>.log(data);</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'第一个回调函数'</span>)</div><div class="line">&#125;);</div><div class="line"></div><div class="line">jsonp(<span class="string">'https://api.douban.com/v2/book/1220562'</span>, &#123;&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(data);</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'第二个回调函数'</span>)</div><div class="line">&#125;);</div><div class="line"></div><div class="line">jsonp(<span class="string">'https://api.douban.com/v2/book/1220562'</span>, &#123;&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(data);</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'第三个回调函数'</span>)</div><div class="line">&#125;);</div></pre></td></tr></table></figure>

</div></div>
<h4 id="XMLHttpRequest-2-0"><a href="#XMLHttpRequest-2-0" class="headerlink" title="XMLHttpRequest 2.0"></a>XMLHttpRequest 2.0</h4><blockquote>
<p>XMLHttpRequest是一个javascript内置对象，使得Javascript可以进行异步的HTTP通信。2008年2月，就提出了XMLHttpRequest Level 2 草案。</p>
</blockquote>
<p>老版本的XMLHttpRequest的缺点：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//1. 仅支持传输文本数据，无法传说二进制文件，比如图片视频等。</span></div><div class="line"><span class="comment">//2. 传输数据时，没有进度信息，只能提示完成与否。</span></div><div class="line"><span class="comment">//3. 受到了"同源策略"的限制</span></div></pre></td></tr></table></figure>
<p>新版本的功能：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//1. 可以设置timeout超时时间</span></div><div class="line"><span class="comment">//2. 可以使用formData对象管理表单数据</span></div><div class="line"><span class="comment">//3. 可以获取数据传输的进度信息</span></div></pre></td></tr></table></figure>
<p><strong>注意：我们现在使用new XMLHttpRequest创建的对象就是2.0对象了，我们之前学的是1.0的语法，现在学习一些2.0的新特性即可。</strong>  </p>
<h5 id="timeout设置超时"><a href="#timeout设置超时" class="headerlink" title="timeout设置超时"></a>timeout设置超时</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">xhr.timeout = <span class="number">3000</span>;<span class="comment">//设置超时时间</span></div><div class="line">xhr.ontimeout = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  alert(<span class="string">"请求超时"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="formData管理表单数据"><a href="#formData管理表单数据" class="headerlink" title="formData管理表单数据"></a>formData管理表单数据</h5><blockquote>
<p>formData对象类似于jquery的serialize方法，用于管理表单数据</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//使用特点： </span></div><div class="line"><span class="comment">//1. 实例化一个formData对象， new formData(form); form就是表单元素</span></div><div class="line"><span class="comment">//4. formData对象可以直接作为 xhr.send(formData)的参数。注意此时数据是以二进制的形式进行传输。</span></div><div class="line"><span class="comment">//5. formData有一个append方法，可以添加参数。formData.append("id", "1111");</span></div><div class="line"><span class="comment">//6. 这种方式只能以post形式传递，不需要设置请求头，浏览器会自动为我们设置一个合适的请求头。</span></div></pre></td></tr></table></figure>
<p>代码示例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//1. 使用formData必须发送post请求</span></div><div class="line">xhr.open(<span class="string">"post"</span>, <span class="string">"02-formData.php"</span>);</div><div class="line">    </div><div class="line"><span class="comment">//2. 获取表单元素</span></div><div class="line"><span class="keyword">var</span> form = <span class="built_in">document</span>.querySelector(<span class="string">"#myForm"</span>);</div><div class="line"><span class="comment">//3. 创建form对象，可以直接作为send的参数。</span></div><div class="line"><span class="keyword">var</span> formData = <span class="keyword">new</span> FormData(form);</div><div class="line"></div><div class="line"><span class="comment">//4. formData可以使用append方法添加参数</span></div><div class="line">formData.append(<span class="string">"id"</span>, <span class="string">"1111"</span>);</div><div class="line"></div><div class="line"><span class="comment">//5. 发送，不需要指定请求头，浏览器会自动选择合适的请求头</span></div><div class="line">xhr.send(formData);</div></pre></td></tr></table></figure>
<h5 id="文件上传-1"><a href="#文件上传-1" class="headerlink" title="文件上传"></a>文件上传</h5><blockquote>
<p>以前，文件上传需要借助表单进行上传，但是表单上传是同步的，也就是说文件上传时，页面需要提交和刷新，用户体验不友好，xhr2.0中的formData对象支持文件的异步上传。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> formData = <span class="keyword">new</span> FormData();</div><div class="line"><span class="comment">//获取上传的文件，传递到后端</span></div><div class="line"><span class="keyword">var</span> file = <span class="built_in">document</span>.getElementById(<span class="string">"file"</span>).files[<span class="number">0</span>];</div><div class="line">formData.append(<span class="string">"file"</span>, file);</div><div class="line">xhr.send(formData);</div></pre></td></tr></table></figure>
<h5 id="显示文件进度信息"><a href="#显示文件进度信息" class="headerlink" title="显示文件进度信息"></a>显示文件进度信息</h5><blockquote>
<p>xhr2.0还支持获取上传文件的进度信息，因此我们可以根据进度信息可以实时的显示文件的上传进度。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="number">1.</span> 需要注册 xhr.upload.onprogress = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;&#125; 事件，用于监听文件上传的进度.注意：需要在send之前注册。</div><div class="line"><span class="number">2.</span> 上传的进度信息会存储事件对象e中</div><div class="line"><span class="number">3.</span> e.loaded表示已上传的大小   e.total表示整个文件的大小</div></pre></td></tr></table></figure>
<p>代码参考：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">xhr.upload.onprogress = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">  </div><div class="line">  inner.style.width = (e.loaded/e.total*<span class="number">100</span>).toFixed(<span class="number">2</span>)+<span class="string">"%"</span>;</div><div class="line">  span.innerHTML = (e.loaded/e.total*<span class="number">100</span>).toFixed(<span class="number">2</span>)+<span class="string">"%"</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">xhr.send(formData);</div></pre></td></tr></table></figure>
<p>如果上传文件超过2M，php会报错，需要进行设置，允许php上传大文件。</p>
<h4 id="跨域资源共享-CORS"><a href="#跨域资源共享-CORS" class="headerlink" title="跨域资源共享(CORS)"></a>跨域资源共享(CORS)</h4><p>我们知道jsonp跨域请求资源只能通过get方式，如果想要发送一些大规模的数据的话就必须要用到post方式，那post方式怎么可以实现跨域请求的呢！！</p>
<h5 id="CORS的使用"><a href="#CORS的使用" class="headerlink" title="CORS的使用"></a>CORS的使用</h5><blockquote>
<p>新版本的XMLHttpRequest对象，可以向不同域名的服务器发出HTTP请求。这叫做<a href="http://en.wikipedia.org/wiki/Cross-Origin_Resource_Sharing" target="_blank" rel="external">“跨域资源共享”</a>（Cross-origin resource sharing，简称CORS）。</p>
</blockquote>
<p>跨域资源共享（CORS）的前提</p>
<ul>
<li>浏览器支持这个功能</li>
<li>服务器必须允许这种跨域。</li>
</ul>
<p>服务器允许跨域的代码：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//设置允许所有的域名访问这个接口</span></div><div class="line">header(<span class="string">"Access-Control-Allow-Origin: *"</span>);</div><div class="line"></div><div class="line"><span class="comment">//设置允许www.study.com这个域名访问这个接口</span></div><div class="line">header(<span class="string">"Access-Control-Allow-Origin:http://www.study.com"</span>);</div></pre></td></tr></table></figure>
<h6 id="CORS的具体流程（了解）"><a href="#CORS的具体流程（了解）" class="headerlink" title="CORS的具体流程（了解）"></a>CORS的具体流程（了解）</h6><p>原理过程：</p>
<ol>
<li>浏览器会根据<strong>同源策略</strong> 查看是否是跨域请求，如果同源，直接发送ajax请求。</li>
<li>如果非同源，说明是跨域请求，浏览器会自动发送一条请求（<strong>预检请求</strong> ,浏览器自身内部发送的），并不会携带数据，服务器接受到请求之后，会返回请求头信息，浏览器查看返回的响应头信息中是否设置了<code>header(&#39;Access-Control-Allow-Origin:请求源域名或者*&#39;);</code></li>
<li>如果没有设置，说明服务器不允许使用cors跨域，那么浏览器不会发送真正的ajax请求。</li>
<li>如果返回的响应头中设置了<code>header(&#39;Access-Control-Allow-Origin:请求源域名或者*&#39;);</code>,浏览器会跟请求头中的<code>Origin: http://www.study.com</code>进行对比，如果满足要求，则发送真正的ajax请求，否则不发送。</li>
<li>结论：<strong>跨域行为是浏览器行为，是浏览器阻止了ajax行为。服务器与服务器之间是不存在跨域的问题的</strong></li>
</ol>
<h5 id="其他的跨域手段（没卵用）"><a href="#其他的跨域手段（没卵用）" class="headerlink" title="其他的跨域手段（没卵用）"></a>其他的跨域手段（没卵用）</h5><p>以下方式基本不用，了解即可：</p>
<p>1、顶级域名相同的可以通过domain.name来解决，即同时设置 domain.name = 顶级域名（如example.com）<br>2、document.domain + iframe<br>3、window.name + iframe<br>4、location.hash + iframe<br>5、window.postMessage()</p>
<p><a href="http://rickgray.me/solutions-to-cross-domain-in-browser" target="_blank" rel="external">其他跨域方式-浏览器中的跨域资源请求</a></p>
<!-- # 综合案例 -->
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://biedongda.com/2018/03/05/webapi第六天/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="前端学徒">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一个学徒的世界">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/05/webapi第六天/" itemprop="url">webapi第六天</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-05T16:44:56+08:00">
                2018-03-05
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="杂七杂八随机"><a href="#杂七杂八随机" class="headerlink" title="杂七杂八随机"></a>杂七杂八随机</h1><p>清除选中的文字（不用记）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">window</span>.getSelection ? <span class="built_in">window</span>.getSelection().removeAllRanges() : <span class="built_in">document</span>.selection.empty();</div></pre></td></tr></table></figure>
<p>document几个常用的属性</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">document</span>.body  --&gt; body</div><div class="line"><span class="built_in">document</span>.documentElement  --&gt; html</div><div class="line"><span class="built_in">document</span>.title  --&gt; title</div><div class="line"><span class="built_in">document</span>.head   --&gt; head</div></pre></td></tr></table></figure>
<h1 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h1><blockquote>
<p>正则表达式：用于匹配规律规则的表达式，正则表达式最初是科学家对人类神经系统的工作原理的早期研究，现在在编程语言中有广泛的应用，经常用于表单校验，高级搜索等。</p>
<p>简单的说：按照每种规则去匹配符合条件的字符串</p>
</blockquote>
<p>正则表达式有一定难度，不要求非常的熟练，现阶段只要能用正则表达式完成表单校验即可，后面的框架课也会涉及到一些，将来需要使用到正则的时候，网上一搜一大堆。</p>
<h2 id="创建正则表达式"><a href="#创建正则表达式" class="headerlink" title="创建正则表达式"></a>创建正则表达式</h2><p>【07-正则表达式的创建.html】</p>
<p>构造函数的方式</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> regExp = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="regexp">/\d/</span>);</div><div class="line"><span class="comment">//参数也可以是不带两斜杠的字符串</span></div></pre></td></tr></table></figure>
<p>正则字面量</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> regExp = <span class="regexp">/\d/</span>;</div></pre></td></tr></table></figure>
<p>正则的使用</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">/\d/.test(<span class="string">"aaa1"</span>);</div><div class="line"><span class="comment">// test是用来测试某一个字符串是否符合这个正则规则的。返回true、false</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> reg = <span class="regexp">/\w/g</span>;</div><div class="line">reg.test(<span class="string">'a'</span>)<span class="comment">//true</span></div><div class="line">reg.test(<span class="string">'a'</span>)<span class="comment">//false</span></div><div class="line">reg.test(<span class="string">'a'</span>)<span class="comment">//true</span></div><div class="line">reg.test(<span class="string">'a'</span>)<span class="comment">//false</span></div><div class="line"><span class="comment">//为什么四次调用后的结果不一样，因为全局匹配涉及到 lastIndex</span></div><div class="line"><span class="comment">// 可以直接通过正则来查看lastIndex属性的取值</span></div><div class="line"><span class="built_in">console</span>.log(reg.lastIndex);</div></pre></td></tr></table></figure>
<h2 id="正则表达式的构成："><a href="#正则表达式的构成：" class="headerlink" title="正则表达式的构成："></a>正则表达式的构成：</h2><blockquote>
<p>正则表达式由一些普通字符和元字符组成，普通字符包括大小写字母、数字等，而元字符则具有特殊的含义。</p>
</blockquote>
<p>由两种基本字符类型组成：</p>
<p>-原义文本字符：’abc’</p>
<p>-元字符:在正则表达式中有特殊含义的非字母字符</p>
<h3 id="预定义类"><a href="#预定义类" class="headerlink" title="预定义类"></a>预定义类</h3><p> 正则表达式中具有特殊意义的字符。</p>
<p>【08-预定义类.html】</p>
<p><img src="/2018/03/05/webapi第六天/images/yuan.png" alt="yuan"></p>
<p>注意：上面的字符出了数字和字母，还包括下划线</p>
<p><code>​ .</code>表示任意字符，所以在想用点就是代表点的时候，需要用到转意字符 \.来表示点</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">\n | 查找换行符。</div><div class="line">\f | 查找换页符。</div><div class="line">\r | 查找回车符。</div><div class="line">\t | 查找水平制表符。(就是tab)</div><div class="line">\v | 查找垂直制表符。</div></pre></td></tr></table></figure>
<h3 id="正则优先级"><a href="#正则优先级" class="headerlink" title="正则优先级"></a>正则优先级</h3><p><code>|</code>表示或，优先级最低</p>
<p><code>()</code>优先级最高</p>
<p>【09-正则表达式的优先级问题.html】</p>
<h2 id="字符类"><a href="#字符类" class="headerlink" title="字符类"></a>字符类</h2><p>【10-正则表达式的字符类.html】</p>
<p><code>[]</code>在正则表达式中表示一个字符的位置，[]里面写这个位置可以出现的字符。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(<span class="regexp">/[abc]/</span>);<span class="comment">//表示匹配a或者b或者c  (a|b|c)</span></div></pre></td></tr></table></figure>
<p><code>[^]</code>在中扩号中的<code>^</code>表示非的意思。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//^表示该位置不可以出现的字符</span></div><div class="line"><span class="built_in">console</span>.log(<span class="regexp">/[^abc]/</span>);<span class="comment">//匹配除了a，b，c以外的其他字符</span></div></pre></td></tr></table></figure>
<p><code>[a-z]</code> <code>[1-9]</code>表示范围</p>
<p>​    [a-z]来连接两个字符表示从a到z的任意字符，这是个闭区间，也就是包含a和z本身</p>
<p>​    在[]中组成类内部是可以连写的[a-zA-Z]，在[a-z]中，”-“表示的是范围的意思，不代表中划线，要想使用中划线，可以[a-z-],后面的-就表示的是中划线</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(<span class="regexp">/[a-z]/</span>.test(<span class="string">"d"</span>));<span class="comment">//小写字母</span></div><div class="line"><span class="built_in">console</span>.log(<span class="regexp">/[A-Z]/</span>.test(<span class="string">"d"</span>));<span class="comment">//大写字母</span></div><div class="line"><span class="built_in">console</span>.log(<span class="regexp">/[0-9]/</span>.test(<span class="string">"8"</span>));<span class="comment">//数字</span></div><div class="line"><span class="built_in">console</span>.log(<span class="regexp">/[a-zA-Z0-9]/</span>);<span class="comment">//所有的小写字母和大写字母以及数字</span></div></pre></td></tr></table></figure>
<p>【11-案例-验证密码强度.html】</p>
<h2 id="正则进阶"><a href="#正则进阶" class="headerlink" title="正则进阶"></a>正则进阶</h2><h3 id="边界"><a href="#边界" class="headerlink" title="边界"></a>边界</h3><blockquote>
<p>我们前面学习的正则只要有满足的条件的就会返回true，并不能做到精确的匹配。</p>
</blockquote>
<p>【12-正则边界.html】</p>
<p><code>^</code>表示开头   <strong>[]里面的^表示取反</strong></p>
<p>$表示结尾</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(<span class="regexp">/^chuan/</span>.test(<span class="string">"dachuan"</span>));<span class="comment">//必须以chuan开头</span></div><div class="line"><span class="built_in">console</span>.log(<span class="regexp">/chuan$/</span>.test(<span class="string">"chuang"</span>));<span class="comment">//必须以chuan结尾</span></div><div class="line"><span class="built_in">console</span>.log(<span class="regexp">/^chuan$/</span>.test(<span class="string">"chuan"</span>));<span class="comment">//精确匹配chuan</span></div><div class="line"></div><div class="line"><span class="comment">//精确匹配chuan,表示必须是这个</span></div><div class="line"><span class="built_in">console</span>.log(<span class="regexp">/^chuan$/</span>.test(<span class="string">"chuanchuan"</span>));<span class="comment">//fasle</span></div></pre></td></tr></table></figure>
<p>\b: 单词边界</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="string">'This is a boy , This is a dog, where find a girl'</span>.replace(<span class="regexp">/is/g</span>, <span class="string">'0'</span>);</div><div class="line"><span class="string">'This is a boy, This is a dog, where find a girl'</span>.replace(<span class="regexp">/\bis\b/g</span>, <span class="string">'0'</span>);</div><div class="line"><span class="string">'This is a boy, This is a dog, where find a girl'</span>.replace(<span class="regexp">/\Bis\b/g</span>, <span class="string">'0'</span>);</div></pre></td></tr></table></figure>
<p>\B:非单词边界</p>
<h3 id="量词"><a href="#量词" class="headerlink" title="量词"></a>量词</h3><blockquote>
<p>量词用来控制出现的次数，一般来说量词和边界会一起使用</p>
<p>量词默认匹配紧挨的单词或内容，需要用（）分组来匹配整个单词</p>
</blockquote>
<p>【13-正则量词.html】</p>
<ol>
<li><code>*</code>表示能够出现0次或者更多次，x&gt;=0;</li>
<li><code>+</code>表示能够出现1次或者多次，x&gt;=1</li>
<li><code>?</code>表示能够出现0次或者1次，x=0或者x=1</li>
<li><code>{n}</code>表示能够出现n次</li>
<li><code>{n,}</code>表示能够出现n次或者n次以上</li>
<li><code>{n,m}</code>表示能够出现n-m次</li>
</ol>
<p>思考：如何使用{}来表示*+? </p>
<h2 id="括号总结"><a href="#括号总结" class="headerlink" title="括号总结"></a>括号总结</h2><p><code>{}</code>大括号限定出现的次数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(<span class="regexp">/chuan&#123;2&#125;/</span>.test(<span class="string">"chuanchuan"</span>));</div><div class="line"><span class="built_in">console</span>.log(<span class="regexp">/chuan&#123;2&#125;/</span>.test(<span class="string">"chuann"</span>));</div></pre></td></tr></table></figure>
<p><code>[]</code>表示一个字符出现的位置,<code>[]</code> 里面写这个位置可以出现的字符</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(<span class="regexp">/^[fb]oot$/</span>.test(<span class="string">"foot"</span>));</div><div class="line"><span class="built_in">console</span>.log(<span class="regexp">/^[fb]oot$/</span>.test(<span class="string">"boot"</span>));</div></pre></td></tr></table></figure>
<p><code>()</code>用来提升优先级，也可以理解为分组</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(<span class="regexp">/^(chuan)&#123;2&#125;$/</span>.test(<span class="string">"chuanchuan"</span>));</div></pre></td></tr></table></figure>
<h3 id="修饰符："><a href="#修饰符：" class="headerlink" title="修饰符："></a>修饰符：</h3><ol>
<li>​ g::global: 全文搜索，不添加，搜索到第一个匹配停止</li>
<li>​i::ignore: case 忽略大小写，默认大小写敏感(因为JS区分大小写的)</li>
<li>m:multiple lines多行搜索</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> mulStr = <span class="string">"@123\n@456\n@789"</span>;	<span class="comment">// \n:换行符</span></div><div class="line">mulStr.replace(<span class="regexp">/^@\d/g</span>, <span class="string">'X'</span>);	<span class="comment">//发现只有第一个被匹配到了，因为在我们看来是换行了，但是在程序里换行符也只是一个普通的字符，不能是新的一行，所以还是在一行，所以只有第一个@是开始的</span></div></pre></td></tr></table></figure>
<p><img src="/2018/03/05/webapi第六天/images/duixiangshuxing.png" alt="正则对象的属性"></p>
<p>以上列举的正则的属性是只读的，不可更改(注意：lastIndex是读写的属性)</p>
<p>非贪婪模式：</p>
<p>​    让正则表达式尽可能少的匹配，也就是说一旦成功匹配不在继续尝试，就是非贪婪模式(JS正则默认是贪婪模式，尽可能多的匹配)</p>
<p>​    做法也很简单，在量词后面加上<code>&#39;?&#39;</code>即可</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="string">'123456789'</span>.replace(<span class="regexp">/\d&#123;3,5&#125;/g</span>,<span class="string">'X'</span>);</div><div class="line"></div><div class="line"><span class="string">'123456789'</span>.replace(<span class="regexp">/\d&#123;3,5&#125;?/g</span>,<span class="string">'X'</span>);</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">$<span class="number">1</span> $<span class="number">2</span> $<span class="number">3</span> .... $n	<span class="comment">//表示分组内捕获得到的内容，必须要有分组，不然就代表原意"$1"这样的字符串了</span></div><div class="line"></div><div class="line"><span class="string">'2012-02-23'</span>.replace(<span class="regexp">/(\d&#123;4&#125;)-(\d&#123;2&#125;)-(\d&#123;2&#125;)/g</span>,<span class="string">'$2/$3/$1'</span>);</div><div class="line"><span class="comment">//OUTPUT "02/23/2012"</span></div><div class="line"></div><div class="line"><span class="comment">//不希望捕获某些分组，只需要在分组内加上?: 就可以</span></div><div class="line">忽略分组之后（针对年份忽略分组）:</div><div class="line"><span class="string">'2012-02-23'</span>.replace(<span class="regexp">/(?:\d&#123;4&#125;)-(\d&#123;2&#125;)-(\d&#123;2&#125;)/g</span>,<span class="string">'$2/$3/$1'</span>)<span class="comment">//（？：） 忽略分组</span></div><div class="line"><span class="string">"23/$3/02"</span></div><div class="line">注意点：年份忽略分组之后，月份分组为$<span class="number">1</span>,日为$<span class="number">2</span></div></pre></td></tr></table></figure>
<p>前瞻：</p>
<p><img src="/2018/03/05/webapi第六天/images/qianzhan01.png" alt="什么是前瞻"></p>
<p><img src="/2018/03/05/webapi第六天/images/qianzhan02.png" alt="前瞻的具体规则"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//正向前瞻	exp(?=assert)</span></div><div class="line"></div><div class="line"><span class="string">'a2*3'</span>.replace(<span class="regexp">/\w(?=\d)/g</span>,<span class="string">'X'</span>);<span class="comment">//X2*3</span></div><div class="line"><span class="string">'a2*34v8'</span>.replace(<span class="regexp">/\w(?=\d)/g</span>,<span class="string">'X'</span>);<span class="comment">//X2*X4X8</span></div><div class="line"><span class="string">'a2*34vv'</span>.replace(<span class="regexp">/\w(?=\d)/g</span>,<span class="string">'X'</span>);<span class="comment">//X2*X4vv</span></div><div class="line">(从以上的结果也可以看出，匹配到的部分不包含断言部分)</div><div class="line"></div><div class="line"><span class="comment">//负向前瞻	exp(?!assert)</span></div><div class="line"><span class="string">'a2*34vv'</span>.replace(<span class="regexp">/\w(?!\d)/g</span>,<span class="string">'X'</span>);<span class="comment">//aX*3XXX</span></div><div class="line"></div><div class="line"><span class="comment">//总结、注意点</span></div><div class="line"><span class="comment">//首先前面是个正则表达式，后面是一个断言部分，就是符合正则表达式部分还不够，还需要符合断言部分(断言部分也是一个正则),</span></div><div class="line"><span class="comment">//注意：匹配到的内容不包含断言部分</span></div></pre></td></tr></table></figure>
<p>​    </p>
<p>​    经验：</p>
<p>​        检验格式（邮箱格式、IP格式）是否正确，用test()<br>​        抓取星期（如所有手机号），用exec()、match()<br>​        替换敏感词汇，用replace()</p>
<h2 id="案例练习"><a href="#案例练习" class="headerlink" title="案例练习"></a>案例练习</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">talk is cheap show me the code.</div><div class="line"></div><div class="line">															-- Linus Torvalds</div><div class="line">																李纳斯•托沃兹</div></pre></td></tr></table></figure>
<ol>
<li><p>验证座机</p>
<ul>
<li>比如010-12345678  0797-1234567</li>
<li>开头是3-4位，首位必须是0</li>
<li>-后面是7-8位</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> phoneReg = <span class="regexp">/^0\d&#123;2,3&#125;-\d&#123;7,8&#125;$/</span>;</div></pre></td></tr></table></figure>
<p>​</p>
</li>
<li><p>验证姓名</p>
<ul>
<li>只能是汉字</li>
<li>长度2-6位之间</li>
<li>汉字范围[\u4e00-\u9fa5]</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> nameReg = <span class="regexp">/^[\u4e00-\u9fa5]&#123;2,6&#125;$/</span>;</div></pre></td></tr></table></figure>
</li>
<li><p>验证QQ</p>
<ul>
<li>只能是数字</li>
<li>开头不能是0</li>
<li>长度为5-11位</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> qqReg = <span class="regexp">/^[1-9]\d&#123;4,10&#125;$/</span>;</div></pre></td></tr></table></figure>
</li>
<li><p>验证手机</p>
<ul>
<li>11位数字组成</li>
<li>号段13[0-9] 147 15[0-9] 177[0178] 18[0-9]</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> mobileReg = <span class="regexp">/^(13[0-9]|147|15[0-9]|17[0178]|18[0-9])\d&#123;8&#125;$/</span>;</div></pre></td></tr></table></figure>
</li>
<li><p>验证邮箱</p>
<ul>
<li>前面是字母或者数字</li>
<li>必须有@</li>
<li>@后面是字母或者数字</li>
<li>必须有.</li>
<li>.后面是字母或者数字</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">var</span> emailReg = <span class="regexp">/^\w+@\w+(\.\w+)+$/</span>;</div><div class="line"><span class="comment">//  有类似这种的多个域名  158@qq.com.cn</span></div></pre></td></tr></table></figure>
</li>
</ol>
<p>【14-案例-完整版表单校验.html.html】</p>
<h1 id="补充知识点"><a href="#补充知识点" class="headerlink" title="补充知识点"></a>补充知识点</h1><h2 id="string-replace方法"><a href="#string-replace方法" class="headerlink" title="string.replace方法"></a>string.replace方法</h2><blockquote>
<p>string.replace(searchValue, replaceValue);replace方法的第一个参数，可以传正则表达式。功能非常的强大。</p>
</blockquote>
<p>【15-string的replace方法.html】</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> str = <span class="string">"   123AD  asadf   asadfasf  adf  "</span>;</div><div class="line"><span class="number">1</span> 替换掉字符串中的所有空白</div><div class="line"><span class="number">2.</span> 将所有的ad替换成xx</div><div class="line"><span class="number">3.</span> 将所有的ad/AD替换成xx</div><div class="line"></div><div class="line"><span class="keyword">var</span> str = <span class="string">'abc,efg,123,abc,123,a'</span>;</div><div class="line"><span class="number">4.</span> 所有的逗号替换成句号</div><div class="line"></div><div class="line"><span class="keyword">var</span> jsonStr = <span class="string">'[&#123;"name":"张三",score:80&#125;,&#123;"name":"张三",score:90&#125;,&#123;"name":"张三",score:81&#125;]'</span>; </div><div class="line"><span class="number">5.</span> 把所有成绩都修改成<span class="number">100</span>分</div><div class="line"></div><div class="line"><span class="keyword">var</span> str = <span class="string">"“你饿了,调我们的粮进京。你渴了.调我们的水进京。高考了，你特么想尽千方百计不让我们的孩子进京。为什么？!” 我们呼吁：全国一张卷，一个录取线！愿赌服输！最近高考方案闹得沸沸扬扬，其实大家就是要的公平竞争！同样都是孩子，同样的国家，同样的教育！为何不同的待遇？"</span>; </div><div class="line"><span class="number">6.</span> 把所有，。,.！!?？全部替换成.</div><div class="line"></div><div class="line"><span class="number">7.</span><span class="string">'a1b2c3d4e5f6'</span>把字符串中的数字都加<span class="number">1</span>；</div><div class="line">str.replace(exp,<span class="function"><span class="keyword">function</span>);	//函数的返回值决定了替换的内容，就是可以有动态的替换内容了</span></div><div class="line"><span class="function"></span></div><div class="line"><span class="function">'<span class="title">a1b2c3d4e5f6</span>'.<span class="title">replace</span>(<span class="params"><span class="regexp">/\d/g</span>, function(match,index,ora</span>)</span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(match);</div><div class="line">  <span class="built_in">console</span>.log(index)</div><div class="line">  <span class="built_in">console</span>.log(ora)</div><div class="line">  <span class="keyword">return</span> <span class="built_in">parseInt</span>(match)+<span class="number">1</span>;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h2 id="arguments参数"><a href="#arguments参数" class="headerlink" title="arguments参数"></a>arguments参数</h2><blockquote>
<p>JavaScript中，arguments对象是比较特别的一个对象，实际上是当前函数的一个内置属性。也就是说所有函数都内置了一个arguments对象，arguments对象中存储了传递的所有的实参。arguments是一个伪数组，因此及可以进行遍历</p>
</blockquote>
<p>【16-arguments参数.html】</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//1. 求任意个数的最大值</span></div><div class="line"><span class="comment">//2. 求任意个数的和</span></div></pre></td></tr></table></figure>
<h2 id="递归函数"><a href="#递归函数" class="headerlink" title="递归函数"></a>递归函数</h2><blockquote>
<p>递归函数指的是函数直接的或者间接的调用函数本身。递归函数一定要留有出口，不然浏览器会崩溃。</p>
</blockquote>
<p>递归函数比较抽象，尤其是第一次接触的同学们，大家了解即可。</p>
<p>【17-求1-100所有数的和.html】</p>
<p>【18-斐波那契数列.html】</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://biedongda.com/2018/03/05/webapi第五天/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="前端学徒">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一个学徒的世界">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/05/webapi第五天/" itemprop="url">webapi第五天</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-05T16:39:17+08:00">
                2018-03-05
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="事件对象"><a href="#事件对象" class="headerlink" title="事件对象"></a>事件对象</h1><h2 id="事件对象的概述"><a href="#事件对象的概述" class="headerlink" title="事件对象的概述"></a>事件对象的概述</h2><blockquote>
<p>在触发某个事件的时候，都会产生一个事件对象Event，这个对象中包含所有与事件相关的一些信息，包括触发事件的元素，事件的类型以及其他与事件相关的信息。</p>
</blockquote>
<p>鼠标事件触发时，事件对象中会包含鼠标的位置信息。<br>键盘事件触发时，事件对象中会包含按下的键相关的信息。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">每一个事件在触发时，都会产生一个事件对象。</div><div class="line">你见或者不见，我就在那里，不悲不喜。</div><div class="line">你爱或者不爱，爱就在那里，不增不减。</div><div class="line">你用或者不用，我都会给你，不离不弃。</div></pre></td></tr></table></figure>
<h2 id="获取事件对象"><a href="#获取事件对象" class="headerlink" title="获取事件对象"></a>获取事件对象</h2><blockquote>
<p>既然事件对象中存储了这么多的信息，我们首先需要做的就是获取到这个事件对象。获取事件对象的时候，存在浏览器的兼容问题。</p>
</blockquote>
<p>【演示：01-获取事件对象.html】</p>
<p>对于现代浏览器，获取事件对象非常的简单，只需要在注册事件的时候，指定一个形参即可。这个形参就是我们想要获取到的事件对象。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">btn.onclick = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</div><div class="line">    <span class="comment">//event就是事件对象，里面包含了事件触发时的一些信息。</span></div><div class="line">	<span class="built_in">console</span>.log(event);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>对于IE678来说，获取事件对象则是另一种方式，在事件里面，通过<code>window.event</code>来获取事件对象（不是通过参数的形式传递的）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">btn.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	<span class="comment">//IE678通过window.event获取事件对象</span></div><div class="line">	<span class="keyword">var</span> event = <span class="built_in">window</span>.event;</div><div class="line">	<span class="built_in">console</span>.log(event);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>兼容性封装</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">btn.onclick = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</div><div class="line">  	<span class="comment">//只要用到了事件对象，就要记得处理浏览器兼容性</span></div><div class="line">  	<span class="comment">//如果event有，直接用event，如果event没有，就用window.event</span></div><div class="line">	event = event || <span class="built_in">window</span>.event;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="事件对象的常用属性"><a href="#事件对象的常用属性" class="headerlink" title="事件对象的常用属性"></a>事件对象的常用属性</h2><blockquote>
<p>事件对象中有很多很多的属性，但是很多属性并不常用。我们经常用到的是<strong><em>鼠标位置信息</em></strong> 和<strong><em>键盘码</em></strong>  相关的信息。</p>
</blockquote>
<p>【演示-02-事件对象的常用属性.html】</p>
<p>记录了鼠标位置信息的相关属性</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// clientY: 距离可视区</span></div><div class="line"><span class="comment">// screenY: 距离屏幕</span></div><div class="line"><span class="comment">// pageY: 距离页面（文档）</span></div><div class="line"></div><div class="line">clientX与clientY：光标相对于可视区左上角的水平位置和垂直位置。</div><div class="line">screenX与screenY：光标相对于屏幕左上角的水平位置与垂直位置。</div><div class="line">pageX与pageY：光标相对于网页（文档<span class="built_in">document</span>）左上角的水平位置与垂直位置（推荐使用）</div></pre></td></tr></table></figure>
<p>【案例-03-让小天使飞.html】</p>
<h2 id="pageX与pageY的兼容性"><a href="#pageX与pageY的兼容性" class="headerlink" title="pageX与pageY的兼容性"></a>pageX与pageY的兼容性</h2><blockquote>
<p>在鼠标事件中，记录鼠标位置信息的属性有很多，使用最多的还是pageX与pageY这两个属性，但是pageX和pageY存在浏览器兼容性问题。</p>
</blockquote>
<p>【演示-04-pageX与pageY属性.html】</p>
<p>在现代浏览器中，直接通过事件对象就可以获得pageX与pageY</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">document</span>.onclick = <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</div><div class="line">    event = event || <span class="built_in">window</span>.event;</div><div class="line">    <span class="built_in">console</span>.log(event.pageX+<span class="string">"----"</span>+event.pageY);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在IE678中，并没有pageX与pageY，但是我们可以通过scrollTop + clientY的方式进行计算来获得。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPage</span>(<span class="params">event</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      	<span class="comment">// 在IE678中使用document.documentElement.scrollTop就可以获取到scrollTop的值</span></div><div class="line">        <span class="comment">// 注意： scrollTop 的取值是从 document.documentElement 上获取的</span></div><div class="line">        <span class="comment">//      如果通过 document.documentElement.scrollTop 获取不到页面滚动出去的高度,</span></div><div class="line">        <span class="comment">//      则换成 document.body.scrollTop  这是由于浏览器实现不同导致的.同一个浏览器,</span></div><div class="line">        <span class="comment">//      版本不同可能也会出现这样的问题</span></div><div class="line">        x:event.pageX || event.clientX + <span class="built_in">document</span>.documentElement.scrollLeft,</div><div class="line">        y:event.pageY || event.clientY + <span class="built_in">document</span>.documentElement.scrollTop</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>【案例-05-让小天使飞（优化1）.html】<br>【案例-06-让小天使飞（优化2）.html】</p>
<h2 id="放大镜效果（案例）"><a href="#放大镜效果（案例）" class="headerlink" title="放大镜效果（案例）"></a>放大镜效果（案例）</h2><blockquote>
<p>放大镜在开发中是一个很常见的特效，但是所有的放大镜的实现效果都是一样。</p>
</blockquote>
<p>【案例-07-放大镜特效】</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//注意：</span></div><div class="line"><span class="number">1.</span>该特效在IE上运行会出现鼠标闪烁的情况，是因为mouseover和mouseout事件导致的，可以更换为mouseenter、mouseleave,解决这个问题也可以在mask上在盖一层，这层宽度高度<span class="number">100</span>%，然后事件绑定在这个元素上</div><div class="line"><span class="number">2.</span>注意小盒子smallBox里面的图片一定要vertical-align: top;或者是块状化，不然mask在y轴上最底部不正确，因为图片距离底部有几像素，导致盒子的高度变大了几像素，在js计算的时候给mask的y赋值多了这几像素</div><div class="line"><span class="number">3.</span>还存在一个bug，就是页面足够长可滚动的时候，滚动之后在划上去，鼠标和mask的位置就不正确了,在计算‘光标在小盒子内的位置’光标的位置需要加上页面滚动的距离可以解决这个问题。</div></pre></td></tr></table></figure>
<p>mousemove事件：鼠标移动时会触发这个事件。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">document</span>.onmousemove = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	<span class="built_in">console</span>.log(<span class="string">"鼠标移动事件在触发"</span>);  </div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>获取鼠标在盒子中的位置：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// getPage函数是上面封装获取光标在页面上的x，y位置</span></div><div class="line"><span class="keyword">var</span> spaceX = getPage(event).x - box.offsetLeft;</div><div class="line"><span class="keyword">var</span> spaceY = getPage(event).y - box.offsetTop;</div></pre></td></tr></table></figure>
<h2 id="拖拽特效"><a href="#拖拽特效" class="headerlink" title="拖拽特效"></a>拖拽特效</h2><p>【案例-08-可拖拽的盒子.html】<br>【案例-09-拖拽效果(登录框).html】</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">注意点：</div><div class="line"><span class="number">1.</span>mousemove事件可以不写在mousedown里面，但是需要加判断，当前是否可以拖拽</div><div class="line"><span class="number">2.</span>判断边界，<span class="keyword">if</span>判断比较新手，使用<span class="built_in">Math</span>.min/<span class="built_in">Math</span>.max方法可以实现(高逼格)</div><div class="line"><span class="number">3.</span>可以增加按钮点击效果，打开登录框，登录框自适应居中，js自适应居中</div></pre></td></tr></table></figure>
<h1 id="注册事件的两种方式"><a href="#注册事件的两种方式" class="headerlink" title="注册事件的两种方式"></a>注册事件的两种方式</h1><h2 id="on-事件名称"><a href="#on-事件名称" class="headerlink" title="on+事件名称"></a>on+事件名称</h2><blockquote>
<p>onclick、onmouseover这种on+事件名称的方式注册事件几乎所有的浏览器都支持。</p>
</blockquote>
<p>注册事件：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">box.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	<span class="comment">//事件处理程序	</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>移除事件：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">box.onclick = <span class="literal">null</span>;</div></pre></td></tr></table></figure>
<p>on+事件名称注册事件的缺点：</p>
<p>同一个元素同一类型的事件，只能注册一个，如果注册了多个，会出现覆盖问题。</p>
<h2 id="注册事件的新方式"><a href="#注册事件的新方式" class="headerlink" title="注册事件的新方式"></a>注册事件的新方式</h2><p><strong>addEventListener与removeEventListener</strong></p>
<blockquote>
<p>现代浏览器支持的注册事件的新方式，这种方式注册的事件不会出现覆盖问题。</p>
</blockquote>
<p>【演示-10-addEventListener与removeEventListener的用法.html】</p>
<p>addEventListener的语法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//第一个参数：事件的类型：click mouseover,注意不需要加'on'</span></div><div class="line"><span class="comment">//第二个参数：函数，监听者，每次点击，这个函数就执行。</span></div><div class="line"><span class="comment">//第三个参数：false</span></div><div class="line">addEventListener(type, func, useCapture);</div></pre></td></tr></table></figure>
<font color="red">tips：如果想要让你注册的事件能够移除，不能使用匿名函数。</font>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    alert(<span class="string">"hehe"</span>);</div><div class="line">&#125;</div><div class="line"><span class="comment">//如果想让注册的事件能移除，不能用匿名函数。</span></div><div class="line">box.addEventListener(<span class="string">"click"</span>, fn1, <span class="literal">false</span>);</div></pre></td></tr></table></figure>
<p><code>removeEventListener</code>的语法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//第一个参数：事件类型</span></div><div class="line"><span class="comment">//第二个参数：要移除的那个函数</span></div><div class="line"><span class="comment">//第三个参数：false</span></div><div class="line">removeEventListener(type, func, useCapture);</div></pre></td></tr></table></figure>
<p><strong>attachEvent与detachEvent</strong></p>
<blockquote>
<p>IE678不支持<code>addEventListener</code>与<code>removeEventListener</code>两个方法，但是支持<code>attachEvent</code>与<code>detachEvnet</code></p>
</blockquote>
<p>【演示-11-attachEvent与detachEvent的用法.html】</p>
<p><code>attachEvent</code>的用法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//type:事件类型, 注意需要加上on   onclick  onmouseenter</span></div><div class="line"><span class="comment">//func:需要执行的那个事件</span></div><div class="line">attachEvent(type, func)</div></pre></td></tr></table></figure>
<p><code>detachEvent</code>的用法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//type:事件类型   需要加上on   onclick  onmouseenter</span></div><div class="line"><span class="comment">//func:需要执行的那个事件</span></div><div class="line">detachEvent(type, func)</div></pre></td></tr></table></figure>
<h2 id="兼容性封装（了解）"><a href="#兼容性封装（了解）" class="headerlink" title="兼容性封装（了解）"></a>兼容性封装（了解）</h2><blockquote>
<p>注册事件的新方式的解决了事件覆盖的问题，但是存在浏览器兼容性问题，因此可以进行兼容性封装。</p>
</blockquote>
<p>【演示-12-注册事件的兼容性封装.html】</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//添加事件</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">addEvent</span>(<span class="params">element, type, fn</span>)</span>&#123;</div><div class="line">    <span class="comment">//能力检测</span></div><div class="line">    <span class="keyword">if</span>(element.addEventListener)&#123;</div><div class="line">        element.addEventListener(type, fn, <span class="literal">false</span>);</div><div class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(element.attachEvent)&#123;</div><div class="line">        element.attachEvent(<span class="string">"on"</span>+type, fn);</div><div class="line">    &#125;<span class="keyword">else</span> &#123;</div><div class="line">        <span class="comment">//如果都不行，那就用on方式</span></div><div class="line">        element[<span class="string">"on"</span>+type] = fn;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//移除事件</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">removeEvent</span>(<span class="params">element, type, fn</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span>(element.removeEventListener)&#123;</div><div class="line">        element.removeEventListener(type, fn, <span class="literal">false</span>);</div><div class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(element.detachEvent)&#123;</div><div class="line">        element.detachEvent(<span class="string">"on"</span>+type, fn);</div><div class="line">    &#125;<span class="keyword">else</span> &#123;</div><div class="line">        element[<span class="string">"on"</span>+type] = <span class="literal">null</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h1><h2 id="事件冒泡"><a href="#事件冒泡" class="headerlink" title="事件冒泡"></a>事件冒泡</h2><blockquote>
<p>当一个元素的事件被触发时，同样的事件将会在该元素的所有祖先元素中依次被触发。这一过程被称为事件冒泡。</p>
</blockquote>
<p>说白了就是：当我们触发了子元素的某个事件后，父元素对应的事件也会触发。<br><img src="/2018/03/05/webapi第五天/images/bubble.png" alt="事件冒泡-bubble"></p>
<p>【01-事件冒泡演示.html】<br>【02-事件冒泡分析.html】</p>
<p>通常情况，事件冒泡对于我们来说是没有问题的，我们直接不管就行了，但是如果当事件冒泡给我们带来影响的时候，我们需要阻止事件冒泡。</p>
<p>【03-弹出框案例.html】</p>
<blockquote>
<p>阻止事件冒泡有浏览器兼容性问题</p>
</blockquote>
<p>正常浏览器：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">link.onclick = <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</div><div class="line">    event = event || <span class="built_in">window</span>.event;</div><div class="line">    <span class="comment">//stop :停止  propagation：传播</span></div><div class="line">    event.stopPropagation();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>IE678浏览器：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">link.onclick = <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</div><div class="line">    event = event || <span class="built_in">window</span>.event;   </div><div class="line">    event.cancelBubble = <span class="literal">true</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>兼容性处理</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">link.onclick = <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</div><div class="line">    event = event || <span class="built_in">window</span>.event;</div><div class="line">    <span class="keyword">if</span>(event.stopPropagation)&#123;</div><div class="line">      	event.stopPropagation();</div><div class="line">    &#125;<span class="keyword">else</span> &#123;</div><div class="line">      	event.cancelBubble = <span class="literal">true</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="事件捕获（了解）"><a href="#事件捕获（了解）" class="headerlink" title="事件捕获（了解）"></a>事件捕获（了解）</h2><blockquote>
<p>事件捕获是火狐浏览器提出来的，IE678不支持事件捕获（基本上，我们都是用事件冒泡）<br>事件的处理将从DOM层次的根开始，而不是从触发事件的目标元素开始，事件被从目标元素的所有祖先元素依次往下传递</p>
</blockquote>
<p>【04-事件捕获.html】</p>
<p> <img src="/2018/03/05/webapi第五天/images/capture.png" alt="capture"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//当addEventListener第三个参数为true时，表示事件捕获</span></div><div class="line">arr[i].addEventListener(<span class="string">"click"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);</div><div class="line">&#125;,<span class="literal">true</span>);</div></pre></td></tr></table></figure>
<h2 id="事件的三个阶段"><a href="#事件的三个阶段" class="headerlink" title="事件的三个阶段"></a>事件的三个阶段</h2><ol>
<li>事件的捕获阶段</li>
<li>事件的目标阶段</li>
<li><p>事件的冒泡阶段</p>
<p><img src="/2018/03/05/webapi第五天/images/three.png" alt="three"></p>
</li>
</ol>
<p>事件有三个阶段，首先发生的是捕获阶段，然后是目标阶段，最后才是冒泡阶段，对于捕获和冒泡，我们只能干预其中的一个，通常来说，我们可能会干预事件冒泡阶段，而不去干预事件捕获阶段。</p>
<h2 id="常见的事件"><a href="#常见的事件" class="headerlink" title="常见的事件"></a>常见的事件</h2><blockquote>
<p>常见的鼠标事件</p>
</blockquote>
<p><code>onmousedown</code>:鼠标按下事件<br><code>onmouseup</code>:鼠标弹起事件<br><code>onclick</code>:单击事件<br><code>ondblclick</code>：双击事件<br><code>onmouseover</code>：鼠标经过事件<br><code>onmouseout</code>：鼠标离开事件<br><code>onmousemove</code>：鼠标移动事件<br><code>onfocus</code>：鼠标获得焦点事件<br><code>onblur</code>：鼠标失去焦点事件</p>
<blockquote>
<p>常见的键盘事件</p>
</blockquote>
<p><code>onkeydown</code>: 键盘按下时触发<br><code>onkeyup</code>: 键盘弹起时触发</p>
<blockquote>
<p>对于鼠标事件，事件对象中有一系列的XY记录了鼠标的位置信息。而键盘事件中，事件对象有一个event.keyCode属性，记录了按下去的键的键盘码</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">event.keyCode : 键盘按下的那个键的键盘码</div></pre></td></tr></table></figure>
<p>【05-按esc隐藏弹出框.html】<br>【06-弹幕效果.html】</p>
<h1 id="三大家族"><a href="#三大家族" class="headerlink" title="三大家族"></a>三大家族</h1><h2 id="offset家族"><a href="#offset家族" class="headerlink" title="offset家族"></a>offset家族</h2><blockquote>
<p><code>offset</code>系列用于获取元素自身的大小和位置，在网页特效中有广泛应用<br><code>offset</code>系列主要有：<code>offsetHeight</code>、<code>offsetWidth</code>、<code>offsetParent</code>、<code>offsetLeft</code>、<code>offsetTop</code></p>
</blockquote>
<p><img src="/2018/03/05/webapi第五天/images/offset系列.png" alt="offset系列"></p>
<h3 id="offsetHeight与offsetWidth"><a href="#offsetHeight与offsetWidth" class="headerlink" title="offsetHeight与offsetWidth"></a><code>offsetHeight</code>与<code>offsetWidth</code></h3><ol>
<li>获取的是元素真实的高度和宽度</li>
<li>获取到的是数值类型，方便计算</li>
<li><code>offsetHeight</code>与<code>offsetWidth</code>是只读属性，不能设置</li>
</ol>
<p>与<code>style.height</code>&amp;&amp;<code>style.width</code>相比</p>
<ol>
<li>只能获取行内样式</li>
<li>获取到的是字符串类型，带单位，需要转换</li>
</ol>
<p><code>offsetHeight</code>与<code>offsetWidth</code>的构成</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">​offsetHeight = height + paddnig + border</div><div class="line">​offsetWidth = width + padding + border</div></pre></td></tr></table></figure>
<blockquote>
<p><strong>结论</strong></p>
</blockquote>
<ol>
<li>设置宽度高度使用<code>style.width</code>与<code>style.height</code></li>
<li>获取宽度和高度<code>offsetWidth</code>与<code>offsetHeight</code></li>
</ol>
<h3 id="offsetParent"><a href="#offsetParent" class="headerlink" title="offsetParent"></a>offsetParent</h3><blockquote>
<p><code>parentNode</code>和<code>offsetParent</code>区别</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="number">1.</span> parentNode始终找到是父元素</div><div class="line"><span class="number">2.</span> offsetParent是离当前元素最近的定位元素(absolute、relative，fixed)，如果没有，那就找body</div></pre></td></tr></table></figure>
<h3 id="offsetLeft与offsetTop"><a href="#offsetLeft与offsetTop" class="headerlink" title="offsetLeft与offsetTop"></a>offsetLeft与offsetTop</h3><blockquote>
<p><code>offsetLeft</code>: 自身左侧到<code>offsetParent</code>左侧的距离：left + margin-left<br><code>offsetTop</code>:自身顶部到<code>offsetParent</code>顶部的距离 :  top + margin-top</p>
<p><code>offsetLeft</code>与<code>offsetTop</code></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="number">1.</span>	元素自身与offsetParent真实的距离</div><div class="line"><span class="number">2.</span>	获取到的是数值类型，方便计算</div><div class="line"><span class="number">3.</span>	只读属性，只能获取，不能设置</div></pre></td></tr></table></figure>
<blockquote>
<p>style.left与style.top</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="number">1.</span> 只能获取行内样式</div><div class="line"><span class="number">2.</span> 获取到的是字符串，需要转换</div><div class="line"><span class="number">3.</span> offsetLeft只会获取整数，对于小数部分会四舍五入。（注意是offsetLeft属性）</div><div class="line"><span class="number">4.</span> 可以获取，也可以设置</div></pre></td></tr></table></figure>
<blockquote>
<p><strong>结论</strong></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">获取操作：用offset系列</div><div class="line">设置操作：用style.xxx进行设置。</div></pre></td></tr></table></figure>
<h2 id="scroll家族"><a href="#scroll家族" class="headerlink" title="scroll家族"></a>scroll家族</h2><blockquote>
<p>scroll家族用来获取盒子内容的大小和位置<br>scroll家族有：<code>scrollWidth</code>、<code>scrollHeight</code>、<code>scrollLeft</code>、<code>scrollTop</code></p>
</blockquote>
<ol>
<li><code>scrollWidth</code>与<code>scrollHeight</code>是盒子内容撑开的真实的宽度和高度。与和盒子大小无关（由offset算出盒子大小），仅仅与盒子的内容有关系。</li>
<li><code>scrollTop</code>是盒子内容被滚动条卷去的头部的高度。<code>scrollLeft</code>是盒子内容被滚动条卷去的左侧的宽度。</li>
</ol>
<p><img src="/2018/03/05/webapi第五天/images/scroll.png" alt="scroll"></p>
<p><code>onscroll</code>事件，对于有滚动条的盒子，可以使用<code>onscroll</code>注册滚动事件，每滚动一像素，就会触发该事件。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> box = doucment.getElementById(<span class="string">'box'</span>);</div><div class="line">box.onscroll = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	<span class="comment">//事件处理程序</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>获取页面被卷去的高度和宽度</p>
<blockquote>
<p>通常来说，scroll家族用的最多的地方就是用来获取页面被卷去的宽度和高度，非常的常用<br>给window、document、document.body注册都行，通常给window上注册，应为这样能兼容IE678</p>
</blockquote>
<p>页面被卷去的高度和宽度的兼容性封装</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//现代浏览器</span></div><div class="line"><span class="built_in">window</span>.pageYOffset</div><div class="line"><span class="comment">//标准模式</span></div><div class="line"><span class="built_in">document</span>.documentElement.scrollTop</div><div class="line"><span class="comment">//混杂模式</span></div><div class="line"><span class="built_in">document</span>.body.scrollTop</div><div class="line"></div><div class="line"><span class="comment">// 以上三个的区别：</span></div><div class="line">	<span class="comment">// Chrome对document.documentElement.scrollTop的识别会出现误差。</span></div><div class="line">	<span class="comment">// 由于document.documentElement.scrollTop和document.body.scrollTop在标准模式或者是兼容模式下都只有一个会返回有效的值，另外一个返回0 , 所以两者相加也不会有问题。</span></div><div class="line">	<span class="comment">// 即获取卷去距离时使用document.documentElement.scrollTop+document.body.scrollTop，经测试，代码在IE、Firefox、Chrome下都能显示正常了。</span></div><div class="line"></div><div class="line"><span class="comment">//封装</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">scroll</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        top: <span class="built_in">window</span>.pageYOffset || <span class="built_in">document</span>.documentElement.scrollTop || <span class="built_in">document</span>.body.scrollTop || <span class="number">0</span>,</div><div class="line">        left: <span class="built_in">window</span>.pageXOffset || <span class="built_in">document</span>.documentElement.scrollLeft || <span class="built_in">document</span>.body.scrollLeft || <span class="number">0</span></div><div class="line">    &#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//如何使用</span></div><div class="line"><span class="built_in">console</span>.log(scroll().top);<span class="comment">//获取页面被卷去的头部的距离</span></div><div class="line"><span class="built_in">console</span>.log(scroll().left);<span class="comment">//获取页面被卷去的左侧的距离</span></div></pre></td></tr></table></figure>
<h2 id="client家族"><a href="#client家族" class="headerlink" title="client家族"></a>client家族</h2><blockquote>
<p>client家族用于获取盒子可视区的大小</p>
<p>client家族有clientWidth、clientHeight、clientLeft、clientTop</p>
</blockquote>
<p><strong>如果内容没有超出盒子范围：clientWidth与scrollWidth相同</strong></p>
<p> <img src="/2018/03/05/webapi第五天/images/client1.png" alt="client1"></p>
<blockquote>
<p>三大家族对比</p>
</blockquote>
<p> <img src="/2018/03/05/webapi第五天/images/client.png" alt="client"></p>
<blockquote>
<p>clientTop与clientLeft</p>
</blockquote>
<p><code>clientTop</code> <code>与clientLeft</code>完全没有用，他们就是<code>borderTop</code>与<code>borderLeft</code><br>但是：如果有滚动条，还会包含滚动条的宽度，但是见过滚动条在上边或者左边的？</p>
<blockquote>
<p>onresize事件：onresize事件会在窗口被调整大小的时候发生。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">window</span>.onresize = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	<span class="comment">//事件处理程序</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>client系列一般用来获取页面的可视区宽高</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//现代浏览器获取可视区的大小</span></div><div class="line"><span class="comment">//console.log(window.innerWidth);</span></div><div class="line"><span class="comment">//console.log(window.innerHeight);</span></div><div class="line"></div><div class="line"><span class="comment">//ie678获取html的clientWidth</span></div><div class="line"><span class="comment">//console.log(document.documentElement.clientWidth);</span></div><div class="line"><span class="comment">//console.log(document.documentElement.clientHeight);</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//封装</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">client</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        width: <span class="built_in">window</span>.innerWidth || <span class="built_in">document</span>.documentElement.clientWidth || <span class="built_in">document</span>.body.clientWidth || <span class="number">0</span>,</div><div class="line">        height: <span class="built_in">window</span>.innerHeight || <span class="built_in">document</span>.documentElement.clientHeight || <span class="built_in">document</span>.body.clientHeight || <span class="number">0</span></div><div class="line">    &#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>【案例-16-获取页面可视区域的宽度和高度.html】</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://biedongda.com/2018/03/04/webapi第四天/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="前端学徒">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一个学徒的世界">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/04/webapi第四天/" itemprop="url">webapi第四天</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-04T20:51:26+08:00">
                2018-03-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="动画函数封装"><a href="#动画函数封装" class="headerlink" title="动画函数封装"></a>动画函数封装</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="number">1.</span> 让一个盒子，点一次能够跑一次</div><div class="line"><span class="number">2.</span> 一个盒子，能够自动的跑到<span class="number">400</span>px的地方</div><div class="line">	a).判断leader&lt;<span class="number">400</span>才跑，否则清除定时器</div><div class="line">	b).一进来，要记得清除定时器，不然会越点越快。</div><div class="line"><span class="number">3.</span> 封装成一个函数</div><div class="line">	a).把box替换成element</div><div class="line">    b).把<span class="number">400</span>替换成target</div><div class="line">    c).把timer绑定到element上</div><div class="line"><span class="number">4.</span> 封装的函数不会往回跑</div><div class="line">	a).修改step，要有正负 <span class="keyword">var</span> step = target &gt; leader ? <span class="number">10</span> : <span class="number">-10</span>;</div><div class="line">	b).判断条件修改，当距离大于等于一步的时候，才跑，否则清除定时器，抱过去</div></pre></td></tr></table></figure>
<h1 id="轮播图"><a href="#轮播图" class="headerlink" title="轮播图"></a>轮播图</h1><h2 id="简单轮播图"><a href="#简单轮播图" class="headerlink" title="简单轮播图"></a>简单轮播图</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="number">1.</span>	结构分析</div><div class="line"><span class="number">2.</span>	按钮高亮以及排他</div><div class="line"><span class="number">3.</span>	移动图片：</div><div class="line">	渐渐的移动图片，用到animate函数</div></pre></td></tr></table></figure>
<h2 id="左右焦点图"><a href="#左右焦点图" class="headerlink" title="左右焦点图"></a>左右焦点图</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="number">1.</span>	结构分析</div><div class="line"><span class="number">2.</span>	左右箭头的显示与隐藏</div><div class="line"><span class="number">3.</span>	点击左箭头与右箭头（下标判断）</div></pre></td></tr></table></figure>
<h2 id="无缝轮播图"><a href="#无缝轮播图" class="headerlink" title="无缝轮播图"></a>无缝轮播图</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="number">1.</span> 需要添加假图片</div><div class="line"><span class="number">2.</span> 真图片与假图片之间互相切换。</div></pre></td></tr></table></figure>
<h1 id="完整版轮播图"><a href="#完整版轮播图" class="headerlink" title="完整版轮播图"></a>完整版轮播图</h1><h2 id="找对象"><a href="#找对象" class="headerlink" title="找对象"></a>找对象</h2><blockquote>
<p>找对象没什么好说的，细心点，别用错方法即可。如果学到到现在，还找错对象，那这辈子就注定单身吧，别挣扎了 t.t</p>
</blockquote>
<h2 id="简单轮播功能"><a href="#简单轮播功能" class="headerlink" title="简单轮播功能"></a>简单轮播功能</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="number">1.</span> 给circle下的所有的li注册点击事件</div><div class="line"><span class="number">2.</span> 排他</div><div class="line"><span class="number">3.</span> 移动Ul</div></pre></td></tr></table></figure>
<h2 id="左右焦点功能"><a href="#左右焦点功能" class="headerlink" title="左右焦点功能"></a>左右焦点功能</h2><p>需要定义一个变量count来记录移动的图片的张数。</p>
<blockquote>
<p>点击右箭头功能</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="number">1.</span> 如果当前图片是最后一张（假图片），需要瞬间变成真图片</div><div class="line"><span class="number">2.</span> 点击一次，需要让图片往右移动一张</div><div class="line"><span class="number">3.</span> 同步小圆点，干掉所有小圆点，复活对应count的小圆点。</div><div class="line">	a)最后一张假图片对应的小圆点是第一个，需要做特殊处理</div></pre></td></tr></table></figure>
<blockquote>
<p>点击左箭头的功能和右箭头基本一致。</p>
</blockquote>
<h2 id="自动轮播的功能"><a href="#自动轮播的功能" class="headerlink" title="自动轮播的功能"></a>自动轮播的功能</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">1. 开启定时器，每隔两秒点击一次右箭头</div><div class="line">2. 鼠标经过盒子，停止定时器(箭头乱闪的问题解释)</div><div class="line">3. 鼠标离开盒子，开启定时器</div></pre></td></tr></table></figure>
<h2 id="同步功能"><a href="#同步功能" class="headerlink" title="同步功能"></a>同步功能</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">1. 点击小圆点时需要同步</div><div class="line">2. 淘宝bug解决方法</div></pre></td></tr></table></figure>
<p>总结：代码量稍微有点大，只要屡清楚思路，一步一步，就能做出来。  后期学到的轮播图原理都是这个，所以希望大家都能掌握。</p>
<h1 id="缓动框架"><a href="#缓动框架" class="headerlink" title="缓动框架"></a>缓动框架</h1><h2 id="缓动函数初体验"><a href="#缓动函数初体验" class="headerlink" title="缓动函数初体验"></a>缓动函数初体验</h2><p>动画公式：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> step = (target - leader)/<span class="number">10</span>;</div><div class="line">leader = leader + step;</div></pre></td></tr></table></figure>
<p>【演示：01-缓动动画初体验.html】</p>
<p>缺点：</p>
<p>​    打开控制台，查看盒子的left值，会发现并没有跑到400px，只能跑到396.4px的地方</p>
<p>原因：</p>
<p>​    offsetLeft获取值的时候，只会获取整数，会对小数部分会四舍五入处理</p>
<p>解决：</p>
<p>​    对step向上取整处理，保证每一次都至少跑1px的距离</p>
<p>【演示：02-缓动动画优化.html】</p>
<h2 id="缓动函数封装"><a href="#缓动函数封装" class="headerlink" title="缓动函数封装"></a>缓动函数封装</h2><p>【演示：03-缓动函数封装.html】</p>
<p>缺点：</p>
<p>​    往回走的时候，到达不了终点</p>
<p>原因：</p>
<p>​    往回走的时候，step是负数，不应该向上取整，而应该向下取整</p>
<p>解决：</p>
<p>​    判断step的正负</p>
<p>【演示：04-缓动函数优化.html】</p>
<p>【案例：筋斗云案例.html】</p>
<h2 id="获取计算后的样式"><a href="#获取计算后的样式" class="headerlink" title="获取计算后的样式"></a>获取计算后的样式</h2><blockquote>
<p>通过element.style.xxx只能获取到行内样式</p>
<p>通过offset系列只能获取到特殊的一些样式</p>
</blockquote>
<p>获取元素计算后的样式指的是元素经过层叠后真正生效的样式，不管样式写在哪，计算后的样式指的就是最终的样式，都是带单位的</p>
<p>现代浏览器：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 第一个参数：获取计算样式的 Element</span></div><div class="line"><span class="comment">// 第二个参数：可选，是获取元素本身还是元素的伪元素</span></div><div class="line"><span class="comment">// 如果是元素本身，该参数可省略或者为null</span></div><div class="line"><span class="comment">// 如果是伪元素，注意传递的是字符串形式（::after/::before）</span></div><div class="line"><span class="keyword">return</span> <span class="built_in">window</span>.getComputedStyle(element, <span class="literal">null</span>)[attr];</div><div class="line"><span class="comment">//获取的带单位</span></div></pre></td></tr></table></figure>
<p>IE678:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">return</span> element.currentStyle[attr];</div><div class="line"><span class="comment">//获取的带单位</span></div></pre></td></tr></table></figure>
<p>【演示：05-获取元素计算后的样式.html】</p>
<h2 id="缓动框架封装-任意样式-带px"><a href="#缓动框架封装-任意样式-带px" class="headerlink" title="缓动框架封装-任意样式(带px)"></a>缓动框架封装-任意样式(带px)</h2><p>【演示：06-缓动框架封装-任意样式(带px).html】</p>
<p>注意点：</p>
<ol>
<li>获取到的样式是字符串格式,需要取整</li>
<li>如果是auto，取整是NaN，需要进行处理</li>
<li>设置的时候，需要设置对应的值</li>
</ol>
<p>缺点：</p>
<p>​    一次只能修改一个样式，不能同时修改多个样式</p>
<h2 id="缓动框架封装-同时修改多个样式"><a href="#缓动框架封装-同时修改多个样式" class="headerlink" title="缓动框架封装-同时修改多个样式"></a>缓动框架封装-同时修改多个样式</h2><p>【演示：07-缓动框架封装-同时修改多个样式.html】</p>
<p>注意点：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">1. 需要遍历对象</div><div class="line">2. attr就是k，target就是json[k]</div></pre></td></tr></table></figure>
<p>缺点：</p>
<p>​    修改多个样式的时候，并不能所有的样式都到达终点。</p>
<h2 id="缓动框架封装-修复定时器bug"><a href="#缓动框架封装-修复定时器bug" class="headerlink" title="缓动框架封装-修复定时器bug"></a>缓动框架封装-修复定时器bug</h2><p>【演示：08-缓动框架封装-修复定时器bug.html】</p>
<p>假设成立法的三个步骤</p>
<ol>
<li>假设成立</li>
<li>想办法推翻假设</li>
<li>如果推翻不了，说明假设成立</li>
</ol>
<h1 id="缓动框架-1"><a href="#缓动框架-1" class="headerlink" title="缓动框架"></a>缓动框架</h1><h2 id="缓动框架优化-添加回调函数"><a href="#缓动框架优化-添加回调函数" class="headerlink" title="缓动框架优化-添加回调函数"></a>缓动框架优化-添加回调函数</h2><p>【演示：09-缓动框架优化-添加回调.html】</p>
<p>注意点：</p>
<ol>
<li>在清除定时器之后，调用回调函数</li>
<li>只有当传递了回调函数的时候才去调用</li>
</ol>
<h2 id="缓动框架优化-支持透明度和层级"><a href="#缓动框架优化-支持透明度和层级" class="headerlink" title="缓动框架优化-支持透明度和层级"></a>缓动框架优化-支持透明度和层级</h2><p>【演示：10-缓动框架优化-支持不透明度和层级.html】</p>
<p>注意点：</p>
<ol>
<li>将parseInt改成parseFloat      (因为不透明度是个小数，所以不能把小数给丢了)</li>
<li>将target和leader都扩大1000进行动画</li>
<li>设置值的时候，需要设置leader的1000分之1，还需要去掉px</li>
</ol>
<h2 id="手风琴特效"><a href="#手风琴特效" class="headerlink" title="手风琴特效"></a>手风琴特效</h2><blockquote>
<p>手风琴是很常见的特效，希望大家都能掌握</p>
</blockquote>
<p>【案例-11-手风琴特效（浮动版）】</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">思路：</div><div class="line">	<span class="number">1.</span>li元素浮动</div><div class="line">    <span class="number">2.</span>鼠标移入移除的时候：改变li的宽度（当前的li宽度为<span class="number">800</span>，其他的为<span class="number">100</span>，默认大小<span class="number">240</span>）</div></pre></td></tr></table></figure>
<p>缺点：</p>
<p>​    动画速度不一致，导致在动画执行过程中，总宽度不会等于1200px，因此能看到手风琴的末尾在抖动。</p>
<p>【案例-12-手风琴特效（定位版本）】</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">思路：</div><div class="line">	<span class="number">1.</span>li元素都是定位的，遍历每个设置其left取值</div><div class="line">    <span class="number">2.</span>鼠标移入移除的时候：改变当前的以及前面的li的left取值为 i*<span class="number">100</span> ，当前之后的li设置left为 i*<span class="number">100</span>+<span class="number">700</span></div></pre></td></tr></table></figure>
<p>优点：</p>
<p>​    不会出现末尾抖动的情况</p>
<blockquote>
<p>两种手风琴效果都非常的常见</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt; // 让自己和自己前面的兄弟：left 100 * i</div><div class="line">&gt; // 让后面的兄弟left： i * 100 + 多显示的值</div><div class="line">&gt;</div></pre></td></tr></table></figure>
</blockquote>
<p>【作业-13-手风琴特效-问道】</p>
<h2 id="旋转木马特效"><a href="#旋转木马特效" class="headerlink" title="旋转木马特效"></a>旋转木马特效</h2><p>【案例-14-旋转木马特效】</p>
<p>节流阀步骤：</p>
<pre><code>1. 定义节流阀开关
2. 判断阀门是否打开，只有打开了才能执行
3. 关闭阀门，不让其他人执行
4. 执行完动画之后，打开阀门
</code></pre><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">思路：</div><div class="line">	<span class="comment">//3. 旋转木马 ：就是在不停的修改配置单，修改完配置单之后重新分配位置</span></div><div class="line">  	<span class="comment">//  改配置单就行</span></div><div class="line">  	<span class="comment">// 节流阀的概念（选转木马左箭头、  轮播图添加节流阀）</span></div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://biedongda.com/2018/03/02/webApi第三天/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="前端学徒">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一个学徒的世界">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/02/webApi第三天/" itemprop="url">webApi第三天</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-02T16:59:25+08:00">
                2018-03-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="BOM"><a href="#BOM" class="headerlink" title="BOM"></a>BOM</h1><blockquote>
<p>BOM（Browser Object Model）：浏览器对象模型，提供了一套操作浏览器功能的工具。</p>
</blockquote>
<p> <img src="/2018/03/02/webApi第三天/images/1.png" alt="1"></p>
<p>BOM包含的内容很多，但是很多东西都不太常用，在BOM中需要大家掌握的就一个东西，那就是<strong><em>定时器</em></strong> 。</p>
<h2 id="window对象"><a href="#window对象" class="headerlink" title="window对象"></a>window对象</h2><ol>
<li>window对象是一个全局对象，也可以说是JavaScript中的顶级对象</li>
<li>像document、alert()、console.log()这些都是window的属性，其实BOM中基本所有的属性和方法都是属性window的。</li>
<li>所有定义在全局作用域中的变量、函数都会变成window对象的属性和方法</li>
<li>window对象下的属性和方法调用的时候可以省略window</li>
</ol>
<p>重谈 this 关键字</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="number">1.</span> <span class="keyword">this</span>在普通函数中指的是<span class="built_in">window</span>对象</div><div class="line"><span class="number">2.</span> <span class="keyword">this</span>在方法中，指定的调用这个方法的对象（对象本身）</div><div class="line"><span class="number">3.</span> <span class="keyword">this</span>在构造函数中，<span class="keyword">this</span>指向新创建的对象</div><div class="line"><span class="number">4.</span> <span class="keyword">this</span>在事件中，指向事件源，即触发事件的对象。</div></pre></td></tr></table></figure>
<h3 id="window-onload（掌握）"><a href="#window-onload（掌握）" class="headerlink" title="window.onload（掌握）"></a>window.onload（掌握）</h3><blockquote>
<p>window.onload事件会在窗体加载完成后执行，通常我们称之为入口函数。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	<span class="comment">//里面的代码会在窗体加载完成后执行。</span></div><div class="line">	<span class="comment">//窗体加载完成包括文档树的加载、还有图片、文件的加载完成。</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>如果有图片加载，那么代码一定要写到window.onload里面，否则会出现图片没有加载完成，获取到的宽度和高度不对的情况。</p>
<p>浏览器会对页面的加载做优化，在加载图片的时候，图片的引入会延迟。</p>
<p>思考：一个页面能不能写两个window.onload?</p>
<h3 id="window-open与window-close-了解"><a href="#window-open与window-close-了解" class="headerlink" title="window.open与window.close(了解)"></a>window.open与window.close(了解)</h3><blockquote>
<p>window.open() 打开一个窗口</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//语法：window.open(url, [name], [features]);</span></div><div class="line"><span class="comment">//参数1：需要载入的url地址</span></div><div class="line"><span class="comment">//参数2：新窗口的名称</span></div><div class="line">	<span class="comment">//_self:在当前窗口打开</span></div><div class="line">	<span class="comment">//_blank:在新的窗口打开</span></div><div class="line"><span class="comment">//参数3：窗口的属性，指定窗口的大小</span></div><div class="line"><span class="comment">//返回值：会返回刚刚创建的那个窗口，用于关闭</span></div><div class="line"><span class="comment">//示例：</span></div><div class="line"><span class="keyword">var</span> newWin = <span class="built_in">window</span>.open(<span class="string">"http://www.baidu.com"</span>,<span class="string">"_blank"</span>, <span class="string">"width=300,height=300"</span>);</div></pre></td></tr></table></figure>
<blockquote>
<p>window.close 关闭窗口</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">newWin.close()；<span class="comment">//newWin是刚刚创建的那个窗口</span></div><div class="line"><span class="built_in">window</span>.close();<span class="comment">//把当前窗口给关闭了</span></div></pre></td></tr></table></figure>
<h2 id="定时器（重点）"><a href="#定时器（重点）" class="headerlink" title="定时器（重点）"></a>定时器（重点）</h2><h3 id="延时定时器"><a href="#延时定时器" class="headerlink" title="延时定时器"></a>延时定时器</h3><blockquote>
<p>延时定时器可以让代码延迟一段时间之后才执行（定时炸弹）</p>
</blockquote>
<p>设置延时定时器<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//语法：setTimeout(callback, time);</span></div><div class="line"><span class="comment">//参数1：回调函数，时间到了就会执行。</span></div><div class="line"><span class="comment">//参数2：延时的时间</span></div><div class="line"><span class="comment">//返回：定时器的id，用于清除</span></div><div class="line"><span class="comment">//示例：</span></div><div class="line"><span class="keyword">var</span> timer = setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	<span class="comment">//1秒后将执行的代码。</span></div><div class="line">&#125;, <span class="number">1000</span>);</div></pre></td></tr></table></figure></p>
<p>清除延时定时器<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//语法：clearTimeout(timerId)</span></div><div class="line"><span class="comment">//参数：定时器id</span></div><div class="line"><span class="comment">//示例：</span></div><div class="line">clearTimeOut(timer);<span class="comment">//清除上面定义的定时器</span></div></pre></td></tr></table></figure></p>
<h3 id="间歇定时器"><a href="#间歇定时器" class="headerlink" title="间歇定时器"></a>间歇定时器</h3><blockquote>
<p>间歇定时器让定时器每隔一段时间就会执行一次，并且会一直执行，直到清除定时器为止.</p>
</blockquote>
<p>设置间歇定时器<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//语法：var intervalID = setInterval(func, delay);</span></div><div class="line"><span class="comment">//参数1：重复执行的函数</span></div><div class="line"><span class="comment">//参数2：每次延迟的毫秒数</span></div><div class="line"><span class="comment">//返回：定时器的id，用于清除</span></div><div class="line"><span class="comment">//示例：</span></div><div class="line"><span class="keyword">var</span> timer = setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	<span class="comment">//重复执行的代码。</span></div><div class="line">&#125;, <span class="number">1000</span>);</div></pre></td></tr></table></figure></p>
<p>清除间歇定时器<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//语法：clearInterval(intervalID)</span></div><div class="line"><span class="comment">//参数：定时器id</span></div><div class="line"><span class="comment">//示例：</span></div><div class="line">clearInterval(timer);<span class="comment">//清除上面定义的定时器</span></div></pre></td></tr></table></figure></p>
<h3 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h3><p>【短信验证码案例.html】<br>【电子表案例.html】<br>【机械表案例.html】</p>
<h2 id="location对象"><a href="#location对象" class="headerlink" title="location对象"></a>location对象</h2><blockquote>
<p>location对象也是window的一个属性，location其实对应的就是浏览器中的地址栏。</p>
</blockquote>
<h3 id="常用属性和方法"><a href="#常用属性和方法" class="headerlink" title="常用属性和方法"></a>常用属性和方法</h3><blockquote>
<p>location.href:控制地址栏中的地址</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">location.href = “http:<span class="comment">//www.baidu.com”;//让页面跳转到百度首页</span></div></pre></td></tr></table></figure>
<blockquote>
<p>location.reload()：让页面重新加载</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">location.reload(<span class="literal">true</span>);<span class="comment">//强制刷新，相当于ctrl+F5</span></div><div class="line">location.reload(<span class="literal">false</span>);<span class="comment">//刷新，相当于F5</span></div></pre></td></tr></table></figure>
<blockquote>
<p>location的其他属性</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.location.hash);<span class="comment">//哈希值 其实就是锚点</span></div><div class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.location.host);<span class="comment">//服务器 服务器名+端口号</span></div><div class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.location.hostname);<span class="comment">//服务器名</span></div><div class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.location.pathname);<span class="comment">//路径名</span></div><div class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.location.port);<span class="comment">//端口</span></div><div class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.location.protocol);<span class="comment">//协议</span></div><div class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.location.search);<span class="comment">//参数</span></div></pre></td></tr></table></figure>
<p>【案例：定时跳转.html】</p>
<h2 id="其他对象"><a href="#其他对象" class="headerlink" title="其他对象"></a>其他对象</h2><blockquote>
<p>window.navigator的一些属性可以获取客户端的一些信息</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//navigator.userAgent：浏览器版本</span></div></pre></td></tr></table></figure>
<blockquote>
<p>history对象表示页面的历史</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//后退：</span></div><div class="line">history.back();</div><div class="line">history.go(<span class="number">-1</span>);</div><div class="line"><span class="comment">//前进：</span></div><div class="line">history.forward();</div><div class="line">history.go(<span class="number">1</span>);</div></pre></td></tr></table></figure>
<blockquote>
<p>screen对象</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(screen.width);<span class="comment">//屏幕的宽度 </span></div><div class="line"><span class="built_in">console</span>.log(screen.height);<span class="comment">//屏幕的高度</span></div><div class="line"><span class="built_in">console</span>.log(screen.availWidth);<span class="comment">//浏览器可占用的宽度(和浏览器伸缩大小无关)</span></div><div class="line"><span class="built_in">console</span>.log(screen.availHeight);<span class="comment">//浏览器可占用的高度(和浏览器伸缩大小无关)</span></div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://biedongda.com/2018/03/02/webApi第二天/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="前端学徒">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一个学徒的世界">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/02/webApi第二天/" itemprop="url">webApi第二天</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-02T16:20:18+08:00">
                2018-03-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="标签内容"><a href="#标签内容" class="headerlink" title="标签内容"></a>标签内容</h1><blockquote>
<p><code>innerText</code>和<code>innerHTML</code>属性都是用来获取和设置标签的内容的。但是二者还是有区别的。</p>
</blockquote>
<h2 id="innerHTML"><a href="#innerHTML" class="headerlink" title="innerHTML"></a>innerHTML</h2><blockquote>
<p><code>innerHTML</code>可以用于获取和设置标签的所有内容，包括<strong>标签和文本内容</strong></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//innerHTML:内部的HTML</span></div><div class="line"><span class="comment">//  获取标签内容的时候，不管标签还是文本，都能获取到</span></div><div class="line"><span class="comment">//  innerHTML设置内容的时候，覆盖原来内容，标签也能生效，浏览器能解析这个标签。</span></div></pre></td></tr></table></figure>
<h2 id="innerText"><a href="#innerText" class="headerlink" title="innerText"></a>innerText</h2><blockquote>
<p><code>innerText</code>可以用于获取和设置标签的文本内容，会丢弃掉标签</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//innerText:内部 文本</span></div><div class="line"><span class="comment">//  获取标签内容的时候，只会获取文本，标签扔掉了</span></div><div class="line"><span class="comment">//  设置标签内容的时候，覆盖原来内容，对标签进行转义（目的：把标签直接当文本来用）</span></div></pre></td></tr></table></figure>
<p>二者的区别：</p>
<ul>
<li><code>innerHTML</code>是W3C的标准属性，而<code>innerText</code>是IE提出来的属性，存在兼容性问题。因此更加推荐大家使用innerHTML。</li>
<li>innerText的作用：防止xss攻击</li>
</ul>
<h2 id="innerText的兼容性问题"><a href="#innerText的兼容性问题" class="headerlink" title="innerText的兼容性问题"></a>innerText的兼容性问题</h2><blockquote>
<p>浏览器兼容性：指网页在各种浏览器上的显示效果不一致。或者是一些属性和方法在低版本的浏览器中不支持。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//1. innerText是IE提出来的属性，因此低版本的火狐浏览器不支持这个属性。</span></div><div class="line"><span class="comment">//2. 火狐有一个textContent属性，效果跟innerText一样，但是IE678不支持这个属性</span></div></pre></td></tr></table></figure>
<p>解决浏览器兼容性的处理方式：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="number">1.</span> 能力检测 （常用）</div><div class="line"><span class="number">2.</span> 代理检测	（判断浏览器的类型和版本）</div><div class="line"><span class="number">3.</span> 怪癖检测 （某个浏览器具有特殊的功能）</div></pre></td></tr></table></figure></p>
<p>书写innerText的兼容性代码</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//获取标签的innerText（兼容所有浏览器）</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getInnerText</span>(<span class="params">element</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> element.innerText === <span class="string">"string"</span>) &#123;</div><div class="line">        <span class="keyword">return</span> element.innerText;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">return</span> element.textContent;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//设置标签的innerText（兼容所有浏览器）</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">setInnerText</span>(<span class="params">element, value</span>) </span>&#123;</div><div class="line">    <span class="comment">//能力检测</span></div><div class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> element.innerText === <span class="string">"string"</span>) &#123;</div><div class="line">        element.innerText = value;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        element.textContent = value;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="节点操作"><a href="#节点操作" class="headerlink" title="节点操作"></a>节点操作</h1><h2 id="节点的属性"><a href="#节点的属性" class="headerlink" title="节点的属性"></a>节点的属性</h2><ul>
<li><p>节点分类：<br>​    元素节点、文本节点、属性节点、注释节点</p>
</li>
<li><p>节点常用的属性<br>​    <code>nodeType</code>:   节点类型：元素节点的 nodeType = 1<br>​    <code>nodeName</code>:   节点名称<br>​    <code>nodeValue</code>:  节点值 (元素节点的nodeValue取值为null)</p>
</li>
</ul>
<h2 id="节点层次"><a href="#节点层次" class="headerlink" title="节点层次"></a>节点层次</h2><h3 id="孩子节点"><a href="#孩子节点" class="headerlink" title="孩子节点"></a>孩子节点</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//childNodes: 获取所有的子节点（包括了元素节点和其他很多类型的节点，不包括孙子节点，基本不常用）</span></div><div class="line"><span class="comment">//children: 获取所有的子元素节点（类似数组的length属性一样，children也是时刻在更新的。用途很广泛）</span></div><div class="line"><span class="comment">//firstChild: 第一个节点</span></div><div class="line"><span class="comment">//firstElementChild //第一个子元素 有兼容性问题 可以封装一个兼容性方法</span></div><div class="line"><span class="comment">//lastChild //最后一个节点</span></div><div class="line"><span class="comment">//lastElementChild //最后一个子元素 有兼容性问题 可以封装一个兼容性方法</span></div></pre></td></tr></table></figure>
<p>【案例：列表的隔行变色】<br>【案例：菜单切换】</p>
<p><code>javascript:void(0)</code>的作用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//1. javascript:是伪协议，表示url的内容通过javascript执行。</span></div><div class="line"><span class="comment">//2. void(0) 表示不作任何操作，这样会防止链接跳转到其他页面。</span></div><div class="line"><span class="comment">//3. 让页面不跳转，JavaScript:void(0) 是最通用的方式。</span></div></pre></td></tr></table></figure>
<p>思考：<code>children</code>与<code>getElementsByTagName</code>的区别？</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//children 表示节点下所有的子元素，不包括孙子节点</span></div><div class="line"><span class="comment">//getElemengtsByTagName 表示节点下对应的所有后代节点</span></div></pre></td></tr></table></figure>
<p>键盘事件：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//onkeydown: 监听鼠标按下事件（获取的是上一次的表单的值）</span></div><div class="line"><span class="comment">//onkeyup: 监听鼠标弹起事件</span></div></pre></td></tr></table></figure>
<h3 id="兄弟节点"><a href="#兄弟节点" class="headerlink" title="兄弟节点"></a>兄弟节点</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//1. nextSibling:下一个兄弟节点</span></div><div class="line"><span class="comment">//2. nextElementSibling:下一个兄弟元素（IE678不兼容）</span></div><div class="line"><span class="comment">//3. previousSibling//上一个兄弟节点</span></div><div class="line"><span class="comment">//4. previousElementSibling //上一个兄弟元素 有兼容性问题 可以封装一个兼容性方法</span></div></pre></td></tr></table></figure>
<p>【案例：表单校验加强版】<br>【案例：表单校验加强版（修复bug）】</p>
<h3 id="父节点"><a href="#父节点" class="headerlink" title="父节点"></a>父节点</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//1. parentNode:父节点  没有兼容性问题</span></div></pre></td></tr></table></figure>
<h1 id="样式操作"><a href="#样式操作" class="headerlink" title="样式操作"></a>样式操作</h1><blockquote>
<p>标签不仅可以通过<code>class</code>属性操作样式，还可以通过<code>style</code>属性操作样。同样的DOM对象可以通过<code>className</code>操作样式，也可以通过<code>style</code>属性操作样。</p>
</blockquote>
<ol>
<li>style属性是一个对象</li>
<li>style这个对象中属性值都是字符串格式,所以在设置样式的时候，属性值一定要用引号包含，该有单位的记得带单位。</li>
<li>标签中style属性有哪些样式名，在style这个对象中就有对应的属性名。</li>
<li>标签中有一些属性带了-，比如background-color,到了style对象中，变成了驼峰命名法，backgroundColor（因为’-‘在js中不是一个合法的标识符）</li>
<li>DOM中的style属性只能获取到和设置行内样式，在类样式中定义的样式通过style获取不到。</li>
</ol>
<p>关于body:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//1. document.body  : body比较常用，并且在页面中时唯一的，因此可以使用document.body直接获取。</span></div></pre></td></tr></table></figure>
<p>【案例：开关灯案例】<br>【案例：百度换肤】<br>【案例：隐藏京东广告】<br>【案例：隐藏淘宝二维码】<br>【案例：让当前文本框高亮显示】<br>【案例：表格隔行变色+高亮】<br>【案例：操作透明度】<br>【案例：style设置位置】<br>【案例：style操作层级】</p>
<h1 id="克隆节点"><a href="#克隆节点" class="headerlink" title="克隆节点"></a>克隆节点</h1><p>语法：var newNode = node.cloneNode(deep)<br>功能：在内存中克隆一份节点,不会再页面上显示<br>参数：deep</p>
<ul>
<li>false：默认值：是浅复制，只会复制标签，节点本身，不会复制节点的孩子。</li>
<li>true: 深度复制，会复制标签，还会复制标签的所有内容 <strong>常用</strong></li>
</ul>
<blockquote>
<ol>
<li>克隆出来的节点跟原来的节点没有关系了，修改了也不会相互影响。</li>
<li>如果克隆的节点带了id，我们需要给id重新设置一个值，不让id冲突</li>
</ol>
</blockquote>
<h1 id="添加节点"><a href="#添加节点" class="headerlink" title="添加节点"></a>添加节点</h1><h2 id="appendChild"><a href="#appendChild" class="headerlink" title="appendChild"></a>appendChild</h2><p>语法：parent.appendChild(newChild)</p>
<p>parent:调用者，父节点来调用</p>
<p>newChild:需要添加的那个孩子。</p>
<p>作用：把newChild添加到parent的孩子的最后面。</p>
<blockquote>
<p>如果添加的是页面中本来就存在的元素，是一个剪切的效果，原来的就不在了。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> demo = <span class="built_in">document</span>.getElementById(<span class="string">"demo"</span>);</div><div class="line"><span class="keyword">var</span> box = <span class="built_in">document</span>.getElementById(<span class="string">"box"</span>);</div><div class="line">box.appendChild(demo);</div></pre></td></tr></table></figure>
<h2 id="insertBefore"><a href="#insertBefore" class="headerlink" title="insertBefore"></a>insertBefore</h2><p>语法：parent.insertBefore(newChild, refChild);</p>
<p>parent:必须要父节点来调用</p>
<p>newChild：需要添加的那个节点</p>
<p>refChild:添加到哪一个节点的前面。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> ul = <span class="built_in">document</span>.getElementById(<span class="string">"list"</span>);</div><div class="line"><span class="keyword">var</span> li = <span class="built_in">document</span>.createElement(<span class="string">"li"</span>);</div><div class="line">li.innerHTML = <span class="string">"骥骥"</span>;</div><div class="line"><span class="comment">//就是添加到子节点的最前面。</span></div><div class="line">ul.insertBefore(li, ul.children[<span class="number">0</span>]);</div></pre></td></tr></table></figure>
<p>​    注意:</p>
<p>​    insertBefore同appendChild一样如果添加的是页面中本来就存在的元素，是一个剪切的效果，原来的就不在了。</p>
<h2 id="双击事件"><a href="#双击事件" class="headerlink" title="双击事件"></a>双击事件</h2><p>ondblclick:双击的时候触发</p>
<h1 id="创建节点"><a href="#创建节点" class="headerlink" title="创建节点"></a>创建节点</h1><h2 id="document-write（基本不用）"><a href="#document-write（基本不用）" class="headerlink" title="document.write（基本不用）"></a>document.write（基本不用）</h2><p>可以生成新的节点，但是不推荐使用。<strong><em>如果页面已经加载完成了，你还是用document.write写内容的话，会把之前的页面给覆盖掉</em></strong> </p>
<p>原理：页面从上往下加载的时候，会开启一个文档流，当页面加载完，文档流就会关闭。</p>
<p>document.write的本意就是在文档流上写入内容。如果页面没加载完成，文档流还是开着的，document.write直接在这个文档流上写东西</p>
<p>如果页面加载完成了，还是用document.write写东西，会重新开启一个新的文档流，往新的文档流上写东西，旧的文档流就被新的文档流覆盖了。</p>
<h2 id="innerHTML-1"><a href="#innerHTML-1" class="headerlink" title="innerHTML"></a>innerHTML</h2><p>innerHTML也可以创建节点</p>
<blockquote>
<p>innerHTML创建节点的时候有一个特点，如果原来有内容的话，使用innerHTML会把原先的内容给干掉。</p>
<p>慎用：很容易出现效率问题。</p>
</blockquote>
<h2 id="createElement"><a href="#createElement" class="headerlink" title="createElement"></a>createElement</h2><p>语法：var element = document.createElement(“tagName”);</p>
<p>作用：在内存里面创建了一个节点</p>
<p>返回：一个元素</p>
<p>用途非常的广泛。</p>
<h1 id="删除节点"><a href="#删除节点" class="headerlink" title="删除节点"></a>删除节点</h1><p>语法：parent.removeChild(child);</p>
<p>功能：由父盒子调用，删除里面的一个子元素。</p>
<h1 id="动态创建元素"><a href="#动态创建元素" class="headerlink" title="动态创建元素"></a>动态创建元素</h1><h2 id="随机点名案例"><a href="#随机点名案例" class="headerlink" title="随机点名案例"></a>随机点名案例</h2><h2 id="祝愿墙案例"><a href="#祝愿墙案例" class="headerlink" title="祝愿墙案例"></a>祝愿墙案例</h2><p>涉及到字符串拼接的问题：<br>​    字符串不能换行：js的末尾可以不写分号来表示一行的结束，因为js在换行的地方，发现没有分号的话，会自动加上分号的。</p>
<h2 id="仿百度搜索案例"><a href="#仿百度搜索案例" class="headerlink" title="仿百度搜索案例"></a>仿百度搜索案例</h2>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">前端学徒</p>
              <p class="site-description motion-element" itemprop="description">web前端开发，移动端开发是一个很好的工种，希望你能和我携手共进前端职业发展</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">44</span>
                  <span class="site-state-item-name">Artikel</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">44</span>
                  <span class="site-state-item-name">Tags</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">前端学徒</span>

  
</div>


  <div class="powered-by">Erstellt mit  <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
